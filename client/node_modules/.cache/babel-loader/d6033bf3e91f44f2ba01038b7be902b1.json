{"ast":null,"code":"import { ColorMapping, bubbleRendering } from '../index';\nimport { bubbleClick, bubbleMouseMove } from '../index';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CircleOption, MapLocation, findMidPointOfPolygon, Point, drawCircle, elementAnimate, getTranslate } from '../utils/helper';\nimport { RectOption, Rect, drawRectangle, checkPropertyPath, getZoomTranslate, getRatioOfBubble, maintainSelection, getValueFromObject } from '../utils/helper';\n/**\n * Bubble module class\n */\nvar Bubble = /** @class */function () {\n  function Bubble(maps) {\n    /**\n     * Bubble Id for current layer\n     */\n    this.id = '';\n    this.maps = maps;\n    this.bubbleCollection = [];\n  }\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   * To render bubble\n   *\n   * @private\n   */\n  Bubble.prototype.renderBubble = function (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  bubbleSettings, shapeData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, bubbleID) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var layerData = layer.layerData;\n    var colorValuePath = bubbleSettings.colorValuePath;\n    var equalValue = !isNullOrUndefined(colorValuePath) ? colorValuePath.indexOf('.') > -1 ? getValueFromObject(shapeData, bubbleSettings.colorValuePath) : shapeData[colorValuePath] : shapeData[colorValuePath];\n    var colorValue = !isNullOrUndefined(colorValuePath) ? colorValuePath.indexOf('.') > -1 ? Number(getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : Number(shapeData[colorValuePath]) : Number(shapeData[colorValuePath]);\n    var bubbleValue = !isNullOrUndefined(bubbleSettings.valuePath) ? bubbleSettings.valuePath.indexOf('.') > -1 ? Number(getValueFromObject(shapeData, bubbleSettings.valuePath)) : Number(shapeData[bubbleSettings.valuePath]) : Number(shapeData[bubbleSettings.valuePath]);\n    var opacity;\n    var bubbleColor;\n    if (isNaN(bubbleValue) && isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n      return null;\n    }\n    var radius = getRatioOfBubble(bubbleSettings.minRadius, bubbleSettings.maxRadius, bubbleValue, range.min, range.max);\n    var colorMapping = new ColorMapping(this.maps);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var shapeColor = colorMapping.getColorByValue(bubbleSettings.colorMapping, colorValue, equalValue);\n    // eslint-disable-next-line prefer-const\n    bubbleColor = Object.prototype.toString.call(shapeColor) === '[object Object]' && !isNullOrUndefined(shapeColor['fill']) ? shapeColor['fill'] : color;\n    // eslint-disable-next-line prefer-const\n    opacity = Object.prototype.toString.call(shapeColor) === '[object Object]' && !isNullOrUndefined(shapeColor['opacity']) ? shapeColor['opacity'] : bubbleSettings.opacity;\n    var shapePoints = [[]];\n    this.maps.translateType = 'bubble';\n    var midIndex = 0;\n    var pointsLength = 0;\n    var currentLength = 0;\n    for (var i = 0, len = layerData.length; i < len; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var shape = layerData[i];\n      shape = shape['property'];\n      var shapePath = checkPropertyPath(shapeData[layer.shapeDataPath], layer.shapePropertyPath, shape);\n      var shapeDataLayerPathValue = !isNullOrUndefined(shapeData[layer.shapeDataPath]) && isNaN(shapeData[layer.shapeDataPath]) ? shapeData[layer.shapeDataPath].toLowerCase() : shapeData[layer.shapeDataPath];\n      var shapePathValue = !isNullOrUndefined(shape[shapePath]) && isNaN(shape[shapePath]) ? shape[shapePath].toLowerCase() : shape[shapePath];\n      if (shapeDataLayerPathValue === shapePathValue && layerData[i].type !== 'LineString' && layerData[i].type !== 'MultiLineString' && layerData[i]['type'] !== 'Point' && layerData[i]['type'] !== 'MultiPoint') {\n        if (!layerData[i]['_isMultiPolygon']) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          shapePoints.push(this.getPoints(layerData[i], []));\n          currentLength = shapePoints[shapePoints.length - 1].length;\n          if (pointsLength < currentLength) {\n            pointsLength = currentLength;\n            midIndex = shapePoints.length - 1;\n          }\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          var layer_1 = layerData[i];\n          for (var j = 0; j < layer_1.length; j++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shapePoints.push(this.getPoints(layer_1[j], []));\n            currentLength = shapePoints[shapePoints.length - 1].length;\n            if (pointsLength < currentLength) {\n              pointsLength = currentLength;\n              midIndex = shapePoints.length - 1;\n            }\n          }\n        }\n      }\n    }\n    var projectionType = this.maps.projectionType;\n    var centerY;\n    var eventArgs;\n    var bubbleBorder = {\n      color: bubbleSettings.border.color,\n      opacity: bubbleSettings.border.opacity,\n      width: bubbleSettings.border.width\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var center = findMidPointOfPolygon(shapePoints[midIndex], projectionType, layer.geometryType);\n    if (bubbleSettings.visible) {\n      if (!isNullOrUndefined(center)) {\n        centerY = this.maps.projectionType === 'Mercator' ? center['y'] : -center['y'];\n        eventArgs = {\n          cancel: false,\n          name: bubbleRendering,\n          border: bubbleBorder,\n          cx: center['x'],\n          cy: centerY,\n          data: shapeData,\n          fill: bubbleColor,\n          maps: this.maps,\n          radius: radius\n        };\n      } else {\n        var shapePointsLength = shapePoints.length - 1;\n        if (shapePoints[shapePointsLength]['x'] && shapePoints[shapePointsLength]['y']) {\n          eventArgs = {\n            cancel: false,\n            name: bubbleRendering,\n            border: bubbleBorder,\n            cx: shapePoints[shapePointsLength]['x'],\n            cy: shapePoints[shapePointsLength]['y'],\n            data: shapeData,\n            fill: bubbleColor,\n            maps: this.maps,\n            radius: radius\n          };\n        } else {\n          return;\n        }\n      }\n      this.maps.trigger('bubbleRendering', eventArgs, function (bubbleArgs) {\n        if (eventArgs.cancel) {\n          return;\n        }\n        var bubbleElement;\n        eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n        if (bubbleSettings.bubbleType === 'Circle') {\n          var circle = new CircleOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, 0, 0, eventArgs.radius, null);\n          bubbleElement = drawCircle(_this.maps, circle, group);\n        } else {\n          var y = _this.maps.projectionType === 'Mercator' ? eventArgs.cy - radius : eventArgs.cy + radius;\n          var rectangle = new RectOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, new Rect(0, 0, radius * 2, radius * 2), 2, 2);\n          eventArgs.cx -= radius;\n          eventArgs.cy = y;\n          bubbleElement = drawRectangle(_this.maps, rectangle, group);\n        }\n        maintainSelection(_this.maps.selectedBubbleElementId, _this.maps.bubbleSelectionClass, bubbleElement, 'BubbleselectionMapStyle');\n        _this.bubbleCollection.push({\n          LayerIndex: layerIndex,\n          BubbleIndex: bubbleIndex,\n          DataIndex: dataIndex,\n          element: bubbleElement,\n          center: {\n            x: eventArgs.cx,\n            y: eventArgs.cy\n          }\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var translate;\n        var animate = layer.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n        if (_this.maps.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(_this.maps.zoomModule) && !_this.maps.isTileMap) {\n          translate = getZoomTranslate(_this.maps, layer, animate);\n        } else {\n          translate = getTranslate(_this.maps, layer, animate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var bubbleDataSource = bubbleSettings.dataSource;\n        var scale = translate['scale'];\n        var transPoint = translate['location'];\n        var position = new MapLocation(_this.maps.isTileMap ? eventArgs.cx : (eventArgs.cx + transPoint.x) * scale, _this.maps.isTileMap ? eventArgs.cy : (eventArgs.cy + transPoint.y) * scale);\n        bubbleElement.setAttribute('transform', 'translate( ' + position.x + ' ' + position.y + ' )');\n        var bubble = bubbleDataSource.length - 1 === dataIndex ? 'bubble' : null;\n        if (bubbleSettings.bubbleType === 'Square') {\n          position.x += radius;\n          position.y += radius * (_this.maps.projectionType === 'Mercator' ? 1 : -1);\n        } else {\n          radius = 0;\n        }\n        if (bubbleSettings.animationDuration > 0) {\n          elementAnimate(bubbleElement, bubbleSettings.animationDelay, bubbleSettings.animationDuration, position, _this.maps, bubble, radius);\n        }\n      });\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Bubble.prototype.getPoints = function (shape, points) {\n    if (isNullOrUndefined(shape.map)) {\n      points = shape['point'];\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      shape.map(function (current, index) {\n        points.push(new Point(current['point']['x'], current['point']['y']));\n      });\n    }\n    return points;\n  };\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   * To check and trigger bubble click event\n   *\n   * @private\n   */\n  Bubble.prototype.bubbleClick = function (e) {\n    var target = e.target.id;\n    if (target.indexOf('_LayerIndex_') === -1) {\n      return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var data = this.getbubble(target);\n    if (isNullOrUndefined(data)) {\n      return;\n    }\n    var eventArgs = {\n      cancel: false,\n      name: bubbleClick,\n      data: data,\n      maps: this.maps,\n      target: target,\n      x: e.clientX,\n      y: e.clientY\n    };\n    this.maps.trigger(bubbleClick, eventArgs);\n  };\n  /**\n   * To get bubble from target id\n   *\n   * @param {string} target - Specifies the target\n   * @returns {object} - Returns the object\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Bubble.prototype.getbubble = function (target) {\n    var id = target.split('_LayerIndex_');\n    var index = parseInt(id[1].split('_')[0], 10);\n    var layer = this.maps.layers[index];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var data;\n    if (target.indexOf('_BubbleIndex_') > -1) {\n      var bubbleIndex = parseInt(id[1].split('_BubbleIndex_')[1], 10);\n      var dataIndex = parseInt(id[1].split('_BubbleIndex_')[1].split('_dataIndex_')[1], 10);\n      if (!isNaN(bubbleIndex)) {\n        data = layer.bubbleSettings[bubbleIndex].dataSource[dataIndex];\n        return data;\n      }\n    }\n    return null;\n  };\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   * To check and trigger bubble move event\n   *\n   * @private\n   */\n  Bubble.prototype.bubbleMove = function (e) {\n    var target = e.target.id;\n    if (target.indexOf('_LayerIndex_') === -1) {\n      return;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var data = this.getbubble(target);\n    if (isNullOrUndefined(data)) {\n      return;\n    }\n    var eventArgs = {\n      cancel: false,\n      name: bubbleMouseMove,\n      data: data,\n      maps: this.maps,\n      target: target,\n      x: e.clientX,\n      y: e.clientY\n    };\n    this.maps.trigger(bubbleMouseMove, eventArgs);\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} - Returns the module name.\n   */\n  Bubble.prototype.getModuleName = function () {\n    return 'Bubble';\n  };\n  /**\n   * To destroy the bubble.\n   *\n   * @returns {void}\n   * @private\n   */\n  Bubble.prototype.destroy = function () {\n    this.bubbleCollection = [];\n    //TODO: Calling the below code throws spec issue.\n    //this.maps = null;\n  };\n\n  return Bubble;\n}();\nexport { Bubble };","map":{"version":3,"names":["ColorMapping","bubbleRendering","bubbleClick","bubbleMouseMove","isNullOrUndefined","CircleOption","MapLocation","findMidPointOfPolygon","Point","drawCircle","elementAnimate","getTranslate","RectOption","Rect","drawRectangle","checkPropertyPath","getZoomTranslate","getRatioOfBubble","maintainSelection","getValueFromObject","Bubble","maps","id","bubbleCollection","prototype","renderBubble","bubbleSettings","shapeData","color","range","bubbleIndex","dataIndex","layerIndex","layer","group","bubbleID","_this","layerData","colorValuePath","equalValue","indexOf","colorValue","Number","bubbleValue","valuePath","opacity","bubbleColor","isNaN","radius","minRadius","maxRadius","min","max","colorMapping","shapeColor","getColorByValue","Object","toString","call","shapePoints","translateType","midIndex","pointsLength","currentLength","i","len","length","shape","shapePath","shapeDataPath","shapePropertyPath","shapeDataLayerPathValue","toLowerCase","shapePathValue","type","push","getPoints","layer_1","j","projectionType","centerY","eventArgs","bubbleBorder","border","width","center","geometryType","visible","cancel","name","cx","cy","data","fill","shapePointsLength","trigger","bubbleArgs","bubbleElement","bubbleType","circle","y","rectangle","selectedBubbleElementId","bubbleSelectionClass","LayerIndex","BubbleIndex","DataIndex","element","x","translate","animate","animationDuration","zoomModule","zoomSettings","zoomFactor","isTileMap","bubbleDataSource","dataSource","scale","transPoint","position","setAttribute","bubble","animationDelay","points","map","current","index","e","target","getbubble","clientX","clientY","split","parseInt","layers","bubbleMove","getModuleName","destroy"],"sources":["/Users/macbookpro16/Desktop/cs222/client/node_modules/@syncfusion/ej2-maps/src/maps/layers/bubble.js"],"sourcesContent":["import { ColorMapping, bubbleRendering } from '../index';\nimport { bubbleClick, bubbleMouseMove } from '../index';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CircleOption, MapLocation, findMidPointOfPolygon, Point, drawCircle, elementAnimate, getTranslate } from '../utils/helper';\nimport { RectOption, Rect, drawRectangle, checkPropertyPath, getZoomTranslate, getRatioOfBubble, maintainSelection, getValueFromObject } from '../utils/helper';\n/**\n * Bubble module class\n */\nvar Bubble = /** @class */ (function () {\n    function Bubble(maps) {\n        /**\n         * Bubble Id for current layer\n         */\n        this.id = '';\n        this.maps = maps;\n        this.bubbleCollection = [];\n    }\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * To render bubble\n     *\n     * @private\n     */\n    Bubble.prototype.renderBubble = function (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    bubbleSettings, shapeData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, bubbleID) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var layerData = layer.layerData;\n        var colorValuePath = bubbleSettings.colorValuePath;\n        var equalValue = (!isNullOrUndefined(colorValuePath)) ? ((colorValuePath.indexOf('.') > -1) ?\n            (getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : shapeData[colorValuePath]) : shapeData[colorValuePath];\n        var colorValue = (!isNullOrUndefined(colorValuePath)) ? ((colorValuePath.indexOf('.') > -1) ?\n            Number(getValueFromObject(shapeData, bubbleSettings.colorValuePath)) : Number(shapeData[colorValuePath])) :\n            Number(shapeData[colorValuePath]);\n        var bubbleValue = (!isNullOrUndefined(bubbleSettings.valuePath)) ? ((bubbleSettings.valuePath.indexOf('.') > -1) ?\n            Number(getValueFromObject(shapeData, bubbleSettings.valuePath)) : Number(shapeData[bubbleSettings.valuePath])) :\n            Number(shapeData[bubbleSettings.valuePath]);\n        var opacity;\n        var bubbleColor;\n        if (isNaN(bubbleValue) && isNaN(colorValue) && isNullOrUndefined(equalValue)) {\n            return null;\n        }\n        var radius = getRatioOfBubble(bubbleSettings.minRadius, bubbleSettings.maxRadius, bubbleValue, range.min, range.max);\n        var colorMapping = new ColorMapping(this.maps);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var shapeColor = colorMapping.getColorByValue(bubbleSettings.colorMapping, colorValue, equalValue);\n        // eslint-disable-next-line prefer-const\n        bubbleColor = (Object.prototype.toString.call(shapeColor) === '[object Object]' &&\n            !isNullOrUndefined(shapeColor['fill'])) ? shapeColor['fill'] : color;\n        // eslint-disable-next-line prefer-const\n        opacity = (Object.prototype.toString.call(shapeColor) === '[object Object]' &&\n            !isNullOrUndefined(shapeColor['opacity'])) ? shapeColor['opacity'] : bubbleSettings.opacity;\n        var shapePoints = [[]];\n        this.maps.translateType = 'bubble';\n        var midIndex = 0;\n        var pointsLength = 0;\n        var currentLength = 0;\n        for (var i = 0, len = layerData.length; i < len; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var shape = layerData[i];\n            shape = shape['property'];\n            var shapePath = checkPropertyPath(shapeData[layer.shapeDataPath], layer.shapePropertyPath, shape);\n            var shapeDataLayerPathValue = !isNullOrUndefined(shapeData[layer.shapeDataPath]) &&\n                isNaN(shapeData[layer.shapeDataPath]) ? shapeData[layer.shapeDataPath].toLowerCase() : shapeData[layer.shapeDataPath];\n            var shapePathValue = !isNullOrUndefined(shape[shapePath]) && isNaN(shape[shapePath])\n                ? shape[shapePath].toLowerCase() : shape[shapePath];\n            if (shapeDataLayerPathValue === shapePathValue && (layerData[i].type !== 'LineString' && layerData[i].type !== 'MultiLineString' && layerData[i]['type'] !== 'Point' && layerData[i]['type'] !== 'MultiPoint')) {\n                if (!layerData[i]['_isMultiPolygon']) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    shapePoints.push(this.getPoints(layerData[i], []));\n                    currentLength = shapePoints[shapePoints.length - 1].length;\n                    if (pointsLength < currentLength) {\n                        pointsLength = currentLength;\n                        midIndex = shapePoints.length - 1;\n                    }\n                }\n                else {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var layer_1 = layerData[i];\n                    for (var j = 0; j < layer_1.length; j++) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        shapePoints.push(this.getPoints(layer_1[j], []));\n                        currentLength = shapePoints[shapePoints.length - 1].length;\n                        if (pointsLength < currentLength) {\n                            pointsLength = currentLength;\n                            midIndex = shapePoints.length - 1;\n                        }\n                    }\n                }\n            }\n        }\n        var projectionType = this.maps.projectionType;\n        var centerY;\n        var eventArgs;\n        var bubbleBorder = {\n            color: bubbleSettings.border.color, opacity: bubbleSettings.border.opacity,\n            width: bubbleSettings.border.width\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var center = findMidPointOfPolygon(shapePoints[midIndex], projectionType, layer.geometryType);\n        if (bubbleSettings.visible) {\n            if (!isNullOrUndefined(center)) {\n                centerY = this.maps.projectionType === 'Mercator' ? center['y'] : (-center['y']);\n                eventArgs = {\n                    cancel: false, name: bubbleRendering, border: bubbleBorder,\n                    cx: center['x'], cy: centerY, data: shapeData, fill: bubbleColor,\n                    maps: this.maps, radius: radius\n                };\n            }\n            else {\n                var shapePointsLength = shapePoints.length - 1;\n                if (shapePoints[shapePointsLength]['x'] && shapePoints[shapePointsLength]['y']) {\n                    eventArgs = {\n                        cancel: false, name: bubbleRendering, border: bubbleBorder,\n                        cx: shapePoints[shapePointsLength]['x'], cy: shapePoints[shapePointsLength]['y'],\n                        data: shapeData, fill: bubbleColor, maps: this.maps,\n                        radius: radius\n                    };\n                }\n                else {\n                    return;\n                }\n            }\n            this.maps.trigger('bubbleRendering', eventArgs, function (bubbleArgs) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                var bubbleElement;\n                eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n                if (bubbleSettings.bubbleType === 'Circle') {\n                    var circle = new CircleOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, 0, 0, eventArgs.radius, null);\n                    bubbleElement = drawCircle(_this.maps, circle, group);\n                }\n                else {\n                    var y = _this.maps.projectionType === 'Mercator' ? (eventArgs.cy - radius) : (eventArgs.cy + radius);\n                    var rectangle = new RectOption(bubbleID, eventArgs.fill, eventArgs.border, opacity, new Rect(0, 0, radius * 2, radius * 2), 2, 2);\n                    eventArgs.cx -= radius;\n                    eventArgs.cy = y;\n                    bubbleElement = drawRectangle(_this.maps, rectangle, group);\n                }\n                maintainSelection(_this.maps.selectedBubbleElementId, _this.maps.bubbleSelectionClass, bubbleElement, 'BubbleselectionMapStyle');\n                _this.bubbleCollection.push({\n                    LayerIndex: layerIndex,\n                    BubbleIndex: bubbleIndex,\n                    DataIndex: dataIndex,\n                    element: bubbleElement,\n                    center: { x: eventArgs.cx, y: eventArgs.cy }\n                });\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var translate;\n                var animate = layer.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n                if (_this.maps.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(_this.maps.zoomModule) && !_this.maps.isTileMap) {\n                    translate = getZoomTranslate(_this.maps, layer, animate);\n                }\n                else {\n                    translate = getTranslate(_this.maps, layer, animate);\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var bubbleDataSource = bubbleSettings.dataSource;\n                var scale = translate['scale'];\n                var transPoint = translate['location'];\n                var position = new MapLocation((_this.maps.isTileMap ? (eventArgs.cx) : ((eventArgs.cx + transPoint.x) * scale)), (_this.maps.isTileMap ? (eventArgs.cy) : ((eventArgs.cy + transPoint.y) * scale)));\n                bubbleElement.setAttribute('transform', 'translate( ' + (position.x) + ' ' + (position.y) + ' )');\n                var bubble = (bubbleDataSource.length - 1) === dataIndex ? 'bubble' : null;\n                if (bubbleSettings.bubbleType === 'Square') {\n                    position.x += radius;\n                    position.y += radius * (_this.maps.projectionType === 'Mercator' ? 1 : -1);\n                }\n                else {\n                    radius = 0;\n                }\n                if (bubbleSettings.animationDuration > 0) {\n                    elementAnimate(bubbleElement, bubbleSettings.animationDelay, bubbleSettings.animationDuration, position, _this.maps, bubble, radius);\n                }\n            });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Bubble.prototype.getPoints = function (shape, points) {\n        if (isNullOrUndefined(shape.map)) {\n            points = shape['point'];\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shape.map(function (current, index) {\n                points.push(new Point(current['point']['x'], current['point']['y']));\n            });\n        }\n        return points;\n    };\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * To check and trigger bubble click event\n     *\n     * @private\n     */\n    Bubble.prototype.bubbleClick = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleClick, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(bubbleClick, eventArgs);\n    };\n    /**\n     * To get bubble from target id\n     *\n     * @param {string} target - Specifies the target\n     * @returns {object} - Returns the object\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Bubble.prototype.getbubble = function (target) {\n        var id = target.split('_LayerIndex_');\n        var index = parseInt(id[1].split('_')[0], 10);\n        var layer = this.maps.layers[index];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data;\n        if (target.indexOf('_BubbleIndex_') > -1) {\n            var bubbleIndex = parseInt(id[1].split('_BubbleIndex_')[1], 10);\n            var dataIndex = parseInt(id[1].split('_BubbleIndex_')[1].split('_dataIndex_')[1], 10);\n            if (!isNaN(bubbleIndex)) {\n                data = layer.bubbleSettings[bubbleIndex].dataSource[dataIndex];\n                return data;\n            }\n        }\n        return null;\n    };\n    // eslint-disable-next-line valid-jsdoc\n    /**\n     * To check and trigger bubble move event\n     *\n     * @private\n     */\n    Bubble.prototype.bubbleMove = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = this.getbubble(target);\n        if (isNullOrUndefined(data)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: bubbleMouseMove, data: data, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(bubbleMouseMove, eventArgs);\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} - Returns the module name.\n     */\n    Bubble.prototype.getModuleName = function () {\n        return 'Bubble';\n    };\n    /**\n     * To destroy the bubble.\n     *\n     * @returns {void}\n     * @private\n     */\n    Bubble.prototype.destroy = function () {\n        this.bubbleCollection = [];\n        //TODO: Calling the below code throws spec issue.\n        //this.maps = null;\n    };\n    return Bubble;\n}());\nexport { Bubble };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}