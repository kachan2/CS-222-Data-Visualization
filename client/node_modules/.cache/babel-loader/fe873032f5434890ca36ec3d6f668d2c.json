{"ast":null,"code":"import { Point, getElementByID, PathOption, Rect, convertGeoToPoint, CircleOption, convertTileLatLongToPoint } from '../utils/helper';\nimport { RectOption, createTooltip, calculateScale, getTouchCenter, getTouches, targetTouches } from '../utils/helper';\nimport { MapLocation, zoomAnimate, smoothTranslate, measureText, textTrim, clusterTemplate, marker } from '../utils/helper';\nimport { markerTemplate, removeElement, getElement, clusterSeparate, markerColorChoose } from '../utils/helper';\nimport { markerShapeChoose } from '../utils/helper';\nimport { isNullOrUndefined, EventHandler, Browser, remove, createElement } from '@syncfusion/ej2-base';\nimport { changeBorderWidth, markerRendering } from '../index';\nimport { pan } from '../model/constants';\nimport { getValueFromObject } from '../utils/helper';\n/**\n * Zoom module used to process the zoom for maps\n */\nvar Zoom = /** @class */function () {\n  function Zoom(maps) {\n    this.isPanning = false;\n    this.mouseEnter = false;\n    this.isTouch = false;\n    this.rectZoomingStart = false;\n    this.browserName = Browser.info.name;\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    this.isPointer = Browser.isPointer;\n    this.handled = false;\n    this.pinchFactor = 1;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.startTouches = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.intersect = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.mouseDownLatLong = {\n      x: 0,\n      y: 0\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.mouseMoveLatLong = {\n      x: 0,\n      y: 0\n    };\n    /**\n     * @private\n     */\n    this.isSingleClick = false;\n    this.maps = maps;\n    this.wheelEvent = this.browserName === 'mozilla' ? this.isPointer ? 'mousewheel' : 'DOMMouseScroll' : 'mousewheel';\n    this.cancelEvent = this.isPointer ? 'pointerleave' : 'mouseleave';\n    this.selectionColor = this.maps.zoomSettings.selectionColor;\n    this.fillColor = this.maps.zoomSettings.color;\n    this.addEventListener();\n  }\n  /**\n   * To perform zooming for maps\n   *\n   * @param {Point} position - Specifies the position.\n   * @param {number} newZoomFactor - Specifies the zoom factor.\n   * @param {string} type - Specifies the type.\n   * @returns {void}\n   */\n  Zoom.prototype.performZooming = function (position, newZoomFactor, type) {\n    var _this = this;\n    var map = this.maps;\n    map.previousProjection = map.projectionType;\n    map.defaultState = false;\n    map.initialCheck = false;\n    map.markerZoomedState = false;\n    map.zoomPersistence = map.enablePersistence;\n    var prevLevel = map.tileZoomLevel;\n    var scale = map.previousScale = map.scale;\n    var maxZoom = map.zoomSettings.maxZoom;\n    var minZoom = map.zoomSettings.minZoom;\n    newZoomFactor = minZoom > newZoomFactor && type === 'ZoomIn' ? minZoom + 1 : newZoomFactor;\n    var prevTilePoint = map.tileTranslatePoint;\n    if (!map.isTileMap && ((type === 'ZoomIn' ? newZoomFactor >= minZoom && newZoomFactor <= maxZoom : newZoomFactor >= minZoom) || map.isReset)) {\n      var availSize = map.mapAreaRect;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var minBounds = map.baseMapRectBounds['min'];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var maxBounds = map.baseMapRectBounds['max'];\n      var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n      var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n      var translatePointX = void 0;\n      var translatePointY = void 0;\n      if (newZoomFactor < 1.2 && map.projectionType !== 'Eckert5') {\n        if (mapTotalWidth === 0 || mapTotalHeight === 0 || mapTotalWidth === mapTotalHeight) {\n          mapTotalWidth = availSize.width / 2;\n          mapTotalHeight = availSize.height;\n        }\n        newZoomFactor = parseFloat(Math.min(availSize.width / mapTotalWidth, availSize.height / mapTotalHeight).toFixed(2));\n        newZoomFactor = newZoomFactor > 1.05 ? 1 : newZoomFactor;\n        map.translatePoint = this.calculateInitalZoomTranslatePoint(newZoomFactor, mapTotalWidth, mapTotalHeight, availSize, minBounds, map);\n      } else {\n        var point = map.translatePoint;\n        translatePointX = point.x - (availSize.width / scale - availSize.width / newZoomFactor) / (availSize.width / position.x);\n        translatePointY = point.y - (availSize.height / scale - availSize.height / newZoomFactor) / (availSize.height / position.y);\n        var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * newZoomFactor;\n        translatePointX = currentHeight < map.mapAreaRect.height ? availSize.x + (-minBounds['x'] + (availSize.width / 2 - mapTotalWidth / 2)) : translatePointX;\n        translatePointY = currentHeight < map.mapAreaRect.height ? availSize.y + (-minBounds['y'] + (availSize.height / 2 - mapTotalHeight / 2)) : translatePointY;\n        map.translatePoint = new Point(translatePointX, translatePointY);\n      }\n      map.scale = newZoomFactor;\n      if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n        map.translatePoint = map.previousPoint;\n        map.scale = map.mapScaleValue = map.previousScale;\n      } else {\n        this.applyTransform(map);\n      }\n    } else if (map.isTileMap && newZoomFactor >= minZoom && newZoomFactor <= maxZoom) {\n      this.getTileTranslatePosition(prevLevel, newZoomFactor, position, type);\n      map.tileZoomLevel = newZoomFactor;\n      map.zoomSettings.zoomFactor = newZoomFactor;\n      map.scale = Math.pow(2, newZoomFactor - 1);\n      if (type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && newZoomFactor <= map.initialZoomLevel) {\n        map.initialCheck = true;\n        map.zoomPersistence = false;\n        map.tileTranslatePoint.x = map.initialTileTranslate.x;\n        map.tileTranslatePoint.y = map.initialTileTranslate.y;\n        newZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n        map.scale = Math.pow(2, newZoomFactor - 1);\n      }\n      map.translatePoint.y = (map.tileTranslatePoint.y - 0.01 * map.mapScaleValue) / map.scale;\n      map.translatePoint.x = (map.tileTranslatePoint.x - 0.01 * map.mapScaleValue) / map.scale;\n      if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n        map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n        map.scale = map.previousScale;\n        map.tileZoomLevel = prevLevel;\n        map.zoomSettings.zoomFactor = map.previousScale;\n      } else {\n        if (document.querySelector('.GroupElement')) {\n          document.querySelector('.GroupElement').style.display = 'none';\n        }\n        if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n          document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n        }\n        this.markerLineAnimation(map);\n        map.mapLayerPanel.generateTiles(newZoomFactor, map.tileTranslatePoint, type + 'wheel', null, position);\n        var element1 = document.getElementById(this.maps.element.id + '_tiles');\n        var animationDuration = this.maps.layersCollection[0].animationDuration;\n        setTimeout(function () {\n          // if (type === 'ZoomOut') {\n          //     element1.removeChild(element1.children[element1.childElementCount - 1]);\n          //     if (element1.childElementCount) {\n          //         element1.removeChild(element1.children[element1.childElementCount - 1]);\n          //     } else {\n          //         element1 = element1;\n          //     }\n          // }\n          _this.applyTransform(_this.maps);\n          if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n            document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n          }\n        }, animationDuration);\n      }\n    }\n    this.maps.zoomNotApplied = false;\n  };\n  Zoom.prototype.calculateInitalZoomTranslatePoint = function (newZoomFactor, mapTotalWidth, mapTotalHeight, availSize, minBounds, map) {\n    mapTotalWidth *= newZoomFactor;\n    mapTotalHeight *= newZoomFactor;\n    var widthDiff = minBounds['x'] !== 0 && map.translateType === 'layers' ? map.availableSize.width - availSize.width : 0;\n    var translatePointX = availSize.x + (-minBounds['x'] + (availSize.width / 2 - mapTotalWidth / 2)) - widthDiff;\n    var translatePointY = availSize.y + (-minBounds['y'] + (availSize.height / 2 - mapTotalHeight / 2));\n    return new Point(translatePointX, translatePointY);\n  };\n  Zoom.prototype.triggerZoomEvent = function (prevTilePoint, prevLevel, type) {\n    var map = this.maps;\n    var zoomArgs;\n    if (!map.isTileMap) {\n      zoomArgs = {\n        cancel: false,\n        name: 'zoom',\n        type: type,\n        maps: map,\n        tileTranslatePoint: {},\n        translatePoint: {\n          previous: map.previousPoint,\n          current: map.translatePoint\n        },\n        tileZoomLevel: {},\n        scale: {\n          previous: map.previousScale,\n          current: map.scale\n        }\n      };\n    } else {\n      zoomArgs = {\n        cancel: false,\n        name: 'zoom',\n        type: type,\n        maps: map,\n        tileTranslatePoint: {\n          previous: prevTilePoint,\n          current: map.tileTranslatePoint\n        },\n        translatePoint: {\n          previous: map.previousPoint,\n          current: map.translatePoint\n        },\n        tileZoomLevel: {\n          previous: prevLevel,\n          current: map.tileZoomLevel\n        },\n        scale: {\n          previous: map.previousScale,\n          current: map.scale\n        }\n      };\n    }\n    map.trigger('zoom', zoomArgs);\n    return zoomArgs.cancel;\n  };\n  Zoom.prototype.getTileTranslatePosition = function (prevLevel, currentLevel, position, type) {\n    var map = this.maps;\n    var tileDefaultSize = 256;\n    var padding = type === 'ZoomOut' ? 10 : type === 'Reset' && currentLevel > 1 ? 0 : 10;\n    var bounds = map.availableSize;\n    var prevSize = Math.pow(2, prevLevel) * 256;\n    var totalSize = Math.pow(2, currentLevel) * 256;\n    var x = (position.x - map.tileTranslatePoint.x) / prevSize * 100;\n    var y = (position.y - map.tileTranslatePoint.y) / prevSize * 100;\n    map.tileTranslatePoint.x = currentLevel === 1 ? bounds.width / 2 - tileDefaultSize * 2 / 2 : position.x - x * totalSize / 100;\n    map.tileTranslatePoint.y = currentLevel === 1 ? bounds.height / 2 - tileDefaultSize * 2 / 2 + padding * 2 : position.y - y * totalSize / 100;\n  };\n  Zoom.prototype.performRectZooming = function () {\n    this.isDragZoom = true;\n    var map = this.maps;\n    var size = map.availableSize;\n    map.previousProjection = map.projectionType;\n    var prevLevel = map.tileZoomLevel;\n    var prevTilePoint = map.tileTranslatePoint;\n    var zoomRect = this.zoomingRect;\n    var maxZoom = map.zoomSettings.maxZoom;\n    var minZoom = map.zoomSettings.minZoom;\n    var isZoomCancelled;\n    if (zoomRect.height > 0 && zoomRect.width > 0) {\n      var x = this.zoomingRect.x + this.zoomingRect.width / 2;\n      var y = this.zoomingRect.y + this.zoomingRect.height / 2;\n      var zoomCalculationFactor = void 0;\n      if (!map.isTileMap) {\n        var scale = map.previousScale = map.scale;\n        zoomCalculationFactor = scale + Math.round((size.width / zoomRect.width + size.height / zoomRect.height) / 2);\n        var translatePoint = map.previousPoint = map.translatePoint;\n        var translatePointX = translatePoint.x - (size.width / scale - size.width / zoomCalculationFactor) / (size.width / x);\n        var translatePointY = translatePoint.y - (size.height / scale - size.height / zoomCalculationFactor) / (size.height / y);\n        map.translatePoint = new Point(translatePointX, translatePointY);\n        map.scale = zoomCalculationFactor;\n        isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n        if (isZoomCancelled) {\n          map.translatePoint = map.previousPoint;\n          map.scale = map.previousScale;\n        }\n      } else {\n        zoomCalculationFactor = prevLevel + Math.round(prevLevel + (size.width / zoomRect.width + size.height / zoomRect.height) / 2);\n        zoomCalculationFactor = zoomCalculationFactor >= minZoom && zoomCalculationFactor <= maxZoom ? zoomCalculationFactor : maxZoom;\n        map.zoomSettings.zoomFactor = zoomCalculationFactor;\n        this.getTileTranslatePosition(prevLevel, zoomCalculationFactor, {\n          x: x,\n          y: y\n        });\n        map.tileZoomLevel = zoomCalculationFactor;\n        map.translatePoint.x = (map.tileTranslatePoint.x - 0.5 * Math.pow(2, zoomCalculationFactor)) / Math.pow(2, zoomCalculationFactor);\n        map.translatePoint.y = (map.tileTranslatePoint.y - 0.5 * Math.pow(2, zoomCalculationFactor)) / Math.pow(2, zoomCalculationFactor);\n        map.scale = Math.pow(2, zoomCalculationFactor);\n        isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n        if (isZoomCancelled) {\n          map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n          map.scale = map.tileZoomLevel = map.zoomSettings.zoomFactor = prevLevel;\n        } else {\n          map.mapLayerPanel.generateTiles(zoomCalculationFactor, map.tileTranslatePoint);\n        }\n      }\n      if (!isZoomCancelled) {\n        map.mapScaleValue = zoomCalculationFactor;\n        this.applyTransform(map, true);\n        this.maps.zoomNotApplied = false;\n        this.zoomingRect = null;\n      }\n    }\n  };\n  Zoom.prototype.setInteraction = function (newInteraction) {\n    this.lastScale = 1;\n    this.interaction = newInteraction;\n  };\n  Zoom.prototype.updateInteraction = function () {\n    if (this.fingers === 2) {\n      this.setInteraction('zoom');\n    } else {\n      this.setInteraction(null);\n    }\n  };\n  Zoom.prototype.performPinchZooming = function (e) {\n    var map = this.maps;\n    var prevLevel = map.tileZoomLevel;\n    var availSize = map.mapAreaRect;\n    map.previousScale = map.scale;\n    map.previousPoint = map.translatePoint;\n    var prevTilePoint = map.tileTranslatePoint;\n    var scale = calculateScale(this.touchStartList, this.touchMoveList);\n    var touchCenter = getTouchCenter(getTouches(this.touchMoveList, this.maps));\n    var newScale = scale / this.lastScale;\n    this.lastScale = scale;\n    this.pinchFactor *= newScale;\n    this.pinchFactor = Math.min(this.maps.zoomSettings.maxZoom, Math.max(this.pinchFactor, this.maps.zoomSettings.minZoom));\n    var zoomCalculationFactor = this.pinchFactor;\n    var zoomArgs;\n    var isZoomCancelled;\n    if (!map.isTileMap) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var minBounds = map.baseMapRectBounds['min'];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var maxBounds = map.baseMapRectBounds['max'];\n      var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n      var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n      var translatePoint = map.translatePoint;\n      var translatePointX = void 0;\n      var translatePointY = void 0;\n      if (zoomCalculationFactor < 1.2 && map.projectionType !== 'Eckert5') {\n        if (mapTotalWidth === 0 || mapTotalHeight === 0 || mapTotalWidth === mapTotalHeight) {\n          mapTotalWidth = availSize.width / 2;\n          mapTotalHeight = availSize.height;\n        }\n        zoomCalculationFactor = parseFloat(Math.min(availSize.width / mapTotalWidth, availSize.height / mapTotalHeight).toFixed(2));\n        zoomCalculationFactor = zoomCalculationFactor > 1.05 ? 1 : zoomCalculationFactor;\n        map.translatePoint = this.calculateInitalZoomTranslatePoint(zoomCalculationFactor, mapTotalWidth, mapTotalHeight, availSize, minBounds, map);\n      } else {\n        var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomCalculationFactor;\n        translatePointX = translatePoint.x - (availSize.width / map.scale - availSize.width / zoomCalculationFactor) / (availSize.width / touchCenter.x);\n        translatePointY = translatePoint.y - (availSize.height / map.scale - availSize.height / zoomCalculationFactor) / (availSize.height / touchCenter.y);\n        translatePointX = currentHeight < map.mapAreaRect.height ? availSize.x + (-minBounds['x'] + (availSize.width / 2 - mapTotalWidth / 2)) : translatePointX;\n        translatePointY = currentHeight < map.mapAreaRect.height ? availSize.y + (-minBounds['y'] + (availSize.height / 2 - mapTotalHeight / 2)) : translatePointY;\n        map.translatePoint = new Point(translatePointX, translatePointY);\n      }\n      map.scale = zoomCalculationFactor;\n      isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n      if (isZoomCancelled) {\n        map.translatePoint = map.previousPoint;\n        map.scale = map.previousScale;\n      }\n    } else {\n      var newTileFactor = zoomCalculationFactor;\n      this.getTileTranslatePosition(prevLevel, newTileFactor, {\n        x: touchCenter.x,\n        y: touchCenter.y\n      });\n      map.tileZoomLevel = newTileFactor;\n      map.translatePoint.x = (map.tileTranslatePoint.x - 0.5 * Math.pow(2, newTileFactor)) / Math.pow(2, newTileFactor);\n      map.translatePoint.y = (map.tileTranslatePoint.y - 0.5 * Math.pow(2, newTileFactor)) / Math.pow(2, newTileFactor);\n      map.scale = Math.pow(2, newTileFactor);\n      isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n      if (isZoomCancelled) {\n        map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n        map.scale = map.previousScale;\n        map.tileZoomLevel = prevLevel;\n        map.zoomSettings.zoomFactor = map.previousScale;\n      } else {\n        map.mapLayerPanel.generateTiles(newTileFactor, map.tileTranslatePoint);\n      }\n    }\n    if (!isZoomCancelled) {\n      this.applyTransform(map);\n    }\n  };\n  Zoom.prototype.drawZoomRectangle = function () {\n    var map = this.maps;\n    var down = this.mouseDownPoints;\n    var move = this.mouseMovePoints;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var border = {\n      width: 1,\n      color: '#009900'\n    };\n    var width = Math.abs(move.x - down.x);\n    var height = Math.abs(move.y - down.y);\n    var x = move.x > down.x ? down.x : down.x - width;\n    var y = move.y > down.y ? down.y : down.y - height;\n    var elementRect = getElementByID(map.element.id).getBoundingClientRect();\n    if (x > map.mapAreaRect.x && x < map.mapAreaRect.x + map.mapAreaRect.width && y > map.mapAreaRect.y && y < map.mapAreaRect.y + map.mapAreaRect.height) {\n      this.zoomingRect = new Rect(x, y, width, height);\n      var rectSVGObject = map.renderer.createSvg({\n        id: map.element.id + '_Selection_Rect_Zooming',\n        width: map.availableSize.width,\n        height: map.availableSize.height\n      });\n      var rectOption = new RectOption(map.element.id + '_ZoomRect', '#d3d3d3', border, 0.5, this.zoomingRect, 0, 0, '', '3');\n      rectSVGObject.appendChild(map.renderer.drawRectangle(rectOption));\n      getElementByID(map.element.id + '_Secondary_Element').appendChild(rectSVGObject);\n    }\n  };\n  /**\n   * To animate the zooming process\n   *\n   * @param {Element} element - Specifies the element\n   * @param {boolean} animate - Specifies the boolean value\n   * @param {number} x - Specifies the x value\n   * @param {number} y - Specifies the y value\n   * @param {number} scale - Specifies the scale value\n   * @returns {void}\n   */\n  Zoom.prototype.animateTransform = function (element, animate, x, y, scale) {\n    var duration = this.currentLayer.animationDuration;\n    if (!animate || duration === 0 || this.maps.isTileMap) {\n      element.setAttribute('transform', 'scale(' + scale + ') translate( ' + x + ' ' + y + ' )');\n      return;\n    }\n    if (!this.maps.isTileMap) {\n      zoomAnimate(element, 0, duration, new MapLocation(x, y), scale, this.maps.mapAreaRect, this.maps);\n    }\n  };\n  Zoom.prototype.applyTransform = function (maps, animate) {\n    var layerIndex;\n    this.templateCount = 0;\n    var layer;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var zoomshapelocation;\n    var i;\n    var markerStyle;\n    var scale = maps.scale;\n    var x = maps.translatePoint.x;\n    var y = maps.translatePoint.y;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var collection = [];\n    maps.zoomShapeCollection = [];\n    if (document.getElementById(maps.element.id + '_mapsTooltip')) {\n      removeElement(maps.element.id + '_mapsTooltip');\n    }\n    if (this.layerCollectionEle) {\n      for (var i_1 = 0; i_1 < this.layerCollectionEle.childElementCount; i_1++) {\n        var layerElement = this.layerCollectionEle.childNodes[i_1];\n        if (layerElement.tagName === 'g') {\n          this.templateCount++;\n          this.index = layerElement.id.indexOf('_LayerIndex_') > -1 && parseFloat(layerElement.id.split('_LayerIndex_')[1].split('_')[0]);\n          this.currentLayer = maps.layersCollection[this.index];\n          var factor = maps.mapLayerPanel.calculateFactor(this.currentLayer);\n          for (var j = 0; j < layerElement.childElementCount; j++) {\n            var currentEle = layerElement.childNodes[j];\n            if (!(currentEle.id.indexOf('_Markers_Group') > -1) && !(currentEle.id.indexOf('_bubble_Group') > -1) && !(currentEle.id.indexOf('_dataLableIndex_Group') > -1)) {\n              if (maps.isTileMap && currentEle.id.indexOf('_line_Group') > -1) {\n                currentEle.remove();\n                if (layerElement.children.length > 0 && layerElement.children[0]) {\n                  layerElement.insertBefore(maps.navigationLineModule.renderNavigation(this.currentLayer, maps.tileZoomLevel, this.index), layerElement.children[1]);\n                } else {\n                  layerElement.appendChild(maps.navigationLineModule.renderNavigation(this.currentLayer, maps.tileZoomLevel, this.index));\n                }\n              } else if (currentEle.id.indexOf('Legend') == -1) {\n                changeBorderWidth(currentEle, this.index, scale, maps);\n                maps.zoomTranslatePoint = maps.translatePoint;\n                this.animateTransform(currentEle, animate, x, y, scale);\n              }\n            } else if (currentEle.id.indexOf('_Markers_Group') > -1) {\n              if (!this.isPanning && !isNullOrUndefined(currentEle.childNodes[0])) {\n                this.markerTranslates(currentEle.childNodes[0], factor, x, y, scale, 'Marker', layerElement, animate);\n              }\n              currentEle = layerElement.childNodes[j];\n              var markerAnimation = void 0;\n              if (!isNullOrUndefined(currentEle) && currentEle.id.indexOf('Markers') !== -1) {\n                for (var k = 0; k < currentEle.childElementCount; k++) {\n                  this.markerTranslate(currentEle.childNodes[k], factor, x, y, scale, 'Marker', animate);\n                  var layerIndex_1 = parseInt(currentEle.childNodes[k]['id'].split('_LayerIndex_')[1].split('_')[0], 10);\n                  var dataIndex = parseInt(currentEle.childNodes[k]['id'].split('_dataIndex_')[1].split('_')[0], 10);\n                  var markerIndex = parseInt(currentEle.childNodes[k]['id'].split('_MarkerIndex_')[1].split('_')[0], 10);\n                  markerAnimation = this.currentLayer.markerSettings[markerIndex].animationDuration > 0;\n                  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                  var markerSelectionValues = this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex];\n                  for (var x_1 = 0; x_1 < this.currentLayer.markerSettings[markerIndex].initialMarkerSelection.length; x_1++) {\n                    if (this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['latitude'] === markerSelectionValues['latitude'] || this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['longitude'] === markerSelectionValues['longitude']) {\n                      maps.markerSelection(this.currentLayer.markerSettings[markerIndex].selectionSettings, maps, currentEle.children[k], this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex]);\n                    }\n                  }\n                  if ((this.currentLayer.animationDuration > 0 || maps.layersCollection[0].animationDuration > 0 && this.currentLayer.type === 'SubLayer') && !this.isPanning) {\n                    if (maps.isTileMap) {\n                      var groupElement = document.querySelector('.GroupElement');\n                      if (groupElement && !document.querySelector('.ClusterGroupElement') && markerAnimation) {\n                        groupElement.style.display = 'none';\n                      }\n                    } else {\n                      markerStyle = 'visibility:hidden';\n                      currentEle.setAttribute('style', markerStyle);\n                    }\n                  }\n                }\n                if (this.isPanning && maps.markerModule.sameMarkerData.length > 0) {\n                  clusterSeparate(maps.markerModule.sameMarkerData, maps, currentEle, true);\n                } else if (maps.markerModule.sameMarkerData.length > 0) {\n                  maps.markerModule.sameMarkerData = [];\n                  if (document.getElementById(maps.element.id + '_mapsTooltip')) {\n                    removeElement(maps.element.id + '_mapsTooltip');\n                  }\n                }\n                if (document.getElementById(maps.element.id + '_mapsTooltip') && maps.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') && !this.isPanning) {\n                  var mapsTooltip = maps.mapsTooltipModule;\n                  var tooltipElement = currentEle.querySelector('#' + mapsTooltip.tooltipTargetID);\n                  if (!isNullOrUndefined(tooltipElement)) {\n                    if (tooltipElement['style']['visibility'] === 'hidden') {\n                      removeElement(maps.element.id + '_mapsTooltip');\n                    } else {\n                      var x_2 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[1]);\n                      var y_1 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[2]);\n                      if (maps.isTileMap) {\n                        x_2 += +getElement(maps.element.id + '_tile_parent')['style']['left'].split('px')[0];\n                        y_1 += +getElement(maps.element.id + '_tile_parent')['style']['top'].split('px')[0];\n                      }\n                      mapsTooltip.svgTooltip.location.x = x_2;\n                      mapsTooltip.svgTooltip.location.y = y_1;\n                      mapsTooltip.svgTooltip.enableAnimation = false;\n                    }\n                  }\n                }\n              }\n            } else if (currentEle.id.indexOf('_bubble_Group') > -1) {\n              var childElement = void 0;\n              for (var k = 0; k < currentEle.childElementCount; k++) {\n                childElement = currentEle.childNodes[k];\n                var bubbleTransform = childElement.getAttribute('transform');\n                layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                var bubleIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[0]);\n                var dataIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[2]);\n                for (var l = 0; l < maps.bubbleModule.bubbleCollection.length; l++) {\n                  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                  var bubbleCollection = maps.bubbleModule.bubbleCollection[l];\n                  if (bubbleCollection['LayerIndex'] === layerIndex && bubbleCollection['BubbleIndex'] === bubleIndex && bubbleCollection['DataIndex'] === dataIndex) {\n                    var centerX = bubbleCollection['center']['x'];\n                    var centerY = bubbleCollection['center']['y'];\n                    var currentX = (centerX + x) * scale;\n                    var currentY = (centerY + y) * scale;\n                    var duration = this.currentLayer.animationDuration;\n                    if (!animate || duration === 0) {\n                      childElement.setAttribute('transform', 'translate( ' + currentX + ' ' + currentY + ' )');\n                    } else {\n                      smoothTranslate(childElement, 0, duration, new MapLocation(currentX, currentY));\n                    }\n                    break;\n                  }\n                }\n              }\n            } else if (currentEle.id.indexOf('_dataLableIndex_Group') > -1 && !isNullOrUndefined(maps.layers[this.index])) {\n              this.intersect = [];\n              maps.zoomLabelPositions = [];\n              maps.zoomLabelPositions = maps.dataLabelModule.dataLabelCollections;\n              var labelAnimate = !maps.isTileMap && animate;\n              for (var k = 0; k < currentEle.childElementCount; k++) {\n                if (currentEle.childNodes[k]['id'].indexOf('_LabelIndex_') > -1) {\n                  var labelIndex = parseFloat(currentEle.childNodes[k]['id'].split('_LabelIndex_')[1].split('_')[0]);\n                  this.zoomshapewidth = currentEle.childNodes[k].getBoundingClientRect();\n                  maps.zoomShapeCollection.push(this.zoomshapewidth);\n                  this.dataLabelTranslate(currentEle.childNodes[k], factor, x, y, scale, 'DataLabel', labelAnimate);\n                  var dataLabel = maps.layers[this.index].dataLabelSettings;\n                  var border = dataLabel.border;\n                  if (k > 0 && border['width'] > 1) {\n                    if (currentEle.childNodes[k - 1]['id'].indexOf('_rectIndex_') > -1 && !isNullOrUndefined(maps.zoomLabelPositions[labelIndex])) {\n                      var labelX = (maps.zoomLabelPositions[labelIndex]['location']['x'] + x) * scale;\n                      var labelY = (maps.zoomLabelPositions[labelIndex]['location']['y'] + y) * scale;\n                      var zoomtext = currentEle.childNodes[k]['innerHTML'];\n                      var style = maps.layers[this.index].dataLabelSettings.textStyle;\n                      var zoomtextSize = measureText(zoomtext, style);\n                      var padding = 5;\n                      var rectElement = currentEle.childNodes[k - 1];\n                      var rectX = labelX - zoomtextSize['width'] / 2;\n                      var rectY = labelY - zoomtextSize['height'] / 2 - padding;\n                      rectElement['setAttribute']('x', rectX);\n                      rectElement['setAttribute']('y', rectY);\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n        maps.arrangeTemplate();\n      }\n      if (!isNullOrUndefined(this.currentLayer)) {\n        if (!animate || this.currentLayer.animationDuration === 0 || maps.isTileMap) {\n          this.processTemplate(x, y, scale, maps);\n        }\n      }\n    }\n  };\n  Zoom.prototype.markerTranslates = function (element, factor, x, y, scale, type, layerElement, animate) {\n    var _this = this;\n    if (animate === void 0) {\n      animate = false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var templateFn;\n    var nullCount = 0;\n    var markerCounts = 0;\n    var markerTemplateCounts = 0;\n    var layerIndex = parseInt((element ? element : layerElement).id.split('_LayerIndex_')[1].split('_')[0], 10);\n    var markerSVGObject = this.maps.renderer.createGroup({\n      id: this.maps.element.id + '_Markers_Group',\n      class: 'GroupElement',\n      style: 'pointer-events: auto;'\n    });\n    if (document.getElementById(markerSVGObject.id)) {\n      removeElement(markerSVGObject.id);\n    }\n    var mapsAreaRect = this.maps.mapAreaRect;\n    var markerTemplateElements = createElement('div', {\n      id: this.maps.element.id + '_LayerIndex_' + layerIndex + '_Markers_Template_Group',\n      className: 'template',\n      styles: 'overflow: hidden; position: absolute;pointer-events: none;' + 'top:' + mapsAreaRect.y + 'px;' + 'left:' + mapsAreaRect.x + 'px;' + 'height:' + mapsAreaRect.height + 'px;' + 'width:' + mapsAreaRect.width + 'px;'\n    });\n    if (document.getElementById(markerTemplateElements.id)) {\n      removeElement(markerTemplateElements.id);\n    }\n    var currentLayers = this.maps.layersCollection[layerIndex];\n    currentLayers.markerSettings.map(function (markerSettings, markerIndex) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var markerDatas = markerSettings.dataSource;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      Array.prototype.forEach.call(markerDatas, function (data, dataIndex) {\n        _this.maps.markerNullCount = markerIndex >= 0 && dataIndex === 0 ? 0 : _this.maps.markerNullCount;\n        var eventArgs = {\n          template: markerSettings.template,\n          data: data,\n          maps: _this.maps,\n          marker: markerSettings,\n          cancel: false,\n          name: markerRendering,\n          fill: markerSettings.fill,\n          colorValuePath: markerSettings.colorValuePath,\n          shapeValuePath: markerSettings.shapeValuePath,\n          height: markerSettings.height,\n          width: markerSettings.width,\n          imageUrl: markerSettings.imageUrl,\n          imageUrlValuePath: markerSettings.imageUrlValuePath,\n          shape: markerSettings.shape,\n          border: markerSettings.border\n        };\n        eventArgs = markerShapeChoose(eventArgs, data);\n        eventArgs = markerColorChoose(eventArgs, data);\n        _this.maps.trigger('markerRendering', eventArgs, function (MarkerArgs) {\n          if (markerSettings.shapeValuePath !== eventArgs.shapeValuePath) {\n            eventArgs = markerShapeChoose(eventArgs, data);\n          }\n          if (markerSettings.colorValuePath !== eventArgs.colorValuePath) {\n            eventArgs = markerColorChoose(eventArgs, data);\n          }\n          var lati = !isNullOrUndefined(markerSettings.latitudeValuePath) ? Number(getValueFromObject(data, markerSettings.latitudeValuePath)) : !isNullOrUndefined(data['latitude']) ? parseFloat(data['latitude']) : !isNullOrUndefined(data['Latitude']) ? data['Latitude'] : null;\n          var long = !isNullOrUndefined(markerSettings.longitudeValuePath) ? Number(getValueFromObject(data, markerSettings.longitudeValuePath)) : !isNullOrUndefined(data['longitude']) ? parseFloat(data['longitude']) : !isNullOrUndefined(data['Longitude']) ? data['Longitude'] : null;\n          var offset = markerSettings.offset;\n          if (!eventArgs.cancel && markerSettings.visible && !isNullOrUndefined(long) && !isNullOrUndefined(lati)) {\n            var markerID = _this.maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex;\n            var location_1 = _this.maps.isTileMap ? convertTileLatLongToPoint(new MapLocation(long, lati), _this.maps.tileZoomLevel, _this.maps.tileTranslatePoint, true) : convertGeoToPoint(lati, long, factor, currentLayers, _this.maps);\n            var animate_1 = currentLayers.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n            var transPoint = {\n              x: x,\n              y: y\n            };\n            if (eventArgs.template && !isNaN(location_1.x) && !isNaN(location_1.y)) {\n              markerTemplateCounts++;\n              markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplateElements, location_1, transPoint, scale, offset, _this.maps);\n            } else if (!eventArgs.template && !isNaN(location_1.x) && !isNaN(location_1.y)) {\n              markerCounts++;\n              marker(eventArgs, markerSettings, markerDatas, dataIndex, location_1, transPoint, markerID, offset, scale, _this.maps, markerSVGObject);\n            }\n          }\n          nullCount += !isNaN(lati) && !isNaN(long) ? 0 : 1;\n          markerTemplateCounts += eventArgs.cancel ? 1 : 0;\n          markerCounts += eventArgs.cancel ? 1 : 0;\n          _this.maps.markerNullCount = isNullOrUndefined(lati) || isNullOrUndefined(long) ? _this.maps.markerNullCount + 1 : _this.maps.markerNullCount;\n          var markerDataLength = markerDatas.length - _this.maps.markerNullCount;\n          if (markerSVGObject.childElementCount === markerDataLength - markerTemplateCounts - nullCount && type !== 'Template') {\n            layerElement.appendChild(markerSVGObject);\n            if (currentLayers.markerClusterSettings.allowClustering) {\n              _this.maps.svgObject.appendChild(markerSVGObject);\n              _this.maps.element.appendChild(_this.maps.svgObject);\n              clusterTemplate(currentLayers, markerSVGObject, _this.maps, layerIndex, markerSVGObject, layerElement, true, true);\n            }\n          }\n          if (markerTemplateElements.childElementCount === markerDataLength - markerCounts - nullCount && getElementByID(_this.maps.element.id + '_Secondary_Element')) {\n            getElementByID(_this.maps.element.id + '_Secondary_Element').appendChild(markerTemplateElements);\n            if (scale >= 1) {\n              if (currentLayers.markerClusterSettings.allowClustering) {\n                clusterTemplate(currentLayers, markerTemplateElements, _this.maps, layerIndex, markerSVGObject, layerElement, false, true);\n              }\n            }\n          }\n        });\n      });\n    });\n  };\n  /**\n   * To translate the layer template elements\n   *\n   * @param {number} x - Specifies the x value\n   * @param {number} y - Specifies the y value\n   * @param {number} scale - Specifies the scale value\n   * @param {Maps} maps - Specifies the maps value\n   * @returns {void}\n   * @private\n   */\n  Zoom.prototype.processTemplate = function (x, y, scale, maps) {\n    for (var i = 0; i < this.templateCount; i++) {\n      var factor = maps.mapLayerPanel.calculateFactor(this.currentLayer);\n      var markerTemplateElement = getElementByID(maps.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n      var datalabelTemplateElemement = getElementByID(maps.element.id + '_LayerIndex_' + i + '_Label_Template_Group');\n      if (!isNullOrUndefined(markerTemplateElement) && markerTemplateElement.childElementCount > 0) {\n        for (var k = 0; k < markerTemplateElement.childElementCount; k++) {\n          this.markerTranslate(markerTemplateElement.childNodes[k], factor, x, y, scale, 'Template');\n        }\n      }\n      if (!isNullOrUndefined(datalabelTemplateElemement) && datalabelTemplateElemement.childElementCount > 0) {\n        for (var k = 0; k < datalabelTemplateElemement.childElementCount; k++) {\n          this.dataLabelTranslate(datalabelTemplateElemement.childNodes[k], factor, x, y, scale, 'Template');\n        }\n      }\n    }\n  };\n  Zoom.prototype.dataLabelTranslate = function (element, factor, x, y, scale, type, animate) {\n    if (animate === void 0) {\n      animate = false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var labelCollection = this.maps.dataLabelModule.dataLabelCollections;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var zoomelement = element.getBoundingClientRect();\n    var text;\n    var trimmedLable;\n    var style = this.maps.layers[this.index].dataLabelSettings.textStyle;\n    var zoomtext;\n    var zoomtextSize;\n    var zoomtrimLabel;\n    var labelPath = this.maps.layers[this.index].dataLabelSettings.labelPath;\n    var layerIndex = parseFloat(element.id.split('_LayerIndex_')[1].split('_')[0]);\n    var shapeIndex = parseFloat(element.id.split('_shapeIndex_')[1].split('_')[0]);\n    var labelIndex;\n    if (element.id.indexOf('_LabelIndex_') > -1) {\n      labelIndex = parseFloat(element.id.split('_LabelIndex_')[1].split('_')[0]);\n    }\n    var duration = this.currentLayer.animationDuration;\n    for (var l = 0; l < labelCollection.length; l++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var label = labelCollection[l];\n      if (label['layerIndex'] === layerIndex && label['shapeIndex'] === shapeIndex && label['labelIndex'] === labelIndex) {\n        var labelX = label['location']['x'];\n        var labelY = label['location']['y'];\n        if (type === 'Template') {\n          var layerEle = getElementByID(this.maps.element.id + '_Layer_Collections');\n          labelX = Math.abs(this.maps.baseMapRectBounds['min']['x'] - labelX) * scale;\n          labelY = Math.abs(this.maps.baseMapRectBounds['min']['y'] - labelY) * scale;\n          var templateOffset = element.getBoundingClientRect();\n          var layerOffset = layerEle.getBoundingClientRect();\n          var elementOffset = element.parentElement.getBoundingClientRect();\n          var x_3 = labelX + (layerOffset.left - elementOffset.left) - templateOffset.width / 2;\n          var y_2 = labelY + (layerOffset.top - elementOffset.top) - templateOffset.height / 2;\n          element.style.left = x_3 + 'px';\n          element.style.top = y_2 + 'px';\n        } else {\n          labelX = (labelX + x) * scale;\n          labelY = (labelY + y) * scale;\n          zoomtext = label['dataLabelText'];\n          zoomtextSize = measureText(zoomtext, style);\n          var start = labelY - zoomtextSize['height'] / 4;\n          var end = labelY + zoomtextSize['height'] / 4;\n          var xpositionEnds = labelX + zoomtextSize['width'] / 2;\n          var xpositionStart = labelX - zoomtextSize['width'] / 2;\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          var textLocations = {\n            rightWidth: xpositionEnds,\n            leftWidth: xpositionStart,\n            heightTop: start,\n            heightBottom: end\n          };\n          if (!animate || duration === 0) {\n            element.setAttribute('transform', 'translate( ' + labelX + ' ' + labelY + ' )');\n          }\n          if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Hide') {\n            if (scale > 1) {\n              text = this.maps.dataLabelShape[l] * scale >= zoomtextSize['width'] ? zoomtext : '';\n              element.innerHTML = text;\n            } else {\n              text = this.maps.dataLabelShape[l] >= zoomtextSize['width'] ? zoomtext : '';\n              element.innerHTML = text;\n            }\n          }\n          if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Trim') {\n            if (scale > 1) {\n              zoomtrimLabel = textTrim(this.maps.dataLabelShape[l] * scale, zoomtext, style);\n              text = zoomtrimLabel;\n              element.innerHTML = text;\n            } else {\n              zoomtrimLabel = textTrim(this.maps.dataLabelShape[l], zoomtext, style);\n              text = zoomtrimLabel;\n              element.innerHTML = text;\n            }\n          }\n          if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Hide') {\n            for (var m = 0; m < this.intersect.length; m++) {\n              if (!isNullOrUndefined(this.intersect[m])) {\n                if (textLocations['leftWidth'] > this.intersect[m]['rightWidth'] || textLocations['rightWidth'] < this.intersect[m]['leftWidth'] || textLocations['heightTop'] > this.intersect[m]['heightBottom'] || textLocations['heightBottom'] < this.intersect[m]['heightTop']) {\n                  text = !isNullOrUndefined(text) ? text : zoomtext;\n                  element.innerHTML = text;\n                } else {\n                  text = '';\n                  element.innerHTML = text;\n                  break;\n                }\n              }\n            }\n            this.intersect.push(textLocations);\n          }\n          if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Trim') {\n            for (var j = 0; j < this.intersect.length; j++) {\n              if (!isNullOrUndefined(this.intersect[j])) {\n                if (textLocations['rightWidth'] < this.intersect[j]['leftWidth'] || textLocations['leftWidth'] > this.intersect[j]['rightWidth'] || textLocations['heightBottom'] < this.intersect[j]['heightTop'] || textLocations['heightTop'] > this.intersect[j]['heightBottom']) {\n                  trimmedLable = !isNullOrUndefined(text) ? text : zoomtext;\n                  if (scale > 1) {\n                    trimmedLable = textTrim(this.maps.dataLabelShape[l] * scale, trimmedLable, style);\n                  }\n                  element.innerHTML = trimmedLable;\n                } else {\n                  if (textLocations['leftWidth'] > this.intersect[j]['leftWidth']) {\n                    var width = this.intersect[j]['rightWidth'] - textLocations['leftWidth'];\n                    var difference = width - (textLocations['rightWidth'] - textLocations['leftWidth']);\n                    text = !isNullOrUndefined(text) ? text : zoomtext;\n                    trimmedLable = textTrim(difference, text, style);\n                    element.innerHTML = trimmedLable;\n                    break;\n                  }\n                  if (textLocations['leftWidth'] < this.intersect[j]['leftWidth']) {\n                    var width = textLocations['rightWidth'] - this.intersect[j]['leftWidth'];\n                    var difference = Math.abs(width - (textLocations['rightWidth'] - textLocations['leftWidth']));\n                    text = !isNullOrUndefined(text) ? text : zoomtext;\n                    trimmedLable = textTrim(difference, text, style);\n                    element.innerHTML = trimmedLable;\n                    break;\n                  }\n                }\n              }\n            }\n            this.intersect.push(textLocations);\n            if (isNullOrUndefined(trimmedLable)) {\n              trimmedLable = textTrim(this.maps.dataLabelShape[l] * scale, zoomtext, style);\n              element.innerHTML = trimmedLable;\n            }\n          }\n          if (animate || duration > 0) {\n            smoothTranslate(element, 0, duration, new MapLocation(labelX, labelY));\n          }\n        }\n      }\n    }\n  };\n  Zoom.prototype.markerTranslate = function (element, factor, x, y, scale, type, animate) {\n    if (animate === void 0) {\n      animate = false;\n    }\n    var layerIndex = parseInt(element.id.split('_LayerIndex_')[1].split('_')[0], 10);\n    var markerIndex = parseInt(element.id.split('_MarkerIndex_')[1].split('_')[0], 10);\n    var dataIndex = parseInt(element.id.split('_dataIndex_')[1].split('_')[0], 10);\n    var layer = this.maps.layersCollection[layerIndex];\n    var marker = layer.markerSettings[markerIndex];\n    if (!isNullOrUndefined(marker) && !isNullOrUndefined(marker.dataSource) && !isNullOrUndefined(marker.dataSource[dataIndex])) {\n      var lng = !isNullOrUndefined(marker.longitudeValuePath) ? Number(getValueFromObject(marker.dataSource[dataIndex], marker.longitudeValuePath)) : !isNullOrUndefined(marker.dataSource[dataIndex]['longitude']) ? parseFloat(marker.dataSource[dataIndex]['longitude']) : !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n      var lat = !isNullOrUndefined(marker.latitudeValuePath) ? Number(getValueFromObject(marker.dataSource[dataIndex], marker.latitudeValuePath)) : !isNullOrUndefined(marker.dataSource[dataIndex]['latitude']) ? parseFloat(marker.dataSource[dataIndex]['latitude']) : !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n      var duration = this.currentLayer.animationDuration;\n      var location_2 = this.maps.isTileMap ? convertTileLatLongToPoint(new Point(lng, lat), this.maps.tileZoomLevel, this.maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, layer, this.maps);\n      if (this.maps.isTileMap) {\n        if (type === 'Template') {\n          var templateOffset = element.getBoundingClientRect();\n          element.style.left = location_2.x - templateOffset.width / 2 + marker.offset.x + 'px';\n          element.style.top = location_2.y - templateOffset.height / 2 + marker.offset.y + 'px';\n          if (this.maps.layers[this.maps.baseLayerIndex].layerType === 'GoogleStaticMap') {\n            var staticMapOffset = getElementByID(this.maps.element.id + '_StaticGoogleMap').getBoundingClientRect();\n            var staticMapOffsetWidth = 640;\n            if (element['style']['display'] !== 'none') {\n              if ((staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width']) && (staticMapOffset['y'] > templateOffset['y'] || staticMapOffset['y'] + staticMapOffset['height'] < templateOffset['y'] + templateOffset['height'])) {\n                element['style']['display'] = 'none';\n              } else if (staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width']) {\n                element['style']['display'] = 'none';\n              }\n            }\n          }\n        } else {\n          location_2.x += marker.offset.x;\n          location_2.y += marker.offset.y;\n          element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n        }\n      } else {\n        if (type === 'Template') {\n          if (duration > 0) {\n            location_2.x = Math.abs(this.maps.baseMapRectBounds['min']['x'] - location_2.x) * scale;\n            location_2.y = Math.abs(this.maps.baseMapRectBounds['min']['y'] - location_2.y) * scale;\n            var layerOffset = getElementByID(this.maps.element.id + '_Layer_Collections').getBoundingClientRect();\n            var elementOffset = element.parentElement.getBoundingClientRect();\n            element.style.left = location_2.x + (layerOffset.left - elementOffset.left) + marker.offset.x + 'px';\n            element.style.top = location_2.y + (layerOffset.top - elementOffset.top) + marker.offset.y + 'px';\n            element.style.transform = 'translate(-50%, -50%)';\n          } else {\n            var elementOffset = element.getBoundingClientRect();\n            element.style.left = (location_2.x + x) * scale + marker.offset.x - this.maps.mapAreaRect.x - elementOffset.width / 2 + 'px';\n            element.style.top = (location_2.y + y) * scale + marker.offset.y - this.maps.mapAreaRect.y - elementOffset.height / 2 + 'px';\n          }\n        } else {\n          location_2.x = (location_2.x + x) * scale + marker.offset.x;\n          location_2.y = (location_2.y + y) * scale + marker.offset.y;\n          if (!animate || duration === 0) {\n            element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n          } else {\n            smoothTranslate(element, 0, duration, location_2);\n          }\n        }\n      }\n    }\n  };\n  Zoom.prototype.markerLineAnimation = function (map) {\n    if (map.isTileMap) {\n      for (var i = 0; i < map.layersCollection.length; i++) {\n        var markerTemplateElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n        var lineElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_line_Group');\n        if (!isNullOrUndefined(markerTemplateElement)) {\n          markerTemplateElement.style.visibility = 'hidden';\n        }\n        if (!isNullOrUndefined(lineElement)) {\n          lineElement.style.visibility = 'hidden';\n        }\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  Zoom.prototype.panning = function (direction, xDifference, yDifference, mouseLocation) {\n    var map = this.maps;\n    var panArgs;\n    var down = this.mouseDownPoints;\n    var move = this.mouseMovePoints;\n    var scale = map.scale;\n    map.markerZoomedState = false;\n    map.zoomPersistence = map.enablePersistence;\n    map.defaultState = false;\n    map.initialCheck = false;\n    var translatePoint = map.translatePoint;\n    var prevTilePoint = map.tileTranslatePoint;\n    var x;\n    var y;\n    xDifference = !isNullOrUndefined(xDifference) ? xDifference : down.x - move.x;\n    yDifference = !isNullOrUndefined(yDifference) ? yDifference : down.y - move.y;\n    this.maps.mergeCluster();\n    if (!map.isTileMap) {\n      var legendElement = document.getElementById(map.element.id + '_Legend_Group');\n      var legendHeight = !isNullOrUndefined(legendElement) ? legendElement.getClientRects()[0].height : 0;\n      x = translatePoint.x - xDifference / scale;\n      y = translatePoint.y - yDifference / scale;\n      var layerRect = getElementByID(map.element.id + '_Layer_Collections').getBoundingClientRect();\n      var elementRect = getElementByID(map.element.id + '_svg').getBoundingClientRect();\n      var panningXDirection = xDifference < 0 ? layerRect.left <= elementRect.left + map.mapAreaRect.x : layerRect.left + layerRect.width + map.mapAreaRect.x >= elementRect.width;\n      var panningYDirection = yDifference < 0 ? layerRect.top <= elementRect.top + map.mapAreaRect.y : layerRect.top + layerRect.height + legendHeight + map.margin.top >= elementRect.top + elementRect.height;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var location_3 = this.maps.getGeoLocation(this.maps.layersCollection.length - 1, mouseLocation['layerX'], mouseLocation['layerY']);\n      panArgs = {\n        cancel: false,\n        name: pan,\n        maps: map,\n        tileTranslatePoint: {},\n        translatePoint: {\n          previous: translatePoint,\n          current: new Point(x, y)\n        },\n        scale: map.scale,\n        tileZoomLevel: map.tileZoomLevel,\n        latitude: location_3['latitude'],\n        longitude: location_3['longitude']\n      };\n      map.trigger(pan, panArgs);\n      if (!panArgs.cancel) {\n        if (panningXDirection && panningYDirection) {\n          map.translatePoint = new Point(x, y);\n          this.applyTransform(map);\n        } else if (panningXDirection) {\n          map.translatePoint = new Point(x, map.translatePoint.y);\n          this.applyTransform(map);\n        } else if (panningYDirection) {\n          map.translatePoint = new Point(map.translatePoint.x, y);\n          this.applyTransform(map);\n        }\n      }\n      this.maps.zoomNotApplied = false;\n    } else if (this.maps.tileZoomLevel > 1) {\n      x = map.tileTranslatePoint.x - xDifference;\n      y = map.tileTranslatePoint.y - yDifference;\n      this.distanceX = x - map.tileTranslatePoint.x;\n      this.distanceY = y - map.tileTranslatePoint.y;\n      map.tileTranslatePoint.x = x;\n      map.tileTranslatePoint.y = y;\n      if (map.tileTranslatePoint.y > -10 && yDifference < 0 || map.tileTranslatePoint.y < -((Math.pow(2, this.maps.tileZoomLevel) - 2) * 256) && yDifference > 0) {\n        map.tileTranslatePoint.x = x + xDifference;\n        map.tileTranslatePoint.y = y + yDifference;\n      }\n      map.translatePoint.x = (map.tileTranslatePoint.x - xDifference) / map.scale;\n      map.translatePoint.y = (map.tileTranslatePoint.y - yDifference) / map.scale;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var location_4 = this.maps.getTileGeoLocation(mouseLocation['layerX'], mouseLocation['layerY']);\n      panArgs = {\n        cancel: false,\n        name: pan,\n        maps: map,\n        tileTranslatePoint: {\n          previous: prevTilePoint,\n          current: map.tileTranslatePoint\n        },\n        translatePoint: {\n          previous: translatePoint,\n          current: map.translatePoint\n        },\n        scale: map.scale,\n        tileZoomLevel: map.tileZoomLevel,\n        latitude: location_4['latitude'],\n        longitude: location_4['longitude']\n      };\n      map.trigger(pan, panArgs);\n      map.mapLayerPanel.generateTiles(map.tileZoomLevel, map.tileTranslatePoint, 'Pan');\n      this.applyTransform(map);\n    }\n    map.zoomTranslatePoint = map.translatePoint;\n    this.mouseDownPoints = this.mouseMovePoints;\n    this.maps.zoomNotApplied = false;\n    this.isSingleClick = false;\n  };\n  Zoom.prototype.toAlignSublayer = function () {\n    this.maps.translatePoint.x = !isNullOrUndefined(this.distanceX) ? this.maps.translatePoint.x - this.distanceX / this.maps.scale : this.maps.translatePoint.x;\n    this.maps.translatePoint.y = !isNullOrUndefined(this.distanceY) ? this.maps.translatePoint.y - this.distanceY / this.maps.scale : this.maps.translatePoint.y;\n    this.applyTransform(this.maps, false);\n  };\n  Zoom.prototype.toolBarZooming = function (zoomFactor, type) {\n    var _this = this;\n    var map = this.maps;\n    map.initialCheck = false;\n    map.defaultState = type === 'Reset' && zoomFactor === 1 && !(map.zoomSettings.resetToInitial && map.applyZoomReset) || type === 'ZoomOut' && zoomFactor === 1;\n    var prevLevel = map.tileZoomLevel;\n    var scale = map.previousScale = map.scale;\n    map.markerZoomedState = false;\n    map.zoomPersistence = map.enablePersistence;\n    map.mapScaleValue = zoomFactor;\n    var maxZoom = map.zoomSettings.maxZoom;\n    var minZoom = map.zoomSettings.minZoom;\n    var size = map.mapAreaRect;\n    var translatePoint = map.previousPoint = map.translatePoint;\n    var prevTilePoint = map.tileTranslatePoint;\n    map.previousProjection = map.projectionType;\n    zoomFactor = type === 'ZoomOut' ? Math.round(zoomFactor) === 1 ? 1 : zoomFactor : zoomFactor;\n    zoomFactor = type === 'Reset' ? 1 : Math.round(zoomFactor) === 0 ? 1 : zoomFactor;\n    zoomFactor = minZoom > zoomFactor && type === 'ZoomIn' ? minZoom + 1 : zoomFactor;\n    var zoomArgs;\n    if (!map.isTileMap && (type === 'ZoomIn' ? zoomFactor >= minZoom && zoomFactor <= maxZoom : zoomFactor >= minZoom || map.isReset)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var min = map.baseMapRectBounds['min'];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var max = map.baseMapRectBounds['max'];\n      var mapWidth = Math.abs(max['x'] - min['x']);\n      var mapHeight = Math.abs(min['y'] - max['y']);\n      var translatePointX = void 0;\n      var translatePointY = void 0;\n      if (zoomFactor < 1.2 && map.projectionType !== 'Eckert5') {\n        if (mapHeight === 0 || mapWidth === 0 || mapHeight === mapWidth) {\n          mapWidth = size.width / 2;\n          mapHeight = size.height;\n        }\n        zoomFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n        zoomFactor = zoomFactor > 1.05 ? 1 : zoomFactor;\n        map.translatePoint = this.calculateInitalZoomTranslatePoint(zoomFactor, mapWidth, mapHeight, size, min, map);\n      } else {\n        translatePointX = translatePoint.x - (size.width / scale - size.width / zoomFactor) / 2;\n        translatePointY = translatePoint.y - (size.height / scale - size.height / zoomFactor) / 2;\n        var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomFactor;\n        translatePointX = currentHeight < map.mapAreaRect.height ? size.x + (-min['x'] + (size.width / 2 - mapWidth / 2)) : translatePointX;\n        translatePointY = currentHeight < map.mapAreaRect.height ? size.y + (-min['y'] + (size.height / 2 - mapHeight / 2)) : translatePointY;\n        map.translatePoint = new Point(translatePointX, translatePointY);\n      }\n      map.zoomTranslatePoint = map.translatePoint;\n      map.scale = zoomFactor;\n      if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n        map.translatePoint = map.zoomTranslatePoint = map.previousPoint;\n        map.scale = map.previousScale;\n      } else {\n        this.applyTransform(map, true);\n      }\n    } else if (map.isTileMap && (zoomFactor >= minZoom && zoomFactor <= maxZoom || map.isReset)) {\n      var tileZoomFactor = prevLevel < minZoom && !map.isReset ? minZoom : zoomFactor;\n      map.scale = Math.pow(2, tileZoomFactor - 1);\n      map.tileZoomLevel = tileZoomFactor;\n      if (map.previousScale !== map.scale || map.isReset) {\n        map.zoomSettings.zoomFactor = zoomFactor;\n        var position = {\n          x: map.availableSize.width / 2,\n          y: map.availableSize.height / 2\n        };\n        this.getTileTranslatePosition(prevLevel, tileZoomFactor, position, type);\n        if (map.zoomSettings.resetToInitial && map.applyZoomReset && type === 'Reset' || type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && tileZoomFactor <= map.initialZoomLevel) {\n          map.initialCheck = true;\n          map.zoomPersistence = false;\n          map.tileTranslatePoint.x = map.initialTileTranslate.x;\n          map.tileTranslatePoint.y = map.initialTileTranslate.y;\n          tileZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n        }\n        if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n          map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n          map.scale = map.previousScale;\n          map.tileZoomLevel = prevLevel;\n          map.zoomSettings.zoomFactor = map.previousScale;\n        } else {\n          map.translatePoint.y = (map.tileTranslatePoint.y - 0.01 * map.mapScaleValue) / map.scale;\n          map.translatePoint.x = (map.tileTranslatePoint.x - 0.01 * map.mapScaleValue) / map.scale;\n          if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n            document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n          }\n          if (document.querySelector('.GroupElement')) {\n            document.querySelector('.GroupElement').style.display = 'none';\n          }\n          this.markerLineAnimation(map);\n          map.mapLayerPanel.generateTiles(tileZoomFactor, map.tileTranslatePoint, type);\n          var element1 = document.getElementById(this.maps.element.id + '_tiles');\n          var animationDuration = this.maps.layersCollection[0].animationDuration;\n          setTimeout(function () {\n            if (type === 'ZoomOut' || type === 'Reset') {\n              // element1.removeChild(element1.children[element1.childElementCount - 1]);\n              // element1.childElementCount ? element1.removeChild(element1.children[element1.childElementCount - 1]) : element1;\n            }\n            _this.applyTransform(_this.maps, true);\n            if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n              document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n            }\n            _this.maps.isAddLayer = false;\n          }, animationDuration);\n        }\n      }\n      this.maps.zoomNotApplied = false;\n    }\n  };\n  Zoom.prototype.createZoomingToolbars = function () {\n    var map = this.maps;\n    var zoomInElements;\n    var zoomOutElements;\n    this.toolBarGroup = map.renderer.createGroup({\n      id: map.element.id + '_Zooming_KitCollection',\n      opacity: map.theme.toLowerCase() === 'fluentdark' ? 0.6 : 0.3\n    });\n    var kitHeight = 16;\n    var kitWidth = 16;\n    var xSpacing = 15;\n    var ySpacing = 15;\n    var padding = 20;\n    var orientation = map.zoomSettings.toolBarOrientation;\n    var toolbarsCollection = map.zoomSettings.toolbars;\n    var shadowElement = '<filter id=\"chart_shadow\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>';\n    shadowElement += '<feOffset dx=\"-3\" dy=\"4\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"1\"/>';\n    shadowElement += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n    var toolBarLength = map.zoomSettings.toolbars.length;\n    var toolWidth = map.zoomSettings.toolBarOrientation === 'Horizontal' ? toolBarLength * kitWidth + toolBarLength * padding : kitWidth * 2;\n    var toolHeight = map.zoomSettings.toolBarOrientation === 'Horizontal' ? kitHeight * 2 : toolBarLength * kitHeight + toolBarLength * padding;\n    var defElement = map.renderer.createDefs();\n    defElement.innerHTML = shadowElement;\n    this.toolBarGroup.appendChild(defElement);\n    var outerElement = map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', {\n      color: 'transparent',\n      width: 1\n    }, 0.1, new Rect(0, 0, toolWidth, toolHeight), 0, 0));\n    outerElement.setAttribute('filter', 'url(#chart_shadow)');\n    this.toolBarGroup.appendChild(outerElement);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var performFunction;\n    for (var i = 0; i < toolbarsCollection.length; i++) {\n      var toolbar_1 = toolbarsCollection[i];\n      var pathOptions = void 0;\n      var polyOptions = void 0;\n      this.currentToolbarEle = map.renderer.createGroup({\n        id: map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Group',\n        transform: 'translate( ' + xSpacing + ' ' + ySpacing + ' ) '\n      });\n      this.currentToolbarEle.setAttribute('class', 'e-maps-toolbar');\n      var fillColor = '';\n      var fill = 'transparent';\n      var direction = '';\n      var polygonDirection = '';\n      this.selectionColor = this.maps.zoomSettings.selectionColor || this.maps.themeStyle.zoomSelectionColor;\n      switch (toolbar_1.toLowerCase()) {\n        case 'zoom':\n          {\n            var fillColor_1 = void 0;\n            var strokeColor = void 0;\n            direction = 'M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,';\n            direction += '5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571';\n            direction = direction + 'L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,';\n            if (this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n              fillColor_1 = fill;\n              strokeColor = this.maps.themeStyle.zoomFillColor;\n            } else if (this.maps.zoomSettings.enablePanning && this.maps.zoomSettings.enableSelectionZooming) {\n              fillColor_1 = fill;\n              strokeColor = this.maps.themeStyle.zoomFillColor;\n            } else if (!this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n              fillColor_1 = fill;\n              strokeColor = this.maps.themeStyle.zoomFillColor;\n            } else {\n              fillColor_1 = this.selectionColor;\n              strokeColor = this.selectionColor;\n            }\n            this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fillColor_1, 1, strokeColor, 1, 1, null, direction + '4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z')));\n            this.zoomElements = this.currentToolbarEle;\n            this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n            break;\n          }\n        case 'zoomin':\n          direction = 'M 8, 0 L 8, 16 M 0, 8 L 16, 8';\n          this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Path', fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n          zoomInElements = this.currentToolbarEle;\n          this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n          break;\n        case 'zoomout':\n          direction = 'M 0, 8 L 16, 8';\n          this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n          zoomOutElements = this.currentToolbarEle;\n          this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n          break;\n        case 'pan':\n          {\n            var color = void 0;\n            direction = 'M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,';\n            direction += '11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z';\n            if (this.maps.zoomSettings.enablePanning && this.maps.zoomModule.isDragZoom) {\n              color = '#737373';\n            } else if (!this.maps.zoomSettings.enablePanning) {\n              color = '#737373';\n              this.currentToolbarEle.setAttribute('class', '');\n            } else {\n              color = this.selectionColor;\n            }\n            this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, color, 1, color, 1, 1, null, direction)));\n            this.panColor = color;\n            this.panElements = this.currentToolbarEle;\n            this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n            break;\n          }\n        case 'reset':\n          direction = 'M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,';\n          direction += '1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,';\n          direction += '13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,';\n          this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.fillColor, null, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction + '3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z')));\n          this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n          break;\n      }\n      this.currentToolbarEle.appendChild(map.renderer.drawCircle(new CircleOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Rect', fill, {\n        color: this.maps.themeStyle.zoomFillColor,\n        width: 1\n      }, 1, 8, 8, 16, '')));\n      xSpacing = orientation === 'Horizontal' ? xSpacing + (kitWidth + padding) : xSpacing;\n      ySpacing = orientation === 'Horizontal' ? ySpacing : ySpacing + (kitHeight + padding);\n      this.toolBarGroup.appendChild(this.currentToolbarEle);\n    }\n  };\n  Zoom.prototype.performToolBarAction = function (e) {\n    var target = e.target;\n    e.stopImmediatePropagation();\n    var isTouch = e.pointerType === 'touch' || e.pointerType === '2' || e.type.indexOf('touch') > -1;\n    var toolbar = target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n    if (isTouch) {\n      this.handled = true;\n      this.performZoomingByToolBar(toolbar);\n    } else if ((e.type === 'mousedown' || e.type === 'pointerdown') && !this.handled) {\n      this.handled = false;\n      this.performZoomingByToolBar(toolbar);\n    } else {\n      this.handled = false;\n    }\n  };\n  /**\n   * @param {string} type - Specifies the type.\n   * @returns {void}\n   * @private\n   */\n  Zoom.prototype.performZoomingByToolBar = function (type) {\n    var map = this.maps;\n    map.isReset = false;\n    switch (type.toLowerCase()) {\n      case 'zoom':\n        this.panColor = this.fillColor;\n        this.zoomColor = this.selectionColor;\n        this.applySelection(this.zoomElements, this.selectionColor);\n        this.applySelection(this.panElements, this.fillColor);\n        break;\n      case 'pan':\n        if (!this.maps.zoomSettings.enablePanning) {\n          this.panColor = '#737373';\n        } else {\n          this.panColor = this.selectionColor;\n        }\n        this.zoomColor = this.fillColor;\n        if (!this.maps.zoomSettings.enablePanning) {\n          this.applySelection(this.zoomElements, this.selectionColor);\n          this.applySelection(this.panElements, this.panColor);\n        } else {\n          this.applySelection(this.zoomElements, this.fillColor);\n          this.applySelection(this.panElements, this.panColor);\n        }\n        break;\n      case 'zoomin':\n        map.staticMapZoom = map.tileZoomLevel;\n        if (map.staticMapZoom > 0 && map.staticMapZoom < 22) {\n          map.staticMapZoom += 1;\n        }\n        this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) + 1, 'ZoomIn');\n        break;\n      case 'zoomout':\n        map.staticMapZoom = map.tileZoomLevel;\n        map.markerCenterLatitude = null;\n        map.markerCenterLongitude = null;\n        this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) - 1, 'ZoomOut');\n        break;\n      case 'reset':\n        map.staticMapZoom = map.zoomSettings.enable ? map.zoomSettings.zoomFactor : 0;\n        map.markerCenterLatitude = null;\n        map.markerCenterLongitude = null;\n        this.toolBarZooming(1, 'Reset');\n        if (!this.maps.zoomSettings.enablePanning) {\n          this.applySelection(this.zoomElements, this.selectionColor);\n          this.applySelection(this.panElements, '#737373');\n        } else {\n          this.applySelection(this.zoomElements, this.fillColor);\n          this.applySelection(this.panElements, this.selectionColor);\n        }\n    }\n    this.panningStyle(type.toLowerCase());\n  };\n  Zoom.prototype.panningStyle = function (toolbar) {\n    var svg = getElementByID(this.maps.element.id + '_svg');\n    if (toolbar === 'pan' || this.isPanning) {\n      svg.setAttribute('class', 'e-maps-panning');\n    } else {\n      svg.setAttribute('class', '');\n    }\n  };\n  Zoom.prototype.applySelection = function (elements, color) {\n    if (!elements) {\n      return;\n    }\n    var childElement;\n    for (var i = 0; i < elements.childElementCount; i++) {\n      childElement = elements.childNodes[i];\n      if (childElement.tagName !== 'circle') {\n        childElement.setAttribute('fill', color);\n        childElement.setAttribute('stroke', color);\n      }\n    }\n  };\n  Zoom.prototype.showTooltip = function (e) {\n    var text = e.target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n    if (!this.isTouch) {\n      createTooltip('EJ2_Map_Toolbar_Tip', this.maps.getLocalizedLabel(text), e.pageY + 10, e.pageX + 10, '10px');\n    }\n  };\n  Zoom.prototype.removeTooltip = function () {\n    if (getElementByID('EJ2_Map_Toolbar_Tip')) {\n      remove(getElementByID('EJ2_Map_Toolbar_Tip'));\n    }\n  };\n  Zoom.prototype.alignToolBar = function () {\n    var map = this.maps;\n    var padding = 10;\n    var element = createElement('div', {\n      id: map.element.id + '_ToolBar',\n      styles: 'position:absolute;z-index:2'\n    });\n    var rectSVGObject = map.renderer.createSvg({\n      id: map.element.id + '_Zooming_ToolBar',\n      width: 10,\n      height: 10\n    });\n    rectSVGObject.appendChild(this.toolBarGroup);\n    element.appendChild(rectSVGObject);\n    if (getElementByID(map.element.id + '_Secondary_Element')) {\n      getElementByID(map.element.id + '_Secondary_Element').appendChild(element);\n    }\n    var toolBarSize = this.toolBarGroup.getBoundingClientRect();\n    rectSVGObject.setAttribute('height', (toolBarSize.height + padding / 2).toString());\n    rectSVGObject.setAttribute('width', (toolBarSize.width + padding / 2).toString());\n    var size = !isNullOrUndefined(map.totalRect) ? map.totalRect : map.mapAreaRect;\n    var x = 0;\n    var y = 0;\n    switch (map.zoomSettings.verticalAlignment) {\n      case 'Near':\n        y = size.y;\n        break;\n      case 'Center':\n        y = size.height / 2 - toolBarSize.height / 2;\n        break;\n      case 'Far':\n        y = size.height - toolBarSize.height - padding;\n        break;\n    }\n    switch (map.zoomSettings.horizontalAlignment) {\n      case 'Near':\n        x = size.x;\n        break;\n      case 'Center':\n        x = size.width / 2 - toolBarSize.width / 2;\n        break;\n      case 'Far':\n        if (!isNullOrUndefined(map.legendModule) && map.legendSettings.position === 'Left') {\n          x = size.width + size.x - toolBarSize.width - padding;\n        } else {\n          x = size.width - toolBarSize.width - padding;\n        }\n        break;\n    }\n    var extraPosition = map.getExtraPosition();\n    element.style.left = x + extraPosition.x + 'px';\n    element.style.top = y + extraPosition.y + 'px';\n    var color = this.maps.zoomSettings.highlightColor || this.maps.themeStyle.zoomSelectionColor;\n    var css = ' .e-maps-toolbar:hover > circle { stroke:' + color + '; } .e-maps-toolbar:hover > path { fill: ' + color + ' ;  stroke: ' + color + '; }' + '.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } ' + '.e-maps-popup-close { display: block; opacity: 0; }';\n    var style = document.createElement('style');\n    style.appendChild(document.createTextNode(css));\n    element.appendChild(style);\n  };\n  /**\n   * To bind events.\n   *\n   * @param {Element} element - Specifies the element.\n   * @param {any} process - Specifies the process.\n   * @returns {void}\n   * @private\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Zoom.prototype.wireEvents = function (element, process) {\n    EventHandler.add(element, Browser.touchStartEvent, process, this);\n    EventHandler.add(element, 'mouseover', this.showTooltip, this);\n    EventHandler.add(element, 'mouseout', this.removeTooltip, this);\n  };\n  Zoom.prototype.mapMouseWheel = function (e) {\n    if (this.maps.zoomSettings.enable && this.maps.zoomSettings.mouseWheelZoom) {\n      var map = this.maps;\n      var size = map.availableSize;\n      map.markerZoomedState = false;\n      map.zoomPersistence = map.enablePersistence;\n      var position = this.getMousePosition(e.pageX, e.pageY);\n      var prevLevel = map.tileZoomLevel;\n      var prevScale = map.scale;\n      var delta = 1;\n      var staticMaxZoomLevel = 22; // google map maximum zoom level value\n      var value = map.isTileMap ? prevLevel : prevScale;\n      if (position.x > map.mapAreaRect.x && position.x < map.mapAreaRect.x + map.mapAreaRect.width && position.y > map.mapAreaRect.y && position.y < map.mapAreaRect.y + map.mapAreaRect.height) {\n        e.preventDefault();\n        var direction = this.browserName === 'mozilla' && !this.isPointer ?\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        -e.detail / 3 > 0 ? 'ZoomIn' : 'ZoomOut' : e.wheelDelta / 120 > 0 ? 'ZoomIn' : 'ZoomOut';\n        if (direction === 'ZoomIn') {\n          map.mapScaleValue = value + delta;\n          map.staticMapZoom = map.tileZoomLevel;\n          if (map.staticMapZoom > 0 && map.staticMapZoom < staticMaxZoomLevel) {\n            map.staticMapZoom += 1;\n          }\n          this.performZooming(position, value + delta, direction);\n        } else {\n          map.mapScaleValue = value - delta;\n          map.isReset = map.mapScaleValue < 1 ? true : false;\n          map.staticMapZoom = map.tileZoomLevel;\n          if (map.mapScaleValue === 1) {\n            map.markerCenterLatitude = null;\n            map.markerCenterLongitude = null;\n          }\n          if (map.staticMapZoom > 1 && map.staticMapZoom < staticMaxZoomLevel) {\n            map.staticMapZoom -= 1;\n          }\n          this.performZooming(position, value - delta, direction);\n        }\n      }\n    }\n  };\n  Zoom.prototype.doubleClick = function (e) {\n    var pageX = e.pageX;\n    var pageY = e.pageY;\n    var target = e.target;\n    if (this.maps.zoomSettings.enable && this.maps.zoomSettings.doubleClickZoom && !(e.target['id'].indexOf('_Zooming_') > -1)) {\n      var position = this.getMousePosition(pageX, pageY);\n      var map = this.maps;\n      var size = map.availableSize;\n      var prevLevel = map.tileZoomLevel;\n      var prevScale = map.scale;\n      map.mapScaleValue = map.mapScaleValue + 1;\n      var value = map.isTileMap ? prevLevel : prevScale;\n      if (position.x > map.mapAreaRect.x && position.x < map.mapAreaRect.x + map.mapAreaRect.width && position.y > map.mapAreaRect.y && position.y < map.mapAreaRect.y + map.mapAreaRect.height) {\n        this.performZooming(position, value + 1, 'ZoomIn');\n      }\n    }\n  };\n  Zoom.prototype.mouseDownHandler = function (e) {\n    var pageX;\n    var pageY;\n    var target;\n    var touches = null;\n    var element = e.target;\n    if (e.type === 'touchstart') {\n      this.isTouch = true;\n      touches = e.touches;\n      target = e.target;\n      pageX = touches[0].clientX;\n      pageY = touches[0].clientY;\n    } else {\n      pageX = e.pageX;\n      pageY = e.pageY;\n      target = e.target;\n    }\n    if (!this.maps.zoomSettings.enablePanning) {\n      this.isPanning = this.panColor !== this.selectionColor ? this.maps.zoomSettings.enablePanning : this.zoomColor === this.selectionColor;\n    } else {\n      this.isPanning = this.panColor === this.selectionColor ? this.maps.zoomSettings.enablePanning : this.zoomColor !== this.selectionColor;\n    }\n    this.mouseDownLatLong = {\n      x: pageX,\n      y: pageY\n    };\n    this.rectZoomingStart = !this.isPanning && this.maps.zoomSettings.enable;\n    this.mouseDownPoints = this.getMousePosition(pageX, pageY);\n    if (this.isTouch) {\n      this.firstMove = true;\n      this.pinchFactor = this.maps.scale;\n      this.fingers = touches.length;\n    }\n    this.isSingleClick = true;\n  };\n  Zoom.prototype.mouseMoveHandler = function (e) {\n    var pageX;\n    var pageY;\n    var map = this.maps;\n    var touchArg;\n    var target;\n    var touches = null;\n    var zoom = this.maps.zoomSettings;\n    if (e.type === 'touchmove') {\n      this.isTouch = true;\n      target = e.target;\n      touches = e.touches;\n      pageX = touches[0].clientX;\n      pageY = touches[0].clientY;\n    } else {\n      pageX = e.pageX;\n      pageY = e.pageY;\n      target = e.target;\n    }\n    if (getElementByID(map.element.id + '_Zooming_KitCollection')) {\n      if (target.id.indexOf('_Zooming_') > -1) {\n        getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', '1');\n        if (document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n          if (!this.maps.zoomSettings.enablePanning) {\n            if (target.id.indexOf('_Zooming_ToolBar') > -1 || target.id.indexOf('_Zooming_Rect') > -1) {\n              getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', map.theme.toLowerCase() === 'fluentdark' ? '0.6' : '0.3');\n              getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', map.theme.toLowerCase() === 'fluentdark' ? '0.6' : '0.3');\n            }\n          }\n        }\n      } else {\n        getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', map.theme.toLowerCase() === 'fluentdark' ? '0.6' : '0.3');\n        if (!this.maps.zoomSettings.enablePanning && document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n          getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', '1');\n          getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', '1');\n        }\n      }\n    }\n    if (this.isTouch) {\n      if (this.maps.zoomSettings.pinchZooming) {\n        if (this.firstMove && touches.length === 2) {\n          this.rectZoomingStart = false;\n          this.updateInteraction();\n          this.touchStartList = targetTouches(e);\n        } else if (touches.length === 2 && this.touchStartList.length === 2) {\n          this.touchMoveList = targetTouches(e);\n          e.preventDefault();\n          this.rectZoomingStart = false;\n          this.performPinchZooming(e);\n        }\n        this.firstMove = false;\n      }\n    }\n    this.mouseMovePoints = this.getMousePosition(pageX, pageY);\n    var targetId = e.target['id'];\n    var targetEle = e.target;\n    if (zoom.enable && this.isPanning && (Browser.isDevice && touches.length >= 1 || !Browser.isDevice)) {\n      e.preventDefault();\n      this.maps.element.style.cursor = 'pointer';\n      this.mouseMoveLatLong = {\n        x: pageX,\n        y: pageY\n      };\n      if (this.mouseDownLatLong['x'] !== this.mouseMoveLatLong['x'] && this.mouseDownLatLong['y'] !== this.mouseMoveLatLong['y']) {\n        if (this.maps.zoomSettings.enablePanning) {\n          this.panning('None', null, null, e);\n        }\n        this.mouseDownLatLong['x'] = pageX;\n        this.mouseDownLatLong['y'] = pageY;\n      }\n    }\n    if (this.isTouch ? touches.length === 1 && this.rectZoomingStart : this.rectZoomingStart) {\n      e.preventDefault();\n      if (this.maps.zoomSettings.enableSelectionZooming) {\n        this.drawZoomRectangle();\n      }\n    }\n  };\n  Zoom.prototype.mouseUpHandler = function (e) {\n    var isDragZoom;\n    var map = this.maps;\n    this.rectZoomingStart = false;\n    this.isPanning = false;\n    this.isSingleClick = this.isSingleClick ? true : false;\n    this.isTouch = false;\n    this.touchStartList = [];\n    this.touchMoveList = [];\n    this.lastScale = 1;\n    this.maps.element.style.cursor = 'auto';\n    if ((!isNullOrUndefined(this.distanceX) || !isNullOrUndefined(this.distanceY)) && !isNullOrUndefined(this.currentLayer) && this.currentLayer.type === 'SubLayer') {\n      this.toAlignSublayer();\n      this.distanceX = this.distanceY = null;\n    }\n    var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n    if (zoomRectElement && this.maps.zoomSettings.enable && this.maps.zoomSettings.enableSelectionZooming) {\n      isDragZoom = true;\n      remove(zoomRectElement);\n      this.performRectZooming();\n    }\n    this.mouseMoveLatLong = {\n      x: 0,\n      y: 0\n    };\n    this.mouseDownLatLong = {\n      x: 0,\n      y: 0\n    };\n  };\n  Zoom.prototype.mouseCancelHandler = function (e) {\n    this.isPanning = false;\n    this.isTouch = false;\n    this.rectZoomingStart = false;\n    var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n    if (zoomRectElement && this.maps.zoomSettings.enable) {\n      remove(zoomRectElement);\n      this.performRectZooming();\n    }\n  };\n  /**\n   * To handle the click event for maps.\n   *\n   * @param {PointerEvent} e - Specifies the pointer event.\n   * @returns {void}\n   */\n  Zoom.prototype.click = function (e) {\n    var map = this.maps;\n    if (map.markerModule && map.markerModule.sameMarkerData.length > 0 || e.target['id'].indexOf('MarkerIndex') > -1 && e.target['id'].indexOf('cluster') === -1) {\n      return null;\n    }\n    if (this.isSingleClick && map.zoomSettings.zoomOnClick && !(e.target['id'].indexOf('_Zooming_') > -1) && !map.zoomSettings.doubleClickZoom && this.zoomColor !== this.selectionColor) {\n      var pageX = e.pageX;\n      var pageY = e.pageY;\n      var position = this.getMousePosition(pageX, pageY);\n      var prevLevel = map.tileZoomLevel;\n      var prevScale = map.scale;\n      map.mapScaleValue = map.mapScaleValue + 1;\n      var value = map.isTileMap ? prevLevel : prevScale;\n      if (position.x > map.mapAreaRect.x && position.x < map.mapAreaRect.x + map.mapAreaRect.width && position.y > map.mapAreaRect.y && position.y < map.mapAreaRect.y + map.mapAreaRect.height) {\n        this.performZooming(position, value + 1, 'ZoomIn');\n      }\n    }\n  };\n  Zoom.prototype.getMousePosition = function (pageX, pageY) {\n    var map = this.maps;\n    var elementRect = map.element.getBoundingClientRect();\n    var pageXOffset = map.element.ownerDocument.defaultView.pageXOffset;\n    var pageYOffset = map.element.ownerDocument.defaultView.pageYOffset;\n    var clientTop = map.element.ownerDocument.documentElement.clientTop;\n    var clientLeft = map.element.ownerDocument.documentElement.clientLeft;\n    var positionX = elementRect.left + pageXOffset - clientLeft;\n    var positionY = elementRect.top + pageYOffset - clientTop;\n    return new Point(Math.abs(pageX - positionX), Math.abs(pageY - positionY));\n  };\n  Zoom.prototype.addEventListener = function () {\n    if (this.maps.isDestroyed) {\n      return;\n    }\n    EventHandler.add(this.maps.element, this.wheelEvent, this.mapMouseWheel, this);\n    EventHandler.add(this.maps.element, 'click', this.click, this);\n    EventHandler.add(this.maps.element, 'dblclick', this.doubleClick, this);\n    this.maps.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n    this.maps.on(Browser.touchStartEvent, this.mouseDownHandler, this);\n    this.maps.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n    EventHandler.add(this.maps.element, this.cancelEvent, this.mouseCancelHandler, this);\n  };\n  Zoom.prototype.removeEventListener = function () {\n    if (this.maps.isDestroyed) {\n      return;\n    }\n    EventHandler.remove(this.maps.element, this.wheelEvent, this.mapMouseWheel);\n    EventHandler.remove(this.maps.element, 'click', this.click);\n    EventHandler.remove(this.maps.element, 'dblclick', this.doubleClick);\n    this.maps.off(Browser.touchMoveEvent, this.mouseMoveHandler);\n    this.maps.off(Browser.touchStartEvent, this.mouseDownHandler);\n    this.maps.off(Browser.touchEndEvent, this.mouseUpHandler);\n    this.maps.off(this.cancelEvent, this.mouseCancelHandler);\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} - Returns the module name.\n   */\n  Zoom.prototype.getModuleName = function () {\n    return 'Zoom';\n  };\n  /**\n   * To destroy the zoom.\n   *\n   * @returns {void}\n   * @private\n   */\n  Zoom.prototype.destroy = function () {\n    this.toolBarGroup = null;\n    this.currentToolbarEle = null;\n    this.zoomingRect = null;\n    this.zoomElements = null;\n    this.panElements = null;\n    this.baseTranslatePoint = null;\n    this.touchStartList = null;\n    this.touchMoveList = null;\n    this.previousTouchMoveList = null;\n    this.mouseDownPoints = null;\n    this.mouseMovePoints = null;\n    this.startTouches = [];\n    this.zoomshapewidth = null;\n    this.intersect = [];\n    this.mouseDownLatLong = null;\n    this.mouseMoveLatLong = null;\n    this.removeEventListener();\n    //TODO: Calling the below code throws spec issue.\n    //this.maps = null;\n    this.currentLayer = null;\n  };\n  return Zoom;\n}();\nexport { Zoom };","map":{"version":3,"names":["Point","getElementByID","PathOption","Rect","convertGeoToPoint","CircleOption","convertTileLatLongToPoint","RectOption","createTooltip","calculateScale","getTouchCenter","getTouches","targetTouches","MapLocation","zoomAnimate","smoothTranslate","measureText","textTrim","clusterTemplate","marker","markerTemplate","removeElement","getElement","clusterSeparate","markerColorChoose","markerShapeChoose","isNullOrUndefined","EventHandler","Browser","remove","createElement","changeBorderWidth","markerRendering","pan","getValueFromObject","Zoom","maps","isPanning","mouseEnter","isTouch","rectZoomingStart","browserName","info","name","isPointer","handled","pinchFactor","startTouches","intersect","mouseDownLatLong","x","y","mouseMoveLatLong","isSingleClick","wheelEvent","cancelEvent","selectionColor","zoomSettings","fillColor","color","addEventListener","prototype","performZooming","position","newZoomFactor","type","_this","map","previousProjection","projectionType","defaultState","initialCheck","markerZoomedState","zoomPersistence","enablePersistence","prevLevel","tileZoomLevel","scale","previousScale","maxZoom","minZoom","prevTilePoint","tileTranslatePoint","isTileMap","isReset","availSize","mapAreaRect","minBounds","baseMapRectBounds","maxBounds","mapTotalWidth","Math","abs","mapTotalHeight","translatePointX","translatePointY","width","height","parseFloat","min","toFixed","translatePoint","calculateInitalZoomTranslatePoint","point","currentHeight","triggerZoomEvent","previousPoint","mapScaleValue","applyTransform","getTileTranslatePosition","zoomFactor","pow","resetToInitial","applyZoomReset","initialZoomLevel","initialTileTranslate","document","querySelector","style","display","getElementById","element","id","markerLineAnimation","mapLayerPanel","generateTiles","element1","animationDuration","layersCollection","setTimeout","zoomNotApplied","widthDiff","translateType","availableSize","zoomArgs","cancel","previous","current","trigger","currentLevel","tileDefaultSize","padding","bounds","prevSize","totalSize","performRectZooming","isDragZoom","size","zoomRect","zoomingRect","isZoomCancelled","zoomCalculationFactor","round","setInteraction","newInteraction","lastScale","interaction","updateInteraction","fingers","performPinchZooming","e","touchStartList","touchMoveList","touchCenter","newScale","max","newTileFactor","drawZoomRectangle","down","mouseDownPoints","move","mouseMovePoints","border","elementRect","getBoundingClientRect","rectSVGObject","renderer","createSvg","rectOption","appendChild","drawRectangle","animateTransform","animate","duration","currentLayer","setAttribute","layerIndex","templateCount","layer","zoomshapelocation","i","markerStyle","collection","zoomShapeCollection","layerCollectionEle","i_1","childElementCount","layerElement","childNodes","tagName","index","indexOf","split","factor","calculateFactor","j","currentEle","children","length","insertBefore","navigationLineModule","renderNavigation","zoomTranslatePoint","markerTranslates","markerAnimation","k","markerTranslate","layerIndex_1","parseInt","dataIndex","markerIndex","markerSettings","markerSelectionValues","dataSource","x_1","initialMarkerSelection","markerSelection","selectionSettings","groupElement","markerModule","sameMarkerData","mapsTooltipModule","tooltipTargetID","mapsTooltip","tooltipElement","x_2","getAttribute","y_1","svgTooltip","location","enableAnimation","childElement","bubbleTransform","bubleIndex","l","bubbleModule","bubbleCollection","centerX","centerY","currentX","currentY","layers","zoomLabelPositions","dataLabelModule","dataLabelCollections","labelAnimate","labelIndex","zoomshapewidth","push","dataLabelTranslate","dataLabel","dataLabelSettings","labelX","labelY","zoomtext","textStyle","zoomtextSize","rectElement","rectX","rectY","arrangeTemplate","processTemplate","templateFn","nullCount","markerCounts","markerTemplateCounts","markerSVGObject","createGroup","class","mapsAreaRect","markerTemplateElements","className","styles","currentLayers","markerDatas","Array","forEach","call","data","markerNullCount","eventArgs","template","fill","colorValuePath","shapeValuePath","imageUrl","imageUrlValuePath","shape","MarkerArgs","lati","latitudeValuePath","Number","long","longitudeValuePath","offset","visible","markerID","location_1","animate_1","zoomModule","transPoint","isNaN","markerDataLength","markerClusterSettings","allowClustering","svgObject","markerTemplateElement","datalabelTemplateElemement","labelCollection","zoomelement","text","trimmedLable","zoomtrimLabel","labelPath","shapeIndex","label","layerEle","templateOffset","layerOffset","elementOffset","parentElement","x_3","left","y_2","top","start","end","xpositionEnds","xpositionStart","textLocations","rightWidth","leftWidth","heightTop","heightBottom","smartLabelMode","dataLabelShape","innerHTML","intersectionAction","m","difference","lng","lat","location_2","baseLayerIndex","layerType","staticMapOffset","staticMapOffsetWidth","transform","lineElement","visibility","panning","direction","xDifference","yDifference","mouseLocation","panArgs","mergeCluster","legendElement","legendHeight","getClientRects","layerRect","panningXDirection","panningYDirection","margin","location_3","getGeoLocation","latitude","longitude","distanceX","distanceY","location_4","getTileGeoLocation","toAlignSublayer","toolBarZooming","mapWidth","mapHeight","tileZoomFactor","isAddLayer","createZoomingToolbars","zoomInElements","zoomOutElements","toolBarGroup","opacity","theme","toLowerCase","kitHeight","kitWidth","xSpacing","ySpacing","orientation","toolBarOrientation","toolbarsCollection","toolbars","shadowElement","toolBarLength","toolWidth","toolHeight","defElement","createDefs","outerElement","performFunction","toolbar_1","pathOptions","polyOptions","currentToolbarEle","polygonDirection","themeStyle","zoomSelectionColor","fillColor_1","strokeColor","enablePanning","enableSelectionZooming","zoomFillColor","drawPath","zoomElements","wireEvents","performToolBarAction","panColor","panElements","drawCircle","target","stopImmediatePropagation","pointerType","toolbar","performZoomingByToolBar","zoomColor","applySelection","staticMapZoom","markerCenterLatitude","markerCenterLongitude","enable","panningStyle","svg","elements","showTooltip","getLocalizedLabel","pageY","pageX","removeTooltip","alignToolBar","toolBarSize","toString","totalRect","verticalAlignment","horizontalAlignment","legendModule","legendSettings","extraPosition","getExtraPosition","highlightColor","css","createTextNode","process","add","touchStartEvent","mapMouseWheel","mouseWheelZoom","getMousePosition","prevScale","delta","staticMaxZoomLevel","value","preventDefault","detail","wheelDelta","doubleClick","doubleClickZoom","mouseDownHandler","touches","clientX","clientY","firstMove","mouseMoveHandler","touchArg","zoom","pinchZooming","targetId","targetEle","isDevice","cursor","mouseUpHandler","zoomRectElement","mouseCancelHandler","click","zoomOnClick","pageXOffset","ownerDocument","defaultView","pageYOffset","clientTop","documentElement","clientLeft","positionX","positionY","isDestroyed","on","touchMoveEvent","touchEndEvent","removeEventListener","off","getModuleName","destroy","baseTranslatePoint","previousTouchMoveList"],"sources":["/Users/macbookpro16/Desktop/cs222/client/node_modules/@syncfusion/ej2-maps/src/maps/user-interaction/zoom.js"],"sourcesContent":["import { Point, getElementByID, PathOption, Rect, convertGeoToPoint, CircleOption, convertTileLatLongToPoint } from '../utils/helper';\nimport { RectOption, createTooltip, calculateScale, getTouchCenter, getTouches, targetTouches } from '../utils/helper';\nimport { MapLocation, zoomAnimate, smoothTranslate, measureText, textTrim, clusterTemplate, marker } from '../utils/helper';\nimport { markerTemplate, removeElement, getElement, clusterSeparate, markerColorChoose } from '../utils/helper';\nimport { markerShapeChoose } from '../utils/helper';\nimport { isNullOrUndefined, EventHandler, Browser, remove, createElement } from '@syncfusion/ej2-base';\nimport { changeBorderWidth, markerRendering } from '../index';\nimport { pan } from '../model/constants';\nimport { getValueFromObject } from '../utils/helper';\n/**\n * Zoom module used to process the zoom for maps\n */\nvar Zoom = /** @class */ (function () {\n    function Zoom(maps) {\n        this.isPanning = false;\n        this.mouseEnter = false;\n        this.isTouch = false;\n        this.rectZoomingStart = false;\n        this.browserName = Browser.info.name;\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        this.isPointer = Browser.isPointer;\n        this.handled = false;\n        this.pinchFactor = 1;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.startTouches = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.intersect = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.mouseDownLatLong = { x: 0, y: 0 };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.mouseMoveLatLong = { x: 0, y: 0 };\n        /**\n         * @private\n         */\n        this.isSingleClick = false;\n        this.maps = maps;\n        this.wheelEvent = this.browserName === 'mozilla' ? (this.isPointer ? 'mousewheel' : 'DOMMouseScroll') : 'mousewheel';\n        this.cancelEvent = this.isPointer ? 'pointerleave' : 'mouseleave';\n        this.selectionColor = this.maps.zoomSettings.selectionColor;\n        this.fillColor = this.maps.zoomSettings.color;\n        this.addEventListener();\n    }\n    /**\n     * To perform zooming for maps\n     *\n     * @param {Point} position - Specifies the position.\n     * @param {number} newZoomFactor - Specifies the zoom factor.\n     * @param {string} type - Specifies the type.\n     * @returns {void}\n     */\n    Zoom.prototype.performZooming = function (position, newZoomFactor, type) {\n        var _this = this;\n        var map = this.maps;\n        map.previousProjection = map.projectionType;\n        map.defaultState = false;\n        map.initialCheck = false;\n        map.markerZoomedState = false;\n        map.zoomPersistence = map.enablePersistence;\n        var prevLevel = map.tileZoomLevel;\n        var scale = map.previousScale = map.scale;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        newZoomFactor = (minZoom > newZoomFactor && type === 'ZoomIn') ? minZoom + 1 : newZoomFactor;\n        var prevTilePoint = map.tileTranslatePoint;\n        if ((!map.isTileMap) && ((type === 'ZoomIn' ? newZoomFactor >= minZoom && newZoomFactor <= maxZoom : newZoomFactor >= minZoom)\n            || map.isReset)) {\n            var availSize = map.mapAreaRect;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var minBounds = map.baseMapRectBounds['min'];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var maxBounds = map.baseMapRectBounds['max'];\n            var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n            var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n            var translatePointX = void 0;\n            var translatePointY = void 0;\n            if (newZoomFactor < 1.2 && map.projectionType !== 'Eckert5') {\n                if (mapTotalWidth === 0 || mapTotalHeight === 0 || mapTotalWidth === mapTotalHeight) {\n                    mapTotalWidth = availSize.width / 2;\n                    mapTotalHeight = availSize.height;\n                }\n                newZoomFactor = parseFloat(Math.min(availSize.width / mapTotalWidth, availSize.height / mapTotalHeight).toFixed(2));\n                newZoomFactor = newZoomFactor > 1.05 ? 1 : newZoomFactor;\n                map.translatePoint = this.calculateInitalZoomTranslatePoint(newZoomFactor, mapTotalWidth, mapTotalHeight, availSize, minBounds, map);\n            }\n            else {\n                var point = map.translatePoint;\n                translatePointX = point.x - (((availSize.width / scale) - (availSize.width / newZoomFactor)) / (availSize.width / position.x));\n                translatePointY = point.y - (((availSize.height / scale) - (availSize.height / newZoomFactor)) / (availSize.height / position.y));\n                var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * newZoomFactor;\n                translatePointX = (currentHeight < map.mapAreaRect.height) ? (availSize.x + ((-(minBounds['x'])) + ((availSize.width / 2) - (mapTotalWidth / 2)))) : translatePointX;\n                translatePointY = (currentHeight < map.mapAreaRect.height) ? (availSize.y + ((-(minBounds['y'])) + ((availSize.height / 2) - (mapTotalHeight / 2)))) : translatePointY;\n                map.translatePoint = new Point(translatePointX, translatePointY);\n            }\n            map.scale = newZoomFactor;\n            if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n                map.translatePoint = map.previousPoint;\n                map.scale = map.mapScaleValue = map.previousScale;\n            }\n            else {\n                this.applyTransform(map);\n            }\n        }\n        else if ((map.isTileMap) && (newZoomFactor >= minZoom && newZoomFactor <= maxZoom)) {\n            this.getTileTranslatePosition(prevLevel, newZoomFactor, position, type);\n            map.tileZoomLevel = newZoomFactor;\n            map.zoomSettings.zoomFactor = newZoomFactor;\n            map.scale = Math.pow(2, newZoomFactor - 1);\n            if (type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && newZoomFactor <= map.initialZoomLevel) {\n                map.initialCheck = true;\n                map.zoomPersistence = false;\n                map.tileTranslatePoint.x = map.initialTileTranslate.x;\n                map.tileTranslatePoint.y = map.initialTileTranslate.y;\n                newZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n                map.scale = Math.pow(2, newZoomFactor - 1);\n            }\n            map.translatePoint.y = (map.tileTranslatePoint.y - (0.01 * map.mapScaleValue)) / map.scale;\n            map.translatePoint.x = (map.tileTranslatePoint.x - (0.01 * map.mapScaleValue)) / map.scale;\n            if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n                map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n                map.scale = map.previousScale;\n                map.tileZoomLevel = prevLevel;\n                map.zoomSettings.zoomFactor = map.previousScale;\n            }\n            else {\n                if (document.querySelector('.GroupElement')) {\n                    document.querySelector('.GroupElement').style.display = 'none';\n                }\n                if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n                    document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n                }\n                this.markerLineAnimation(map);\n                map.mapLayerPanel.generateTiles(newZoomFactor, map.tileTranslatePoint, type + 'wheel', null, position);\n                var element1 = document.getElementById(this.maps.element.id + '_tiles');\n                var animationDuration = this.maps.layersCollection[0].animationDuration;\n                setTimeout(function () {\n                    // if (type === 'ZoomOut') {\n                    //     element1.removeChild(element1.children[element1.childElementCount - 1]);\n                    //     if (element1.childElementCount) {\n                    //         element1.removeChild(element1.children[element1.childElementCount - 1]);\n                    //     } else {\n                    //         element1 = element1;\n                    //     }\n                    // }\n                    _this.applyTransform(_this.maps);\n                    if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n                        document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n                    }\n                }, animationDuration);\n            }\n        }\n        this.maps.zoomNotApplied = false;\n    };\n    Zoom.prototype.calculateInitalZoomTranslatePoint = function (newZoomFactor, mapTotalWidth, mapTotalHeight, availSize, minBounds, map) {\n        mapTotalWidth *= newZoomFactor;\n        mapTotalHeight *= newZoomFactor;\n        var widthDiff = minBounds['x'] !== 0 && map.translateType === 'layers' ? map.availableSize.width - availSize.width : 0;\n        var translatePointX = availSize.x + ((-(minBounds['x'])) + ((availSize.width / 2) - (mapTotalWidth / 2))) - widthDiff;\n        var translatePointY = availSize.y + ((-(minBounds['y'])) + ((availSize.height / 2) - (mapTotalHeight / 2)));\n        return new Point(translatePointX, translatePointY);\n    };\n    Zoom.prototype.triggerZoomEvent = function (prevTilePoint, prevLevel, type) {\n        var map = this.maps;\n        var zoomArgs;\n        if (!map.isTileMap) {\n            zoomArgs = {\n                cancel: false, name: 'zoom', type: type, maps: map,\n                tileTranslatePoint: {}, translatePoint: { previous: map.previousPoint, current: map.translatePoint },\n                tileZoomLevel: {}, scale: { previous: map.previousScale, current: map.scale }\n            };\n        }\n        else {\n            zoomArgs = {\n                cancel: false, name: 'zoom', type: type, maps: map,\n                tileTranslatePoint: { previous: prevTilePoint, current: map.tileTranslatePoint }, translatePoint: { previous: map.previousPoint, current: map.translatePoint },\n                tileZoomLevel: { previous: prevLevel, current: map.tileZoomLevel }, scale: { previous: map.previousScale, current: map.scale }\n            };\n        }\n        map.trigger('zoom', zoomArgs);\n        return zoomArgs.cancel;\n    };\n    Zoom.prototype.getTileTranslatePosition = function (prevLevel, currentLevel, position, type) {\n        var map = this.maps;\n        var tileDefaultSize = 256;\n        var padding = type === 'ZoomOut' ? 10 : (type === 'Reset' && currentLevel > 1) ? 0 : 10;\n        var bounds = map.availableSize;\n        var prevSize = Math.pow(2, prevLevel) * 256;\n        var totalSize = Math.pow(2, currentLevel) * 256;\n        var x = ((position.x - map.tileTranslatePoint.x) / prevSize) * 100;\n        var y = ((position.y - map.tileTranslatePoint.y) / prevSize) * 100;\n        map.tileTranslatePoint.x = (currentLevel === 1) ? (bounds.width / 2) - ((tileDefaultSize * 2) / 2) :\n            position.x - ((x * totalSize) / 100);\n        map.tileTranslatePoint.y = (currentLevel === 1) ? ((bounds.height / 2) - ((tileDefaultSize * 2) / 2) + (padding * 2)) :\n            position.y - ((y * totalSize) / 100);\n    };\n    Zoom.prototype.performRectZooming = function () {\n        this.isDragZoom = true;\n        var map = this.maps;\n        var size = map.availableSize;\n        map.previousProjection = map.projectionType;\n        var prevLevel = map.tileZoomLevel;\n        var prevTilePoint = map.tileTranslatePoint;\n        var zoomRect = this.zoomingRect;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        var isZoomCancelled;\n        if (zoomRect.height > 0 && zoomRect.width > 0) {\n            var x = this.zoomingRect.x + (this.zoomingRect.width / 2);\n            var y = this.zoomingRect.y + (this.zoomingRect.height / 2);\n            var zoomCalculationFactor = void 0;\n            if (!map.isTileMap) {\n                var scale = map.previousScale = map.scale;\n                zoomCalculationFactor = scale + Math.round((((size.width / zoomRect.width) + (size.height / zoomRect.height)) / 2));\n                var translatePoint = map.previousPoint = map.translatePoint;\n                var translatePointX = translatePoint.x - (((size.width / scale) - (size.width / zoomCalculationFactor)) / (size.width / x));\n                var translatePointY = translatePoint.y - (((size.height / scale) - (size.height / zoomCalculationFactor)) / (size.height / y));\n                map.translatePoint = new Point(translatePointX, translatePointY);\n                map.scale = zoomCalculationFactor;\n                isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n                if (isZoomCancelled) {\n                    map.translatePoint = map.previousPoint;\n                    map.scale = map.previousScale;\n                }\n            }\n            else {\n                zoomCalculationFactor = prevLevel + (Math.round(prevLevel + (((size.width / zoomRect.width) + (size.height / zoomRect.height)) / 2)));\n                zoomCalculationFactor = (zoomCalculationFactor >= minZoom && zoomCalculationFactor <= maxZoom) ? zoomCalculationFactor : maxZoom;\n                map.zoomSettings.zoomFactor = zoomCalculationFactor;\n                this.getTileTranslatePosition(prevLevel, zoomCalculationFactor, { x: x, y: y });\n                map.tileZoomLevel = zoomCalculationFactor;\n                map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * Math.pow(2, zoomCalculationFactor))) /\n                    (Math.pow(2, zoomCalculationFactor));\n                map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * Math.pow(2, zoomCalculationFactor))) /\n                    (Math.pow(2, zoomCalculationFactor));\n                map.scale = (Math.pow(2, zoomCalculationFactor));\n                isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n                if (isZoomCancelled) {\n                    map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n                    map.scale = map.tileZoomLevel = map.zoomSettings.zoomFactor = prevLevel;\n                }\n                else {\n                    map.mapLayerPanel.generateTiles(zoomCalculationFactor, map.tileTranslatePoint);\n                }\n            }\n            if (!isZoomCancelled) {\n                map.mapScaleValue = zoomCalculationFactor;\n                this.applyTransform(map, true);\n                this.maps.zoomNotApplied = false;\n                this.zoomingRect = null;\n            }\n        }\n    };\n    Zoom.prototype.setInteraction = function (newInteraction) {\n        this.lastScale = 1;\n        this.interaction = newInteraction;\n    };\n    Zoom.prototype.updateInteraction = function () {\n        if (this.fingers === 2) {\n            this.setInteraction('zoom');\n        }\n        else {\n            this.setInteraction(null);\n        }\n    };\n    Zoom.prototype.performPinchZooming = function (e) {\n        var map = this.maps;\n        var prevLevel = map.tileZoomLevel;\n        var availSize = map.mapAreaRect;\n        map.previousScale = map.scale;\n        map.previousPoint = map.translatePoint;\n        var prevTilePoint = map.tileTranslatePoint;\n        var scale = calculateScale(this.touchStartList, this.touchMoveList);\n        var touchCenter = getTouchCenter(getTouches(this.touchMoveList, this.maps));\n        var newScale = scale / this.lastScale;\n        this.lastScale = scale;\n        this.pinchFactor *= newScale;\n        this.pinchFactor = Math.min(this.maps.zoomSettings.maxZoom, Math.max(this.pinchFactor, this.maps.zoomSettings.minZoom));\n        var zoomCalculationFactor = this.pinchFactor;\n        var zoomArgs;\n        var isZoomCancelled;\n        if (!map.isTileMap) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var minBounds = map.baseMapRectBounds['min'];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var maxBounds = map.baseMapRectBounds['max'];\n            var mapTotalHeight = Math.abs(minBounds['y'] - maxBounds['y']);\n            var mapTotalWidth = Math.abs(minBounds['x'] - maxBounds['x']);\n            var translatePoint = map.translatePoint;\n            var translatePointX = void 0;\n            var translatePointY = void 0;\n            if (zoomCalculationFactor < 1.2 && map.projectionType !== 'Eckert5') {\n                if (mapTotalWidth === 0 || mapTotalHeight === 0 || mapTotalWidth === mapTotalHeight) {\n                    mapTotalWidth = availSize.width / 2;\n                    mapTotalHeight = availSize.height;\n                }\n                zoomCalculationFactor = parseFloat(Math.min(availSize.width / mapTotalWidth, availSize.height / mapTotalHeight).toFixed(2));\n                zoomCalculationFactor = zoomCalculationFactor > 1.05 ? 1 : zoomCalculationFactor;\n                map.translatePoint = this.calculateInitalZoomTranslatePoint(zoomCalculationFactor, mapTotalWidth, mapTotalHeight, availSize, minBounds, map);\n            }\n            else {\n                var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomCalculationFactor;\n                translatePointX = translatePoint.x - (((availSize.width / map.scale) - (availSize.width / zoomCalculationFactor)) / (availSize.width / touchCenter.x));\n                translatePointY = translatePoint.y - (((availSize.height / map.scale) - (availSize.height / zoomCalculationFactor)) / (availSize.height / touchCenter.y));\n                translatePointX = (currentHeight < map.mapAreaRect.height) ? (availSize.x + ((-(minBounds['x'])) + ((availSize.width / 2) - (mapTotalWidth / 2)))) : translatePointX;\n                translatePointY = (currentHeight < map.mapAreaRect.height) ? (availSize.y + ((-(minBounds['y'])) + ((availSize.height / 2) - (mapTotalHeight / 2)))) : translatePointY;\n                map.translatePoint = new Point(translatePointX, translatePointY);\n            }\n            map.scale = zoomCalculationFactor;\n            isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n            if (isZoomCancelled) {\n                map.translatePoint = map.previousPoint;\n                map.scale = map.previousScale;\n            }\n        }\n        else {\n            var newTileFactor = zoomCalculationFactor;\n            this.getTileTranslatePosition(prevLevel, newTileFactor, { x: touchCenter.x, y: touchCenter.y });\n            map.tileZoomLevel = newTileFactor;\n            map.translatePoint.x = (map.tileTranslatePoint.x - (0.5 * Math.pow(2, newTileFactor))) /\n                (Math.pow(2, newTileFactor));\n            map.translatePoint.y = (map.tileTranslatePoint.y - (0.5 * Math.pow(2, newTileFactor))) /\n                (Math.pow(2, newTileFactor));\n            map.scale = (Math.pow(2, newTileFactor));\n            isZoomCancelled = this.triggerZoomEvent(prevTilePoint, prevLevel, '');\n            if (isZoomCancelled) {\n                map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n                map.scale = map.previousScale;\n                map.tileZoomLevel = prevLevel;\n                map.zoomSettings.zoomFactor = map.previousScale;\n            }\n            else {\n                map.mapLayerPanel.generateTiles(newTileFactor, map.tileTranslatePoint);\n            }\n        }\n        if (!isZoomCancelled) {\n            this.applyTransform(map);\n        }\n    };\n    Zoom.prototype.drawZoomRectangle = function () {\n        var map = this.maps;\n        var down = this.mouseDownPoints;\n        var move = this.mouseMovePoints;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var border = { width: 1, color: '#009900' };\n        var width = Math.abs(move.x - down.x);\n        var height = Math.abs(move.y - down.y);\n        var x = ((move.x > down.x) ? down.x : down.x - width);\n        var y = ((move.y > down.y) ? down.y : down.y - height);\n        var elementRect = getElementByID(map.element.id).getBoundingClientRect();\n        if ((x > map.mapAreaRect.x && x < (map.mapAreaRect.x + map.mapAreaRect.width)) &&\n            (y > map.mapAreaRect.y) && (y < map.mapAreaRect.y + map.mapAreaRect.height)) {\n            this.zoomingRect = new Rect(x, y, width, height);\n            var rectSVGObject = map.renderer.createSvg({\n                id: map.element.id + '_Selection_Rect_Zooming',\n                width: map.availableSize.width,\n                height: map.availableSize.height\n            });\n            var rectOption = new RectOption(map.element.id + '_ZoomRect', '#d3d3d3', border, 0.5, this.zoomingRect, 0, 0, '', '3');\n            rectSVGObject.appendChild(map.renderer.drawRectangle(rectOption));\n            getElementByID(map.element.id + '_Secondary_Element').appendChild(rectSVGObject);\n        }\n    };\n    /**\n     * To animate the zooming process\n     *\n     * @param {Element} element - Specifies the element\n     * @param {boolean} animate - Specifies the boolean value\n     * @param {number} x - Specifies the x value\n     * @param {number} y - Specifies the y value\n     * @param {number} scale - Specifies the scale value\n     * @returns {void}\n     */\n    Zoom.prototype.animateTransform = function (element, animate, x, y, scale) {\n        var duration = this.currentLayer.animationDuration;\n        if (!animate || duration === 0 || this.maps.isTileMap) {\n            element.setAttribute('transform', 'scale(' + (scale) + ') translate( ' + x + ' ' + y + ' )');\n            return;\n        }\n        if (!this.maps.isTileMap) {\n            zoomAnimate(element, 0, duration, new MapLocation(x, y), scale, this.maps.mapAreaRect, this.maps);\n        }\n    };\n    Zoom.prototype.applyTransform = function (maps, animate) {\n        var layerIndex;\n        this.templateCount = 0;\n        var layer;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var zoomshapelocation;\n        var i;\n        var markerStyle;\n        var scale = maps.scale;\n        var x = maps.translatePoint.x;\n        var y = maps.translatePoint.y;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var collection = [];\n        maps.zoomShapeCollection = [];\n        if (document.getElementById(maps.element.id + '_mapsTooltip')) {\n            removeElement(maps.element.id + '_mapsTooltip');\n        }\n        if (this.layerCollectionEle) {\n            for (var i_1 = 0; i_1 < this.layerCollectionEle.childElementCount; i_1++) {\n                var layerElement = this.layerCollectionEle.childNodes[i_1];\n                if (layerElement.tagName === 'g') {\n                    this.templateCount++;\n                    this.index = layerElement.id.indexOf('_LayerIndex_') > -1 && parseFloat(layerElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                    this.currentLayer = maps.layersCollection[this.index];\n                    var factor = maps.mapLayerPanel.calculateFactor(this.currentLayer);\n                    for (var j = 0; j < layerElement.childElementCount; j++) {\n                        var currentEle = layerElement.childNodes[j];\n                        if (!(currentEle.id.indexOf('_Markers_Group') > -1) && (!(currentEle.id.indexOf('_bubble_Group') > -1))\n                            && (!(currentEle.id.indexOf('_dataLableIndex_Group') > -1))) {\n                            if (maps.isTileMap && (currentEle.id.indexOf('_line_Group') > -1)) {\n                                currentEle.remove();\n                                if (layerElement.children.length > 0 && layerElement.children[0]) {\n                                    layerElement.insertBefore(maps.navigationLineModule.renderNavigation(this.currentLayer, maps.tileZoomLevel, this.index), layerElement.children[1]);\n                                }\n                                else {\n                                    layerElement.appendChild(maps.navigationLineModule.renderNavigation(this.currentLayer, maps.tileZoomLevel, this.index));\n                                }\n                            }\n                            else if (currentEle.id.indexOf('Legend') == -1) {\n                                changeBorderWidth(currentEle, this.index, scale, maps);\n                                maps.zoomTranslatePoint = maps.translatePoint;\n                                this.animateTransform(currentEle, animate, x, y, scale);\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_Markers_Group') > -1) {\n                            if (!this.isPanning && !isNullOrUndefined(currentEle.childNodes[0])) {\n                                this.markerTranslates(currentEle.childNodes[0], factor, x, y, scale, 'Marker', layerElement, animate);\n                            }\n                            currentEle = layerElement.childNodes[j];\n                            var markerAnimation = void 0;\n                            if (!isNullOrUndefined(currentEle) && currentEle.id.indexOf('Markers') !== -1) {\n                                for (var k = 0; k < currentEle.childElementCount; k++) {\n                                    this.markerTranslate(currentEle.childNodes[k], factor, x, y, scale, 'Marker', animate);\n                                    var layerIndex_1 = parseInt(currentEle.childNodes[k]['id'].split('_LayerIndex_')[1].split('_')[0], 10);\n                                    var dataIndex = parseInt(currentEle.childNodes[k]['id'].split('_dataIndex_')[1].split('_')[0], 10);\n                                    var markerIndex = parseInt(currentEle.childNodes[k]['id'].split('_MarkerIndex_')[1].split('_')[0], 10);\n                                    markerAnimation = this.currentLayer.markerSettings[markerIndex].animationDuration > 0;\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    var markerSelectionValues = this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex];\n                                    for (var x_1 = 0; x_1 < this.currentLayer.markerSettings[markerIndex].initialMarkerSelection.length; x_1++) {\n                                        if (this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['latitude'] ===\n                                            markerSelectionValues['latitude'] ||\n                                            this.currentLayer.markerSettings[markerIndex].initialMarkerSelection[x_1]['longitude'] ===\n                                                markerSelectionValues['longitude']) {\n                                            maps.markerSelection(this.currentLayer.markerSettings[markerIndex].selectionSettings, maps, currentEle.children[k], this.currentLayer.markerSettings[markerIndex].dataSource[dataIndex]);\n                                        }\n                                    }\n                                    if ((this.currentLayer.animationDuration > 0 || (maps.layersCollection[0].animationDuration > 0 && this.currentLayer.type === 'SubLayer')) && !this.isPanning) {\n                                        if (maps.isTileMap) {\n                                            var groupElement = document.querySelector('.GroupElement');\n                                            if (groupElement && !(document.querySelector('.ClusterGroupElement')) && markerAnimation) {\n                                                groupElement.style.display = 'none';\n                                            }\n                                        }\n                                        else {\n                                            markerStyle = 'visibility:hidden';\n                                            currentEle.setAttribute('style', markerStyle);\n                                        }\n                                    }\n                                }\n                                if (this.isPanning && maps.markerModule.sameMarkerData.length > 0) {\n                                    clusterSeparate(maps.markerModule.sameMarkerData, maps, currentEle, true);\n                                }\n                                else if (maps.markerModule.sameMarkerData.length > 0) {\n                                    maps.markerModule.sameMarkerData = [];\n                                    if (document.getElementById(maps.element.id + '_mapsTooltip')) {\n                                        removeElement(maps.element.id + '_mapsTooltip');\n                                    }\n                                }\n                                if (document.getElementById(maps.element.id + '_mapsTooltip') && maps.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_')\n                                    && !this.isPanning) {\n                                    var mapsTooltip = maps.mapsTooltipModule;\n                                    var tooltipElement = currentEle.querySelector('#' + mapsTooltip.tooltipTargetID);\n                                    if (!isNullOrUndefined(tooltipElement)) {\n                                        if (tooltipElement['style']['visibility'] === 'hidden') {\n                                            removeElement(maps.element.id + '_mapsTooltip');\n                                        }\n                                        else {\n                                            var x_2 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[1]);\n                                            var y_1 = parseFloat(tooltipElement.getAttribute('transform').split('(')[1].split(')')[0].split(' ')[2]);\n                                            if (maps.isTileMap) {\n                                                x_2 += +getElement(maps.element.id + '_tile_parent')['style']['left'].split('px')[0];\n                                                y_1 += +getElement(maps.element.id + '_tile_parent')['style']['top'].split('px')[0];\n                                            }\n                                            mapsTooltip.svgTooltip.location.x = x_2;\n                                            mapsTooltip.svgTooltip.location.y = y_1;\n                                            mapsTooltip.svgTooltip.enableAnimation = false;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_bubble_Group') > -1) {\n                            var childElement = void 0;\n                            for (var k = 0; k < currentEle.childElementCount; k++) {\n                                childElement = currentEle.childNodes[k];\n                                var bubbleTransform = childElement.getAttribute('transform');\n                                layerIndex = parseFloat(childElement.id.split('_LayerIndex_')[1].split('_')[0]);\n                                var bubleIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[0]);\n                                var dataIndex = parseFloat(childElement.id.split('_BubbleIndex_')[1].split('_')[2]);\n                                for (var l = 0; l < maps.bubbleModule.bubbleCollection.length; l++) {\n                                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                    var bubbleCollection = maps.bubbleModule.bubbleCollection[l];\n                                    if (bubbleCollection['LayerIndex'] === layerIndex && bubbleCollection['BubbleIndex'] === bubleIndex &&\n                                        bubbleCollection['DataIndex'] === dataIndex) {\n                                        var centerX = bubbleCollection['center']['x'];\n                                        var centerY = bubbleCollection['center']['y'];\n                                        var currentX = ((centerX + x) * scale);\n                                        var currentY = ((centerY + y) * scale);\n                                        var duration = this.currentLayer.animationDuration;\n                                        if (!animate || duration === 0) {\n                                            childElement.setAttribute('transform', 'translate( ' + currentX + ' ' + currentY + ' )');\n                                        }\n                                        else {\n                                            smoothTranslate(childElement, 0, duration, new MapLocation(currentX, currentY));\n                                        }\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        else if (currentEle.id.indexOf('_dataLableIndex_Group') > -1 && !isNullOrUndefined(maps.layers[this.index])) {\n                            this.intersect = [];\n                            maps.zoomLabelPositions = [];\n                            maps.zoomLabelPositions = maps.dataLabelModule.dataLabelCollections;\n                            var labelAnimate = !maps.isTileMap && animate;\n                            for (var k = 0; k < currentEle.childElementCount; k++) {\n                                if (currentEle.childNodes[k]['id'].indexOf('_LabelIndex_') > -1) {\n                                    var labelIndex = parseFloat(currentEle.childNodes[k]['id'].split('_LabelIndex_')[1].split('_')[0]);\n                                    this.zoomshapewidth = currentEle.childNodes[k].getBoundingClientRect();\n                                    maps.zoomShapeCollection.push(this.zoomshapewidth);\n                                    this.dataLabelTranslate(currentEle.childNodes[k], factor, x, y, scale, 'DataLabel', labelAnimate);\n                                    var dataLabel = maps.layers[this.index].dataLabelSettings;\n                                    var border = dataLabel.border;\n                                    if (k > 0 && border['width'] > 1) {\n                                        if (currentEle.childNodes[k - 1]['id'].indexOf('_rectIndex_') > -1 && !isNullOrUndefined(maps.zoomLabelPositions[labelIndex])) {\n                                            var labelX = ((maps.zoomLabelPositions[labelIndex]['location']['x'] + x) * scale);\n                                            var labelY = ((maps.zoomLabelPositions[labelIndex]['location']['y'] + y) * scale);\n                                            var zoomtext = currentEle.childNodes[k]['innerHTML'];\n                                            var style = maps.layers[this.index].dataLabelSettings.textStyle;\n                                            var zoomtextSize = measureText(zoomtext, style);\n                                            var padding = 5;\n                                            var rectElement = currentEle.childNodes[k - 1];\n                                            var rectX = labelX - zoomtextSize['width'] / 2;\n                                            var rectY = labelY - zoomtextSize['height'] / 2 - padding;\n                                            rectElement['setAttribute']('x', rectX);\n                                            rectElement['setAttribute']('y', rectY);\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n                maps.arrangeTemplate();\n            }\n            if (!isNullOrUndefined(this.currentLayer)) {\n                if (!animate || this.currentLayer.animationDuration === 0 || maps.isTileMap) {\n                    this.processTemplate(x, y, scale, maps);\n                }\n            }\n        }\n    };\n    Zoom.prototype.markerTranslates = function (element, factor, x, y, scale, type, layerElement, animate) {\n        var _this = this;\n        if (animate === void 0) { animate = false; }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var templateFn;\n        var nullCount = 0;\n        var markerCounts = 0;\n        var markerTemplateCounts = 0;\n        var layerIndex = parseInt((element ? element : layerElement).id.split('_LayerIndex_')[1].split('_')[0], 10);\n        var markerSVGObject = this.maps.renderer.createGroup({\n            id: this.maps.element.id + '_Markers_Group',\n            class: 'GroupElement',\n            style: 'pointer-events: auto;'\n        });\n        if (document.getElementById(markerSVGObject.id)) {\n            removeElement(markerSVGObject.id);\n        }\n        var mapsAreaRect = this.maps.mapAreaRect;\n        var markerTemplateElements = createElement('div', {\n            id: this.maps.element.id + '_LayerIndex_' + layerIndex + '_Markers_Template_Group',\n            className: 'template',\n            styles: 'overflow: hidden; position: absolute;pointer-events: none;' +\n                'top:' + mapsAreaRect.y + 'px;' +\n                'left:' + mapsAreaRect.x + 'px;' +\n                'height:' + mapsAreaRect.height + 'px;' +\n                'width:' + mapsAreaRect.width + 'px;'\n        });\n        if (document.getElementById(markerTemplateElements.id)) {\n            removeElement(markerTemplateElements.id);\n        }\n        var currentLayers = this.maps.layersCollection[layerIndex];\n        currentLayers.markerSettings.map(function (markerSettings, markerIndex) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var markerDatas = markerSettings.dataSource;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            Array.prototype.forEach.call(markerDatas, function (data, dataIndex) {\n                _this.maps.markerNullCount = markerIndex >= 0 && dataIndex === 0 ? 0 : _this.maps.markerNullCount;\n                var eventArgs = {\n                    template: markerSettings.template, data: data, maps: _this.maps, marker: markerSettings,\n                    cancel: false, name: markerRendering, fill: markerSettings.fill, colorValuePath: markerSettings.colorValuePath,\n                    shapeValuePath: markerSettings.shapeValuePath, height: markerSettings.height,\n                    width: markerSettings.width, imageUrl: markerSettings.imageUrl, imageUrlValuePath: markerSettings.imageUrlValuePath, shape: markerSettings.shape,\n                    border: markerSettings.border\n                };\n                eventArgs = markerShapeChoose(eventArgs, data);\n                eventArgs = markerColorChoose(eventArgs, data);\n                _this.maps.trigger('markerRendering', eventArgs, function (MarkerArgs) {\n                    if (markerSettings.shapeValuePath !== eventArgs.shapeValuePath) {\n                        eventArgs = markerShapeChoose(eventArgs, data);\n                    }\n                    if (markerSettings.colorValuePath !== eventArgs.colorValuePath) {\n                        eventArgs = markerColorChoose(eventArgs, data);\n                    }\n                    var lati = (!isNullOrUndefined(markerSettings.latitudeValuePath)) ?\n                        Number(getValueFromObject(data, markerSettings.latitudeValuePath)) : !isNullOrUndefined(data['latitude']) ?\n                        parseFloat(data['latitude']) : !isNullOrUndefined(data['Latitude']) ? data['Latitude'] : null;\n                    var long = (!isNullOrUndefined(markerSettings.longitudeValuePath)) ?\n                        Number(getValueFromObject(data, markerSettings.longitudeValuePath)) : !isNullOrUndefined(data['longitude']) ?\n                        parseFloat(data['longitude']) : !isNullOrUndefined(data['Longitude']) ? data['Longitude'] : null;\n                    var offset = markerSettings.offset;\n                    if (!eventArgs.cancel && markerSettings.visible && !isNullOrUndefined(long) && !isNullOrUndefined(lati)) {\n                        var markerID = _this.maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_'\n                            + markerIndex + '_dataIndex_' + dataIndex;\n                        var location_1 = (_this.maps.isTileMap) ? convertTileLatLongToPoint(new MapLocation(long, lati), _this.maps.tileZoomLevel, _this.maps.tileTranslatePoint, true) : convertGeoToPoint(lati, long, factor, currentLayers, _this.maps);\n                        var animate_1 = currentLayers.animationDuration !== 0 || isNullOrUndefined(_this.maps.zoomModule);\n                        var transPoint = { x: x, y: y };\n                        if (eventArgs.template && (!isNaN(location_1.x) && !isNaN(location_1.y))) {\n                            markerTemplateCounts++;\n                            markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplateElements, location_1, transPoint, scale, offset, _this.maps);\n                        }\n                        else if (!eventArgs.template && (!isNaN(location_1.x) && !isNaN(location_1.y))) {\n                            markerCounts++;\n                            marker(eventArgs, markerSettings, markerDatas, dataIndex, location_1, transPoint, markerID, offset, scale, _this.maps, markerSVGObject);\n                        }\n                    }\n                    nullCount += (!isNaN(lati) && !isNaN(long)) ? 0 : 1;\n                    markerTemplateCounts += (eventArgs.cancel) ? 1 : 0;\n                    markerCounts += (eventArgs.cancel) ? 1 : 0;\n                    _this.maps.markerNullCount = (isNullOrUndefined(lati) || isNullOrUndefined(long))\n                        ? _this.maps.markerNullCount + 1 : _this.maps.markerNullCount;\n                    var markerDataLength = markerDatas.length - _this.maps.markerNullCount;\n                    if (markerSVGObject.childElementCount === (markerDataLength - markerTemplateCounts - nullCount) && (type !== 'Template')) {\n                        layerElement.appendChild(markerSVGObject);\n                        if (currentLayers.markerClusterSettings.allowClustering) {\n                            _this.maps.svgObject.appendChild(markerSVGObject);\n                            _this.maps.element.appendChild(_this.maps.svgObject);\n                            clusterTemplate(currentLayers, markerSVGObject, _this.maps, layerIndex, markerSVGObject, layerElement, true, true);\n                        }\n                    }\n                    if (markerTemplateElements.childElementCount === (markerDataLength - markerCounts - nullCount) && getElementByID(_this.maps.element.id + '_Secondary_Element')) {\n                        getElementByID(_this.maps.element.id + '_Secondary_Element').appendChild(markerTemplateElements);\n                        if (scale >= 1) {\n                            if (currentLayers.markerClusterSettings.allowClustering) {\n                                clusterTemplate(currentLayers, markerTemplateElements, _this.maps, layerIndex, markerSVGObject, layerElement, false, true);\n                            }\n                        }\n                    }\n                });\n            });\n        });\n    };\n    /**\n     * To translate the layer template elements\n     *\n     * @param {number} x - Specifies the x value\n     * @param {number} y - Specifies the y value\n     * @param {number} scale - Specifies the scale value\n     * @param {Maps} maps - Specifies the maps value\n     * @returns {void}\n     * @private\n     */\n    Zoom.prototype.processTemplate = function (x, y, scale, maps) {\n        for (var i = 0; i < this.templateCount; i++) {\n            var factor = maps.mapLayerPanel.calculateFactor(this.currentLayer);\n            var markerTemplateElement = getElementByID(maps.element.id + '_LayerIndex_' +\n                i + '_Markers_Template_Group');\n            var datalabelTemplateElemement = getElementByID(maps.element.id + '_LayerIndex_'\n                + i + '_Label_Template_Group');\n            if ((!isNullOrUndefined(markerTemplateElement)) && markerTemplateElement.childElementCount > 0) {\n                for (var k = 0; k < markerTemplateElement.childElementCount; k++) {\n                    this.markerTranslate(markerTemplateElement.childNodes[k], factor, x, y, scale, 'Template');\n                }\n            }\n            if ((!isNullOrUndefined(datalabelTemplateElemement)) && datalabelTemplateElemement.childElementCount > 0) {\n                for (var k = 0; k < datalabelTemplateElemement.childElementCount; k++) {\n                    this.dataLabelTranslate(datalabelTemplateElemement.childNodes[k], factor, x, y, scale, 'Template');\n                }\n            }\n        }\n    };\n    Zoom.prototype.dataLabelTranslate = function (element, factor, x, y, scale, type, animate) {\n        if (animate === void 0) { animate = false; }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var labelCollection = this.maps.dataLabelModule.dataLabelCollections;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var zoomelement = element.getBoundingClientRect();\n        var text;\n        var trimmedLable;\n        var style = this.maps.layers[this.index].dataLabelSettings.textStyle;\n        var zoomtext;\n        var zoomtextSize;\n        var zoomtrimLabel;\n        var labelPath = this.maps.layers[this.index].dataLabelSettings.labelPath;\n        var layerIndex = parseFloat(element.id.split('_LayerIndex_')[1].split('_')[0]);\n        var shapeIndex = parseFloat(element.id.split('_shapeIndex_')[1].split('_')[0]);\n        var labelIndex;\n        if (element.id.indexOf('_LabelIndex_') > -1) {\n            labelIndex = parseFloat(element.id.split('_LabelIndex_')[1].split('_')[0]);\n        }\n        var duration = this.currentLayer.animationDuration;\n        for (var l = 0; l < labelCollection.length; l++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var label = labelCollection[l];\n            if (label['layerIndex'] === layerIndex && label['shapeIndex'] === shapeIndex\n                && label['labelIndex'] === labelIndex) {\n                var labelX = label['location']['x'];\n                var labelY = label['location']['y'];\n                if (type === 'Template') {\n                    var layerEle = getElementByID(this.maps.element.id + '_Layer_Collections');\n                    labelX = ((Math.abs(this.maps.baseMapRectBounds['min']['x'] - labelX)) * scale);\n                    labelY = ((Math.abs(this.maps.baseMapRectBounds['min']['y'] - labelY)) * scale);\n                    var templateOffset = element.getBoundingClientRect();\n                    var layerOffset = layerEle.getBoundingClientRect();\n                    var elementOffset = element.parentElement.getBoundingClientRect();\n                    var x_3 = ((labelX) + (layerOffset.left - elementOffset.left) - (templateOffset.width / 2));\n                    var y_2 = ((labelY) + (layerOffset.top - elementOffset.top) - (templateOffset.height / 2));\n                    element.style.left = x_3 + 'px';\n                    element.style.top = y_2 + 'px';\n                }\n                else {\n                    labelX = ((labelX + x) * scale);\n                    labelY = ((labelY + y) * scale);\n                    zoomtext = label['dataLabelText'];\n                    zoomtextSize = measureText(zoomtext, style);\n                    var start = labelY - zoomtextSize['height'] / 4;\n                    var end = labelY + zoomtextSize['height'] / 4;\n                    var xpositionEnds = labelX + zoomtextSize['width'] / 2;\n                    var xpositionStart = labelX - zoomtextSize['width'] / 2;\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    var textLocations = { rightWidth: xpositionEnds, leftWidth: xpositionStart, heightTop: start, heightBottom: end };\n                    if (!animate || duration === 0) {\n                        element.setAttribute('transform', 'translate( ' + labelX + ' ' + labelY + ' )');\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Hide') {\n                        if (scale > 1) {\n                            text = ((this.maps.dataLabelShape[l] * scale) >= zoomtextSize['width']) ? zoomtext : '';\n                            element.innerHTML = text;\n                        }\n                        else {\n                            text = (this.maps.dataLabelShape[l] >= zoomtextSize['width']) ? zoomtext : '';\n                            element.innerHTML = text;\n                        }\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.smartLabelMode === 'Trim') {\n                        if (scale > 1) {\n                            zoomtrimLabel = textTrim((this.maps.dataLabelShape[l] * scale), zoomtext, style);\n                            text = zoomtrimLabel;\n                            element.innerHTML = text;\n                        }\n                        else {\n                            zoomtrimLabel = textTrim(this.maps.dataLabelShape[l], zoomtext, style);\n                            text = zoomtrimLabel;\n                            element.innerHTML = text;\n                        }\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Hide') {\n                        for (var m = 0; m < this.intersect.length; m++) {\n                            if (!isNullOrUndefined(this.intersect[m])) {\n                                if (textLocations['leftWidth'] > this.intersect[m]['rightWidth']\n                                    || textLocations['rightWidth'] < this.intersect[m]['leftWidth']\n                                    || textLocations['heightTop'] > this.intersect[m]['heightBottom']\n                                    || textLocations['heightBottom'] < this.intersect[m]['heightTop']) {\n                                    text = !isNullOrUndefined(text) ? text : zoomtext;\n                                    element.innerHTML = text;\n                                }\n                                else {\n                                    text = '';\n                                    element.innerHTML = text;\n                                    break;\n                                }\n                            }\n                        }\n                        this.intersect.push(textLocations);\n                    }\n                    if (this.maps.layers[this.index].dataLabelSettings.intersectionAction === 'Trim') {\n                        for (var j = 0; j < this.intersect.length; j++) {\n                            if (!isNullOrUndefined(this.intersect[j])) {\n                                if (textLocations['rightWidth'] < this.intersect[j]['leftWidth']\n                                    || textLocations['leftWidth'] > this.intersect[j]['rightWidth']\n                                    || textLocations['heightBottom'] < this.intersect[j]['heightTop']\n                                    || textLocations['heightTop'] > this.intersect[j]['heightBottom']) {\n                                    trimmedLable = !isNullOrUndefined(text) ? text : zoomtext;\n                                    if (scale > 1) {\n                                        trimmedLable = textTrim((this.maps.dataLabelShape[l] * scale), trimmedLable, style);\n                                    }\n                                    element.innerHTML = trimmedLable;\n                                }\n                                else {\n                                    if (textLocations['leftWidth'] > this.intersect[j]['leftWidth']) {\n                                        var width = this.intersect[j]['rightWidth'] - textLocations['leftWidth'];\n                                        var difference = width - (textLocations['rightWidth'] - textLocations['leftWidth']);\n                                        text = !isNullOrUndefined(text) ? text : zoomtext;\n                                        trimmedLable = textTrim(difference, text, style);\n                                        element.innerHTML = trimmedLable;\n                                        break;\n                                    }\n                                    if (textLocations['leftWidth'] < this.intersect[j]['leftWidth']) {\n                                        var width = textLocations['rightWidth'] - this.intersect[j]['leftWidth'];\n                                        var difference = Math.abs(width - (textLocations['rightWidth'] - textLocations['leftWidth']));\n                                        text = !isNullOrUndefined(text) ? text : zoomtext;\n                                        trimmedLable = textTrim(difference, text, style);\n                                        element.innerHTML = trimmedLable;\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        this.intersect.push(textLocations);\n                        if (isNullOrUndefined(trimmedLable)) {\n                            trimmedLable = textTrim((this.maps.dataLabelShape[l] * scale), zoomtext, style);\n                            element.innerHTML = trimmedLable;\n                        }\n                    }\n                    if (animate || duration > 0) {\n                        smoothTranslate(element, 0, duration, new MapLocation(labelX, labelY));\n                    }\n                }\n            }\n        }\n    };\n    Zoom.prototype.markerTranslate = function (element, factor, x, y, scale, type, animate) {\n        if (animate === void 0) { animate = false; }\n        var layerIndex = parseInt(element.id.split('_LayerIndex_')[1].split('_')[0], 10);\n        var markerIndex = parseInt(element.id.split('_MarkerIndex_')[1].split('_')[0], 10);\n        var dataIndex = parseInt(element.id.split('_dataIndex_')[1].split('_')[0], 10);\n        var layer = this.maps.layersCollection[layerIndex];\n        var marker = layer.markerSettings[markerIndex];\n        if (!isNullOrUndefined(marker) && !isNullOrUndefined(marker.dataSource) && !isNullOrUndefined(marker.dataSource[dataIndex])) {\n            var lng = (!isNullOrUndefined(marker.longitudeValuePath)) ?\n                Number(getValueFromObject(marker.dataSource[dataIndex], marker.longitudeValuePath)) :\n                !isNullOrUndefined(marker.dataSource[dataIndex]['longitude']) ? parseFloat(marker.dataSource[dataIndex]['longitude']) :\n                    !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n            var lat = (!isNullOrUndefined(marker.latitudeValuePath)) ?\n                Number(getValueFromObject(marker.dataSource[dataIndex], marker.latitudeValuePath)) :\n                !isNullOrUndefined(marker.dataSource[dataIndex]['latitude']) ? parseFloat(marker.dataSource[dataIndex]['latitude']) :\n                    !isNullOrUndefined(marker.dataSource[dataIndex]['Latitude']) ? parseFloat(marker.dataSource[dataIndex]['Latitude']) : 0;\n            var duration = this.currentLayer.animationDuration;\n            var location_2 = (this.maps.isTileMap) ? convertTileLatLongToPoint(new Point(lng, lat), this.maps.tileZoomLevel, this.maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, layer, this.maps);\n            if (this.maps.isTileMap) {\n                if (type === 'Template') {\n                    var templateOffset = element.getBoundingClientRect();\n                    element.style.left = ((location_2.x - (templateOffset.width / 2)) + marker.offset.x) + 'px';\n                    element.style.top = ((location_2.y - (templateOffset.height / 2)) + marker.offset.y) + 'px';\n                    if (this.maps.layers[this.maps.baseLayerIndex].layerType === 'GoogleStaticMap') {\n                        var staticMapOffset = getElementByID(this.maps.element.id + '_StaticGoogleMap').getBoundingClientRect();\n                        var staticMapOffsetWidth = 640;\n                        if (element['style']['display'] !== 'none') {\n                            if ((staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width'])\n                                && (staticMapOffset['y'] > templateOffset['y'] || staticMapOffset['y'] + staticMapOffset['height'] < templateOffset['y'] + templateOffset['height'])) {\n                                element['style']['display'] = 'none';\n                            }\n                            else if ((staticMapOffset['x'] > templateOffset['x'] || staticMapOffset['x'] + staticMapOffsetWidth < templateOffset['x'] + templateOffset['width'])) {\n                                element['style']['display'] = 'none';\n                            }\n                        }\n                    }\n                }\n                else {\n                    location_2.x += marker.offset.x;\n                    location_2.y += marker.offset.y;\n                    element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n                }\n            }\n            else {\n                if (type === 'Template') {\n                    if (duration > 0) {\n                        location_2.x = ((Math.abs(this.maps.baseMapRectBounds['min']['x'] - location_2.x)) * scale);\n                        location_2.y = ((Math.abs(this.maps.baseMapRectBounds['min']['y'] - location_2.y)) * scale);\n                        var layerOffset = getElementByID(this.maps.element.id + '_Layer_Collections').getBoundingClientRect();\n                        var elementOffset = element.parentElement.getBoundingClientRect();\n                        element.style.left = (((location_2.x) + (layerOffset.left - elementOffset.left)) + marker.offset.x) + 'px';\n                        element.style.top = (((location_2.y) + (layerOffset.top - elementOffset.top)) + marker.offset.y) + 'px';\n                        element.style.transform = 'translate(-50%, -50%)';\n                    }\n                    else {\n                        var elementOffset = element.getBoundingClientRect();\n                        element.style.left = ((location_2.x + x) * scale) + marker.offset.x - this.maps.mapAreaRect.x - (elementOffset.width / 2) + 'px';\n                        element.style.top = ((location_2.y + y) * scale) + marker.offset.y - this.maps.mapAreaRect.y - (elementOffset.height / 2) + 'px';\n                    }\n                }\n                else {\n                    location_2.x = (((location_2.x + x) * scale) + marker.offset.x);\n                    location_2.y = (((location_2.y + y) * scale) + marker.offset.y);\n                    if (!animate || duration === 0) {\n                        element.setAttribute('transform', 'translate( ' + location_2.x + ' ' + location_2.y + ' )');\n                    }\n                    else {\n                        smoothTranslate(element, 0, duration, location_2);\n                    }\n                }\n            }\n        }\n    };\n    Zoom.prototype.markerLineAnimation = function (map) {\n        if (map.isTileMap) {\n            for (var i = 0; i < map.layersCollection.length; i++) {\n                var markerTemplateElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_Markers_Template_Group');\n                var lineElement = getElementByID(this.maps.element.id + '_LayerIndex_' + i + '_line_Group');\n                if (!isNullOrUndefined(markerTemplateElement)) {\n                    markerTemplateElement.style.visibility = 'hidden';\n                }\n                if (!isNullOrUndefined(lineElement)) {\n                    lineElement.style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Zoom.prototype.panning = function (direction, xDifference, yDifference, mouseLocation) {\n        var map = this.maps;\n        var panArgs;\n        var down = this.mouseDownPoints;\n        var move = this.mouseMovePoints;\n        var scale = map.scale;\n        map.markerZoomedState = false;\n        map.zoomPersistence = map.enablePersistence;\n        map.defaultState = false;\n        map.initialCheck = false;\n        var translatePoint = map.translatePoint;\n        var prevTilePoint = map.tileTranslatePoint;\n        var x;\n        var y;\n        xDifference = !isNullOrUndefined(xDifference) ? xDifference : (down.x - move.x);\n        yDifference = !isNullOrUndefined(yDifference) ? yDifference : (down.y - move.y);\n        this.maps.mergeCluster();\n        if (!map.isTileMap) {\n            var legendElement = document.getElementById(map.element.id + '_Legend_Group');\n            var legendHeight = !isNullOrUndefined(legendElement) ? legendElement.getClientRects()[0].height : 0;\n            x = translatePoint.x - xDifference / scale;\n            y = translatePoint.y - yDifference / scale;\n            var layerRect = getElementByID(map.element.id + '_Layer_Collections').getBoundingClientRect();\n            var elementRect = getElementByID(map.element.id + '_svg').getBoundingClientRect();\n            var panningXDirection = ((xDifference < 0 ? layerRect.left <= (elementRect.left + map.mapAreaRect.x) :\n                ((layerRect.left + layerRect.width + map.mapAreaRect.x) >= (elementRect.width))));\n            var panningYDirection = ((yDifference < 0 ? layerRect.top <= (elementRect.top + map.mapAreaRect.y) :\n                ((layerRect.top + layerRect.height + legendHeight + map.margin.top) >= (elementRect.top + elementRect.height))));\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var location_3 = this.maps.getGeoLocation(this.maps.layersCollection.length - 1, mouseLocation['layerX'], mouseLocation['layerY']);\n            panArgs = {\n                cancel: false, name: pan, maps: map,\n                tileTranslatePoint: {}, translatePoint: { previous: translatePoint, current: new Point(x, y) },\n                scale: map.scale, tileZoomLevel: map.tileZoomLevel, latitude: location_3['latitude'], longitude: location_3['longitude']\n            };\n            map.trigger(pan, panArgs);\n            if (!panArgs.cancel) {\n                if (panningXDirection && panningYDirection) {\n                    map.translatePoint = new Point(x, y);\n                    this.applyTransform(map);\n                }\n                else if (panningXDirection) {\n                    map.translatePoint = new Point(x, map.translatePoint.y);\n                    this.applyTransform(map);\n                }\n                else if (panningYDirection) {\n                    map.translatePoint = new Point(map.translatePoint.x, y);\n                    this.applyTransform(map);\n                }\n            }\n            this.maps.zoomNotApplied = false;\n        }\n        else if (this.maps.tileZoomLevel > 1) {\n            x = map.tileTranslatePoint.x - xDifference;\n            y = map.tileTranslatePoint.y - yDifference;\n            this.distanceX = x - map.tileTranslatePoint.x;\n            this.distanceY = y - map.tileTranslatePoint.y;\n            map.tileTranslatePoint.x = x;\n            map.tileTranslatePoint.y = y;\n            if ((map.tileTranslatePoint.y > -10 && yDifference < 0) || ((map.tileTranslatePoint.y < -((Math.pow(2, this.maps.tileZoomLevel) - 2) * 256) && yDifference > 0))) {\n                map.tileTranslatePoint.x = x + xDifference;\n                map.tileTranslatePoint.y = y + yDifference;\n            }\n            map.translatePoint.x = (map.tileTranslatePoint.x - xDifference) / map.scale;\n            map.translatePoint.y = (map.tileTranslatePoint.y - yDifference) / map.scale;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var location_4 = this.maps.getTileGeoLocation(mouseLocation['layerX'], mouseLocation['layerY']);\n            panArgs = {\n                cancel: false, name: pan, maps: map,\n                tileTranslatePoint: { previous: prevTilePoint, current: map.tileTranslatePoint },\n                translatePoint: { previous: translatePoint, current: map.translatePoint }, scale: map.scale,\n                tileZoomLevel: map.tileZoomLevel, latitude: location_4['latitude'], longitude: location_4['longitude']\n            };\n            map.trigger(pan, panArgs);\n            map.mapLayerPanel.generateTiles(map.tileZoomLevel, map.tileTranslatePoint, 'Pan');\n            this.applyTransform(map);\n        }\n        map.zoomTranslatePoint = map.translatePoint;\n        this.mouseDownPoints = this.mouseMovePoints;\n        this.maps.zoomNotApplied = false;\n        this.isSingleClick = false;\n    };\n    Zoom.prototype.toAlignSublayer = function () {\n        this.maps.translatePoint.x = !isNullOrUndefined(this.distanceX) ? (this.maps.translatePoint.x -\n            (this.distanceX / this.maps.scale)) : this.maps.translatePoint.x;\n        this.maps.translatePoint.y = !isNullOrUndefined(this.distanceY) ? this.maps.translatePoint.y -\n            (this.distanceY / this.maps.scale) : this.maps.translatePoint.y;\n        this.applyTransform(this.maps, false);\n    };\n    Zoom.prototype.toolBarZooming = function (zoomFactor, type) {\n        var _this = this;\n        var map = this.maps;\n        map.initialCheck = false;\n        map.defaultState = ((type === 'Reset' && zoomFactor === 1 && !(map.zoomSettings.resetToInitial && map.applyZoomReset))\n            || (type === 'ZoomOut' && zoomFactor === 1));\n        var prevLevel = map.tileZoomLevel;\n        var scale = map.previousScale = map.scale;\n        map.markerZoomedState = false;\n        map.zoomPersistence = map.enablePersistence;\n        map.mapScaleValue = zoomFactor;\n        var maxZoom = map.zoomSettings.maxZoom;\n        var minZoom = map.zoomSettings.minZoom;\n        var size = map.mapAreaRect;\n        var translatePoint = map.previousPoint = map.translatePoint;\n        var prevTilePoint = map.tileTranslatePoint;\n        map.previousProjection = map.projectionType;\n        zoomFactor = (type === 'ZoomOut') ? (Math.round(zoomFactor) === 1 ? 1 : zoomFactor) : zoomFactor;\n        zoomFactor = (type === 'Reset') ? 1 : (Math.round(zoomFactor) === 0) ? 1 : zoomFactor;\n        zoomFactor = (minZoom > zoomFactor && type === 'ZoomIn') ? minZoom + 1 : zoomFactor;\n        var zoomArgs;\n        if ((!map.isTileMap) && (type === 'ZoomIn' ? zoomFactor >= minZoom && zoomFactor <= maxZoom : zoomFactor >= minZoom\n            || map.isReset)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var min = map.baseMapRectBounds['min'];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var max = map.baseMapRectBounds['max'];\n            var mapWidth = Math.abs(max['x'] - min['x']);\n            var mapHeight = Math.abs(min['y'] - max['y']);\n            var translatePointX = void 0;\n            var translatePointY = void 0;\n            if (zoomFactor < 1.2 && map.projectionType !== 'Eckert5') {\n                if (mapHeight === 0 || mapWidth === 0 || mapHeight === mapWidth) {\n                    mapWidth = size.width / 2;\n                    mapHeight = size.height;\n                }\n                zoomFactor = parseFloat(Math.min(size.width / mapWidth, size.height / mapHeight).toFixed(2));\n                zoomFactor = zoomFactor > 1.05 ? 1 : zoomFactor;\n                map.translatePoint = this.calculateInitalZoomTranslatePoint(zoomFactor, mapWidth, mapHeight, size, min, map);\n            }\n            else {\n                translatePointX = translatePoint.x - (((size.width / scale) - (size.width / zoomFactor)) / 2);\n                translatePointY = translatePoint.y - (((size.height / scale) - (size.height / zoomFactor)) / 2);\n                var currentHeight = Math.abs(map.baseMapRectBounds['max']['y'] - map.baseMapRectBounds['min']['y']) * zoomFactor;\n                translatePointX = (currentHeight < map.mapAreaRect.height) ? (size.x + ((-(min['x'])) + ((size.width / 2) - (mapWidth / 2))))\n                    : translatePointX;\n                translatePointY = (currentHeight < map.mapAreaRect.height) ? (size.y + ((-(min['y'])) + ((size.height / 2) - (mapHeight / 2))))\n                    : translatePointY;\n                map.translatePoint = new Point(translatePointX, translatePointY);\n            }\n            map.zoomTranslatePoint = map.translatePoint;\n            map.scale = zoomFactor;\n            if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n                map.translatePoint = map.zoomTranslatePoint = map.previousPoint;\n                map.scale = map.previousScale;\n            }\n            else {\n                this.applyTransform(map, true);\n            }\n        }\n        else if ((map.isTileMap) && ((zoomFactor >= minZoom && zoomFactor <= maxZoom) || map.isReset)) {\n            var tileZoomFactor = prevLevel < minZoom && !map.isReset ? minZoom : zoomFactor;\n            map.scale = Math.pow(2, tileZoomFactor - 1);\n            map.tileZoomLevel = tileZoomFactor;\n            if (map.previousScale !== map.scale || map.isReset) {\n                map.zoomSettings.zoomFactor = zoomFactor;\n                var position = { x: map.availableSize.width / 2, y: map.availableSize.height / 2 };\n                this.getTileTranslatePosition(prevLevel, tileZoomFactor, position, type);\n                if (map.zoomSettings.resetToInitial && map.applyZoomReset && type === 'Reset' || (type === 'ZoomOut' && map.zoomSettings.resetToInitial && map.applyZoomReset && tileZoomFactor <= map.initialZoomLevel)) {\n                    map.initialCheck = true;\n                    map.zoomPersistence = false;\n                    map.tileTranslatePoint.x = map.initialTileTranslate.x;\n                    map.tileTranslatePoint.y = map.initialTileTranslate.y;\n                    tileZoomFactor = map.tileZoomLevel = map.mapScaleValue = map.initialZoomLevel;\n                }\n                if (this.triggerZoomEvent(prevTilePoint, prevLevel, type)) {\n                    map.translatePoint = map.tileTranslatePoint = new Point(0, 0);\n                    map.scale = map.previousScale;\n                    map.tileZoomLevel = prevLevel;\n                    map.zoomSettings.zoomFactor = map.previousScale;\n                }\n                else {\n                    map.translatePoint.y = (map.tileTranslatePoint.y - (0.01 * map.mapScaleValue)) / map.scale;\n                    map.translatePoint.x = (map.tileTranslatePoint.x - (0.01 * map.mapScaleValue)) / map.scale;\n                    if (document.getElementById(this.maps.element.id + '_LayerIndex_1')) {\n                        document.getElementById(this.maps.element.id + '_LayerIndex_1').style.display = 'none';\n                    }\n                    if (document.querySelector('.GroupElement')) {\n                        document.querySelector('.GroupElement').style.display = 'none';\n                    }\n                    this.markerLineAnimation(map);\n                    map.mapLayerPanel.generateTiles(tileZoomFactor, map.tileTranslatePoint, type);\n                    var element1 = document.getElementById(this.maps.element.id + '_tiles');\n                    var animationDuration = this.maps.layersCollection[0].animationDuration;\n                    setTimeout(function () {\n                        if (type === 'ZoomOut' || type === 'Reset') {\n                            // element1.removeChild(element1.children[element1.childElementCount - 1]);\n                            // element1.childElementCount ? element1.removeChild(element1.children[element1.childElementCount - 1]) : element1;\n                        }\n                        _this.applyTransform(_this.maps, true);\n                        if (document.getElementById(_this.maps.element.id + '_LayerIndex_1')) {\n                            document.getElementById(_this.maps.element.id + '_LayerIndex_1').style.display = 'block';\n                        }\n                        _this.maps.isAddLayer = false;\n                    }, animationDuration);\n                }\n            }\n            this.maps.zoomNotApplied = false;\n        }\n    };\n    Zoom.prototype.createZoomingToolbars = function () {\n        var map = this.maps;\n        var zoomInElements;\n        var zoomOutElements;\n        this.toolBarGroup = map.renderer.createGroup({\n            id: map.element.id + '_Zooming_KitCollection',\n            opacity: map.theme.toLowerCase() === 'fluentdark' ? 0.6 : 0.3\n        });\n        var kitHeight = 16;\n        var kitWidth = 16;\n        var xSpacing = 15;\n        var ySpacing = 15;\n        var padding = 20;\n        var orientation = map.zoomSettings.toolBarOrientation;\n        var toolbarsCollection = map.zoomSettings.toolbars;\n        var shadowElement = '<filter id=\"chart_shadow\" height=\"130%\"><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"5\"/>';\n        shadowElement += '<feOffset dx=\"-3\" dy=\"4\" result=\"offsetblur\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"1\"/>';\n        shadowElement += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n        var toolBarLength = map.zoomSettings.toolbars.length;\n        var toolWidth = (map.zoomSettings.toolBarOrientation === 'Horizontal') ? (toolBarLength * kitWidth) + (toolBarLength * padding) : (kitWidth * 2);\n        var toolHeight = (map.zoomSettings.toolBarOrientation === 'Horizontal') ? (kitHeight * 2) : (toolBarLength * kitHeight) + (toolBarLength * padding);\n        var defElement = map.renderer.createDefs();\n        defElement.innerHTML = shadowElement;\n        this.toolBarGroup.appendChild(defElement);\n        var outerElement = map.renderer.drawRectangle(new RectOption(map.element.id + '_Zooming_Rect', 'transparent', { color: 'transparent', width: 1 }, 0.1, new Rect(0, 0, toolWidth, toolHeight), 0, 0));\n        outerElement.setAttribute('filter', 'url(#chart_shadow)');\n        this.toolBarGroup.appendChild(outerElement);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var performFunction;\n        for (var i = 0; i < toolbarsCollection.length; i++) {\n            var toolbar_1 = toolbarsCollection[i];\n            var pathOptions = void 0;\n            var polyOptions = void 0;\n            this.currentToolbarEle = map.renderer.createGroup({\n                id: map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Group',\n                transform: 'translate( ' + xSpacing + ' ' + ySpacing + ' ) '\n            });\n            this.currentToolbarEle.setAttribute('class', 'e-maps-toolbar');\n            var fillColor = '';\n            var fill = 'transparent';\n            var direction = '';\n            var polygonDirection = '';\n            this.selectionColor = this.maps.zoomSettings.selectionColor || this.maps.themeStyle.zoomSelectionColor;\n            switch (toolbar_1.toLowerCase()) {\n                case 'zoom': {\n                    var fillColor_1 = void 0;\n                    var strokeColor = void 0;\n                    direction = 'M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,';\n                    direction += '5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571';\n                    direction = direction + 'L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,';\n                    if (this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n                        fillColor_1 = fill;\n                        strokeColor = this.maps.themeStyle.zoomFillColor;\n                    }\n                    else if (this.maps.zoomSettings.enablePanning && this.maps.zoomSettings.enableSelectionZooming) {\n                        fillColor_1 = fill;\n                        strokeColor = this.maps.themeStyle.zoomFillColor;\n                    }\n                    else if (!this.maps.zoomSettings.enablePanning && !this.maps.zoomSettings.enableSelectionZooming) {\n                        fillColor_1 = fill;\n                        strokeColor = this.maps.themeStyle.zoomFillColor;\n                    }\n                    else {\n                        fillColor_1 = this.selectionColor;\n                        strokeColor = this.selectionColor;\n                    }\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fillColor_1, 1, strokeColor, 1, 1, null, direction + '4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z')));\n                    this.zoomElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                }\n                case 'zoomin':\n                    direction = 'M 8, 0 L 8, 16 M 0, 8 L 16, 8';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Path', fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n                    zoomInElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'zoomout':\n                    direction = 'M 0, 8 L 16, 8';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, fill, 3, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction)));\n                    zoomOutElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                case 'pan': {\n                    var color = void 0;\n                    direction = 'M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,';\n                    direction += '11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z';\n                    if (this.maps.zoomSettings.enablePanning && this.maps.zoomModule.isDragZoom) {\n                        color = '#737373';\n                    }\n                    else if (!this.maps.zoomSettings.enablePanning) {\n                        color = '#737373';\n                        this.currentToolbarEle.setAttribute('class', '');\n                    }\n                    else {\n                        color = this.selectionColor;\n                    }\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, color, 1, color, 1, 1, null, direction)));\n                    this.panColor = color;\n                    this.panElements = this.currentToolbarEle;\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n                }\n                case 'reset':\n                    direction = 'M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,';\n                    direction += '1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,';\n                    direction += '13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,';\n                    this.currentToolbarEle.appendChild(map.renderer.drawPath(new PathOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1, this.fillColor, null, this.maps.themeStyle.zoomFillColor, 1, 1, null, direction + '3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z')));\n                    this.wireEvents(this.currentToolbarEle, this.performToolBarAction);\n                    break;\n            }\n            this.currentToolbarEle.appendChild(map.renderer.drawCircle(new CircleOption(map.element.id + '_Zooming_ToolBar_' + toolbar_1 + '_Rect', fill, { color: this.maps.themeStyle.zoomFillColor, width: 1 }, 1, 8, 8, 16, '')));\n            xSpacing = (orientation === 'Horizontal') ? (xSpacing + (kitWidth + padding)) : xSpacing;\n            ySpacing = (orientation === 'Horizontal') ? ySpacing : (ySpacing + (kitHeight + padding));\n            this.toolBarGroup.appendChild(this.currentToolbarEle);\n        }\n    };\n    Zoom.prototype.performToolBarAction = function (e) {\n        var target = e.target;\n        e.stopImmediatePropagation();\n        var isTouch = e.pointerType === 'touch' || e.pointerType === '2' || (e.type.indexOf('touch') > -1);\n        var toolbar = target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n        if (isTouch) {\n            this.handled = true;\n            this.performZoomingByToolBar(toolbar);\n        }\n        else if ((e.type === 'mousedown' || e.type === 'pointerdown') && !this.handled) {\n            this.handled = false;\n            this.performZoomingByToolBar(toolbar);\n        }\n        else {\n            this.handled = false;\n        }\n    };\n    /**\n     * @param {string} type - Specifies the type.\n     * @returns {void}\n     * @private\n     */\n    Zoom.prototype.performZoomingByToolBar = function (type) {\n        var map = this.maps;\n        map.isReset = false;\n        switch (type.toLowerCase()) {\n            case 'zoom':\n                this.panColor = this.fillColor;\n                this.zoomColor = this.selectionColor;\n                this.applySelection(this.zoomElements, this.selectionColor);\n                this.applySelection(this.panElements, this.fillColor);\n                break;\n            case 'pan':\n                if (!this.maps.zoomSettings.enablePanning) {\n                    this.panColor = '#737373';\n                }\n                else {\n                    this.panColor = this.selectionColor;\n                }\n                this.zoomColor = this.fillColor;\n                if (!this.maps.zoomSettings.enablePanning) {\n                    this.applySelection(this.zoomElements, this.selectionColor);\n                    this.applySelection(this.panElements, this.panColor);\n                }\n                else {\n                    this.applySelection(this.zoomElements, this.fillColor);\n                    this.applySelection(this.panElements, this.panColor);\n                }\n                break;\n            case 'zoomin':\n                map.staticMapZoom = map.tileZoomLevel;\n                if (map.staticMapZoom > 0 && map.staticMapZoom < 22) {\n                    map.staticMapZoom += 1;\n                }\n                this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) + 1, 'ZoomIn');\n                break;\n            case 'zoomout':\n                map.staticMapZoom = map.tileZoomLevel;\n                map.markerCenterLatitude = null;\n                map.markerCenterLongitude = null;\n                this.toolBarZooming((map.isTileMap ? map.tileZoomLevel : map.scale) - 1, 'ZoomOut');\n                break;\n            case 'reset':\n                map.staticMapZoom = map.zoomSettings.enable ? map.zoomSettings.zoomFactor : 0;\n                map.markerCenterLatitude = null;\n                map.markerCenterLongitude = null;\n                this.toolBarZooming(1, 'Reset');\n                if (!this.maps.zoomSettings.enablePanning) {\n                    this.applySelection(this.zoomElements, this.selectionColor);\n                    this.applySelection(this.panElements, '#737373');\n                }\n                else {\n                    this.applySelection(this.zoomElements, this.fillColor);\n                    this.applySelection(this.panElements, this.selectionColor);\n                }\n        }\n        this.panningStyle(type.toLowerCase());\n    };\n    Zoom.prototype.panningStyle = function (toolbar) {\n        var svg = getElementByID(this.maps.element.id + '_svg');\n        if (toolbar === 'pan' || this.isPanning) {\n            svg.setAttribute('class', 'e-maps-panning');\n        }\n        else {\n            svg.setAttribute('class', '');\n        }\n    };\n    Zoom.prototype.applySelection = function (elements, color) {\n        if (!elements) {\n            return;\n        }\n        var childElement;\n        for (var i = 0; i < elements.childElementCount; i++) {\n            childElement = elements.childNodes[i];\n            if (childElement.tagName !== 'circle') {\n                childElement.setAttribute('fill', color);\n                childElement.setAttribute('stroke', color);\n            }\n        }\n    };\n    Zoom.prototype.showTooltip = function (e) {\n        var text = e.target.id.split('_Zooming_ToolBar_')[1].split('_')[0];\n        if (!this.isTouch) {\n            createTooltip('EJ2_Map_Toolbar_Tip', this.maps.getLocalizedLabel(text), (e.pageY + 10), (e.pageX + 10), '10px');\n        }\n    };\n    Zoom.prototype.removeTooltip = function () {\n        if (getElementByID('EJ2_Map_Toolbar_Tip')) {\n            remove(getElementByID('EJ2_Map_Toolbar_Tip'));\n        }\n    };\n    Zoom.prototype.alignToolBar = function () {\n        var map = this.maps;\n        var padding = 10;\n        var element = createElement('div', { id: map.element.id + '_ToolBar', styles: 'position:absolute;z-index:2' });\n        var rectSVGObject = map.renderer.createSvg({\n            id: map.element.id + '_Zooming_ToolBar', width: 10, height: 10\n        });\n        rectSVGObject.appendChild(this.toolBarGroup);\n        element.appendChild(rectSVGObject);\n        if (getElementByID(map.element.id + '_Secondary_Element')) {\n            getElementByID(map.element.id + '_Secondary_Element').appendChild(element);\n        }\n        var toolBarSize = this.toolBarGroup.getBoundingClientRect();\n        rectSVGObject.setAttribute('height', (toolBarSize.height + padding / 2).toString());\n        rectSVGObject.setAttribute('width', (toolBarSize.width + padding / 2).toString());\n        var size = !isNullOrUndefined(map.totalRect) ? map.totalRect : map.mapAreaRect;\n        var x = 0;\n        var y = 0;\n        switch (map.zoomSettings.verticalAlignment) {\n            case 'Near':\n                y = size.y;\n                break;\n            case 'Center':\n                y = (size.height / 2) - (toolBarSize.height / 2);\n                break;\n            case 'Far':\n                y = (size.height - toolBarSize.height) - padding;\n                break;\n        }\n        switch (map.zoomSettings.horizontalAlignment) {\n            case 'Near':\n                x = size.x;\n                break;\n            case 'Center':\n                x = (size.width / 2) - (toolBarSize.width / 2);\n                break;\n            case 'Far':\n                if (!isNullOrUndefined(map.legendModule) && map.legendSettings.position === 'Left') {\n                    x = size.width + size.x - toolBarSize.width - padding;\n                }\n                else {\n                    x = (size.width - toolBarSize.width) - padding;\n                }\n                break;\n        }\n        var extraPosition = map.getExtraPosition();\n        element.style.left = x + extraPosition.x + 'px';\n        element.style.top = y + extraPosition.y + 'px';\n        var color = this.maps.zoomSettings.highlightColor || this.maps.themeStyle.zoomSelectionColor;\n        var css = ' .e-maps-toolbar:hover > circle { stroke:' + color + '; } .e-maps-toolbar:hover > path { fill: ' + color + ' ;  stroke: ' + color + '; }' +\n            '.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } ' +\n            '.e-maps-popup-close { display: block; opacity: 0; }';\n        var style = document.createElement('style');\n        style.appendChild(document.createTextNode(css));\n        element.appendChild(style);\n    };\n    /**\n     * To bind events.\n     *\n     * @param {Element} element - Specifies the element.\n     * @param {any} process - Specifies the process.\n     * @returns {void}\n     * @private\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Zoom.prototype.wireEvents = function (element, process) {\n        EventHandler.add(element, Browser.touchStartEvent, process, this);\n        EventHandler.add(element, 'mouseover', this.showTooltip, this);\n        EventHandler.add(element, 'mouseout', this.removeTooltip, this);\n    };\n    Zoom.prototype.mapMouseWheel = function (e) {\n        if (this.maps.zoomSettings.enable && this.maps.zoomSettings.mouseWheelZoom) {\n            var map = this.maps;\n            var size = map.availableSize;\n            map.markerZoomedState = false;\n            map.zoomPersistence = map.enablePersistence;\n            var position = this.getMousePosition(e.pageX, e.pageY);\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            var delta = 1;\n            var staticMaxZoomLevel = 22; // google map maximum zoom level value\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                e.preventDefault();\n                var direction = (this.browserName === 'mozilla' && !this.isPointer) ?\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    -(e.detail) / 3 > 0 ? 'ZoomIn' : 'ZoomOut' : (e.wheelDelta / 120) > 0 ? 'ZoomIn' : 'ZoomOut';\n                if (direction === 'ZoomIn') {\n                    map.mapScaleValue = value + delta;\n                    map.staticMapZoom = map.tileZoomLevel;\n                    if (map.staticMapZoom > 0 && map.staticMapZoom < staticMaxZoomLevel) {\n                        map.staticMapZoom += 1;\n                    }\n                    this.performZooming(position, (value + delta), direction);\n                }\n                else {\n                    map.mapScaleValue = value - delta;\n                    map.isReset = (map.mapScaleValue < 1) ? true : false;\n                    map.staticMapZoom = map.tileZoomLevel;\n                    if (map.mapScaleValue === 1) {\n                        map.markerCenterLatitude = null;\n                        map.markerCenterLongitude = null;\n                    }\n                    if (map.staticMapZoom > 1 && map.staticMapZoom < staticMaxZoomLevel) {\n                        map.staticMapZoom -= 1;\n                    }\n                    this.performZooming(position, (value - delta), direction);\n                }\n            }\n        }\n    };\n    Zoom.prototype.doubleClick = function (e) {\n        var pageX = e.pageX;\n        var pageY = e.pageY;\n        var target = e.target;\n        if (this.maps.zoomSettings.enable && this.maps.zoomSettings.doubleClickZoom\n            && !(e.target['id'].indexOf('_Zooming_') > -1)) {\n            var position = this.getMousePosition(pageX, pageY);\n            var map = this.maps;\n            var size = map.availableSize;\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            map.mapScaleValue = map.mapScaleValue + 1;\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                this.performZooming(position, (value + 1), 'ZoomIn');\n            }\n        }\n    };\n    Zoom.prototype.mouseDownHandler = function (e) {\n        var pageX;\n        var pageY;\n        var target;\n        var touches = null;\n        var element = e.target;\n        if (e.type === 'touchstart') {\n            this.isTouch = true;\n            touches = e.touches;\n            target = e.target;\n            pageX = touches[0].clientX;\n            pageY = touches[0].clientY;\n        }\n        else {\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (!this.maps.zoomSettings.enablePanning) {\n            this.isPanning = this.panColor !== this.selectionColor ? this.maps.zoomSettings.enablePanning\n                : this.zoomColor === this.selectionColor;\n        }\n        else {\n            this.isPanning = this.panColor === this.selectionColor ? this.maps.zoomSettings.enablePanning\n                : this.zoomColor !== this.selectionColor;\n        }\n        this.mouseDownLatLong = { x: pageX, y: pageY };\n        this.rectZoomingStart = ((!this.isPanning) && this.maps.zoomSettings.enable);\n        this.mouseDownPoints = this.getMousePosition(pageX, pageY);\n        if (this.isTouch) {\n            this.firstMove = true;\n            this.pinchFactor = this.maps.scale;\n            this.fingers = touches.length;\n        }\n        this.isSingleClick = true;\n    };\n    Zoom.prototype.mouseMoveHandler = function (e) {\n        var pageX;\n        var pageY;\n        var map = this.maps;\n        var touchArg;\n        var target;\n        var touches = null;\n        var zoom = this.maps.zoomSettings;\n        if (e.type === 'touchmove') {\n            this.isTouch = true;\n            target = e.target;\n            touches = e.touches;\n            pageX = touches[0].clientX;\n            pageY = touches[0].clientY;\n        }\n        else {\n            pageX = e.pageX;\n            pageY = e.pageY;\n            target = e.target;\n        }\n        if (getElementByID(map.element.id + '_Zooming_KitCollection')) {\n            if (target.id.indexOf('_Zooming_') > -1) {\n                getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', '1');\n                if (document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n                    if (!this.maps.zoomSettings.enablePanning) {\n                        if (target.id.indexOf('_Zooming_ToolBar') > -1 || target.id.indexOf('_Zooming_Rect') > -1) {\n                            getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', map.theme.toLowerCase() === 'fluentdark' ? '0.6' : '0.3');\n                            getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', map.theme.toLowerCase() === 'fluentdark' ? '0.6' : '0.3');\n                        }\n                    }\n                }\n            }\n            else {\n                getElementByID(map.element.id + '_Zooming_KitCollection').setAttribute('opacity', map.theme.toLowerCase() === 'fluentdark' ? '0.6' : '0.3');\n                if (!this.maps.zoomSettings.enablePanning && document.getElementById(map.element.id + '_Zooming_ToolBar_Pan_Group')) {\n                    getElementByID(map.element.id + '_Zooming_ToolBar_Pan_Rect').setAttribute('opacity', '1');\n                    getElementByID(map.element.id + '_Zooming_ToolBar_Pan').setAttribute('opacity', '1');\n                }\n            }\n        }\n        if (this.isTouch) {\n            if (this.maps.zoomSettings.pinchZooming) {\n                if (this.firstMove && touches.length === 2) {\n                    this.rectZoomingStart = false;\n                    this.updateInteraction();\n                    this.touchStartList = targetTouches(e);\n                }\n                else if (touches.length === 2 && this.touchStartList.length === 2) {\n                    this.touchMoveList = targetTouches(e);\n                    e.preventDefault();\n                    this.rectZoomingStart = false;\n                    this.performPinchZooming(e);\n                }\n                this.firstMove = false;\n            }\n        }\n        this.mouseMovePoints = this.getMousePosition(pageX, pageY);\n        var targetId = e.target['id'];\n        var targetEle = e.target;\n        if (zoom.enable && this.isPanning && ((Browser.isDevice && touches.length >= 1) || !Browser.isDevice)) {\n            e.preventDefault();\n            this.maps.element.style.cursor = 'pointer';\n            this.mouseMoveLatLong = { x: pageX, y: pageY };\n            if ((this.mouseDownLatLong['x'] !== this.mouseMoveLatLong['x']) && (this.mouseDownLatLong['y'] !== this.mouseMoveLatLong['y'])) {\n                if (this.maps.zoomSettings.enablePanning) {\n                    this.panning('None', null, null, e);\n                }\n                this.mouseDownLatLong['x'] = pageX;\n                this.mouseDownLatLong['y'] = pageY;\n            }\n        }\n        if (this.isTouch ? (touches.length === 1 && this.rectZoomingStart) : this.rectZoomingStart) {\n            e.preventDefault();\n            if (this.maps.zoomSettings.enableSelectionZooming) {\n                this.drawZoomRectangle();\n            }\n        }\n    };\n    Zoom.prototype.mouseUpHandler = function (e) {\n        var isDragZoom;\n        var map = this.maps;\n        this.rectZoomingStart = false;\n        this.isPanning = false;\n        this.isSingleClick = this.isSingleClick ? true : false;\n        this.isTouch = false;\n        this.touchStartList = [];\n        this.touchMoveList = [];\n        this.lastScale = 1;\n        this.maps.element.style.cursor = 'auto';\n        if ((!isNullOrUndefined(this.distanceX) || !isNullOrUndefined(this.distanceY)) && (!isNullOrUndefined(this.currentLayer) && this.currentLayer.type === 'SubLayer')) {\n            this.toAlignSublayer();\n            this.distanceX = this.distanceY = null;\n        }\n        var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n        if (zoomRectElement && this.maps.zoomSettings.enable && this.maps.zoomSettings.enableSelectionZooming) {\n            isDragZoom = true;\n            remove(zoomRectElement);\n            this.performRectZooming();\n        }\n        this.mouseMoveLatLong = { x: 0, y: 0 };\n        this.mouseDownLatLong = { x: 0, y: 0 };\n    };\n    Zoom.prototype.mouseCancelHandler = function (e) {\n        this.isPanning = false;\n        this.isTouch = false;\n        this.rectZoomingStart = false;\n        var zoomRectElement = getElementByID(this.maps.element.id + '_Selection_Rect_Zooming');\n        if (zoomRectElement && this.maps.zoomSettings.enable) {\n            remove(zoomRectElement);\n            this.performRectZooming();\n        }\n    };\n    /**\n     * To handle the click event for maps.\n     *\n     * @param {PointerEvent} e - Specifies the pointer event.\n     * @returns {void}\n     */\n    Zoom.prototype.click = function (e) {\n        var map = this.maps;\n        if ((map.markerModule && map.markerModule.sameMarkerData.length > 0) ||\n            (e.target['id'].indexOf('MarkerIndex') > -1 && e.target['id'].indexOf('cluster') === -1)) {\n            return null;\n        }\n        if (this.isSingleClick && map.zoomSettings.zoomOnClick && !(e.target['id'].indexOf('_Zooming_') > -1) && !map.zoomSettings.doubleClickZoom\n            && (this.zoomColor !== this.selectionColor)) {\n            var pageX = e.pageX;\n            var pageY = e.pageY;\n            var position = this.getMousePosition(pageX, pageY);\n            var prevLevel = map.tileZoomLevel;\n            var prevScale = map.scale;\n            map.mapScaleValue = map.mapScaleValue + 1;\n            var value = (map.isTileMap) ? prevLevel : prevScale;\n            if (((position.x > map.mapAreaRect.x) && (position.x < (map.mapAreaRect.x + map.mapAreaRect.width))) &&\n                (position.y > map.mapAreaRect.y) && position.y < (map.mapAreaRect.y + map.mapAreaRect.height)) {\n                this.performZooming(position, (value + 1), 'ZoomIn');\n            }\n        }\n    };\n    Zoom.prototype.getMousePosition = function (pageX, pageY) {\n        var map = this.maps;\n        var elementRect = map.element.getBoundingClientRect();\n        var pageXOffset = map.element.ownerDocument.defaultView.pageXOffset;\n        var pageYOffset = map.element.ownerDocument.defaultView.pageYOffset;\n        var clientTop = map.element.ownerDocument.documentElement.clientTop;\n        var clientLeft = map.element.ownerDocument.documentElement.clientLeft;\n        var positionX = elementRect.left + pageXOffset - clientLeft;\n        var positionY = elementRect.top + pageYOffset - clientTop;\n        return new Point(Math.abs(pageX - positionX), Math.abs(pageY - positionY));\n    };\n    Zoom.prototype.addEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.maps.element, this.wheelEvent, this.mapMouseWheel, this);\n        EventHandler.add(this.maps.element, 'click', this.click, this);\n        EventHandler.add(this.maps.element, 'dblclick', this.doubleClick, this);\n        this.maps.on(Browser.touchMoveEvent, this.mouseMoveHandler, this);\n        this.maps.on(Browser.touchStartEvent, this.mouseDownHandler, this);\n        this.maps.on(Browser.touchEndEvent, this.mouseUpHandler, this);\n        EventHandler.add(this.maps.element, this.cancelEvent, this.mouseCancelHandler, this);\n    };\n    Zoom.prototype.removeEventListener = function () {\n        if (this.maps.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.maps.element, this.wheelEvent, this.mapMouseWheel);\n        EventHandler.remove(this.maps.element, 'click', this.click);\n        EventHandler.remove(this.maps.element, 'dblclick', this.doubleClick);\n        this.maps.off(Browser.touchMoveEvent, this.mouseMoveHandler);\n        this.maps.off(Browser.touchStartEvent, this.mouseDownHandler);\n        this.maps.off(Browser.touchEndEvent, this.mouseUpHandler);\n        this.maps.off(this.cancelEvent, this.mouseCancelHandler);\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} - Returns the module name.\n     */\n    Zoom.prototype.getModuleName = function () {\n        return 'Zoom';\n    };\n    /**\n     * To destroy the zoom.\n     *\n     * @returns {void}\n     * @private\n     */\n    Zoom.prototype.destroy = function () {\n        this.toolBarGroup = null;\n        this.currentToolbarEle = null;\n        this.zoomingRect = null;\n        this.zoomElements = null;\n        this.panElements = null;\n        this.baseTranslatePoint = null;\n        this.touchStartList = null;\n        this.touchMoveList = null;\n        this.previousTouchMoveList = null;\n        this.mouseDownPoints = null;\n        this.mouseMovePoints = null;\n        this.startTouches = [];\n        this.zoomshapewidth = null;\n        this.intersect = [];\n        this.mouseDownLatLong = null;\n        this.mouseMoveLatLong = null;\n        this.removeEventListener();\n        //TODO: Calling the below code throws spec issue.\n        //this.maps = null;\n        this.currentLayer = null;\n    };\n    return Zoom;\n}());\nexport { Zoom };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}