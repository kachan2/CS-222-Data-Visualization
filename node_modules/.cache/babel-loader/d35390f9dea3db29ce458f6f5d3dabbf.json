{"ast":null,"code":"import { markerRendering, convertTileLatLongToPoint, MapLocation } from '../index';\nimport { markerClick, markerMouseMove, markerClusterClick, markerClusterMouseMove } from '../index';\nimport { isNullOrUndefined, createElement } from '@syncfusion/ej2-base';\nimport { getTranslate, convertGeoToPoint, clusterTemplate, marker, markerTemplate, getZoomTranslate } from '../utils/helper';\nimport { getElementByID, mergeSeparateCluster, clusterSeparate, removeElement, getElement, markerColorChoose, markerShapeChoose, calculateZoomLevel, compareZoomFactor, getValueFromObject } from '../utils/helper';\n/**\n * Marker class\n */\nvar Marker = /** @class */function () {\n  function Marker(maps) {\n    this.maps = maps;\n    this.trackElements = [];\n    this.sameMarkerData = [];\n  }\n  Marker.prototype.markerRender = function (maps, layerElement, layerIndex, factor, type) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var templateFn;\n    var markerCount = 0;\n    var nullCount = 0;\n    var markerTemplateCount = 0;\n    maps.translateType = 'marker';\n    var currentLayer = maps.layersCollection[layerIndex];\n    this.markerSVGObject = maps.renderer.createGroup({\n      id: maps.element.id + '_Markers_Group',\n      class: 'GroupElement',\n      style: 'pointer-events: auto;'\n    });\n    var markerTemplateEle = createElement('div', {\n      id: maps.element.id + '_LayerIndex_' + layerIndex + '_Markers_Template_Group',\n      className: maps.element.id + '_template',\n      styles: 'overflow: hidden; position: absolute;pointer-events: none;' + 'top:' + maps.mapAreaRect.y + 'px;' + 'left:' + maps.mapAreaRect.x + 'px;' + 'height:' + maps.mapAreaRect.height + 'px;' + 'width:' + maps.mapAreaRect.width + 'px;'\n    });\n    currentLayer.markerSettings.map(function (markerSettings, markerIndex) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var markerData = markerSettings.dataSource;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      Array.prototype.forEach.call(markerData, function (data, dataIndex) {\n        maps.markerNullCount = markerIndex > 0 && dataIndex === 0 ? 0 : maps.markerNullCount;\n        var eventArgs = {\n          cancel: false,\n          name: markerRendering,\n          fill: markerSettings.fill,\n          height: markerSettings.height,\n          width: markerSettings.width,\n          imageUrl: markerSettings.imageUrl,\n          shape: markerSettings.shape,\n          template: markerSettings.template,\n          data: data,\n          maps: maps,\n          marker: markerSettings,\n          border: markerSettings.border,\n          colorValuePath: markerSettings.colorValuePath,\n          shapeValuePath: markerSettings.shapeValuePath,\n          imageUrlValuePath: markerSettings.imageUrlValuePath\n        };\n        maps.trigger('markerRendering', eventArgs, function (MarkerArgs) {\n          eventArgs = markerColorChoose(eventArgs, data);\n          eventArgs = markerShapeChoose(eventArgs, data);\n          var lng = !isNullOrUndefined(markerSettings.longitudeValuePath) ? Number(getValueFromObject(data, markerSettings.longitudeValuePath)) : !isNullOrUndefined(data['longitude']) ? parseFloat(data['longitude']) : !isNullOrUndefined(data['Longitude']) ? parseFloat(data['Longitude']) : null;\n          var lat = !isNullOrUndefined(markerSettings.latitudeValuePath) ? Number(getValueFromObject(data, markerSettings.latitudeValuePath)) : !isNullOrUndefined(data['latitude']) ? parseFloat(data['latitude']) : !isNullOrUndefined(data['Latitude']) ? parseFloat(data['Latitude']) : null;\n          var offset = markerSettings.offset;\n          if (!eventArgs.cancel && markerSettings.visible && !isNullOrUndefined(lng) && !isNullOrUndefined(lat)) {\n            var markerID = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_' + markerIndex + '_dataIndex_' + dataIndex;\n            var location_1 = maps.isTileMap ? convertTileLatLongToPoint(new MapLocation(lng, lat), factor, maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, currentLayer, maps);\n            var animate = currentLayer.animationDuration !== 0 || isNullOrUndefined(maps.zoomModule);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var translate = maps.isTileMap ? currentLayer.type === 'SubLayer' && isNullOrUndefined(maps.zoomModule) ? location_1 = convertTileLatLongToPoint(new MapLocation(lng, lat), maps.tileZoomLevel, maps.tileTranslatePoint, true) : new Object() : !isNullOrUndefined(maps.zoomModule) && maps.zoomSettings.zoomFactor > 1 ? getZoomTranslate(maps, currentLayer, animate) : getTranslate(maps, currentLayer, animate);\n            var scale = type === 'AddMarker' ? maps.scale : translate['scale'];\n            var transPoint = type === 'AddMarker' ? maps.translatePoint : translate['location'];\n            if (eventArgs.template && !isNaN(location_1.x) && !isNaN(location_1.y)) {\n              markerTemplateCount++;\n              markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplateEle, location_1, transPoint, scale, offset, maps);\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              maps.renderReactTemplates();\n            } else if (!eventArgs.template && !isNaN(location_1.x) && !isNaN(location_1.y)) {\n              markerCount++;\n              marker(eventArgs, markerSettings, markerData, dataIndex, location_1, transPoint, markerID, offset, scale, maps, _this.markerSVGObject);\n            }\n          }\n          nullCount += !isNaN(lat) && !isNaN(lng) ? 0 : 1;\n          markerTemplateCount += eventArgs.cancel ? 1 : 0;\n          markerCount += eventArgs.cancel ? 1 : 0;\n          maps.markerNullCount = isNullOrUndefined(lng) || isNullOrUndefined(lat) ? maps.markerNullCount + 1 : maps.markerNullCount;\n          var markerDataLength = markerData.length - maps.markerNullCount;\n          if (_this.markerSVGObject.childElementCount === markerDataLength - markerTemplateCount - nullCount && type !== 'Template') {\n            layerElement.appendChild(_this.markerSVGObject);\n            if (currentLayer.markerClusterSettings.allowClustering) {\n              maps.svgObject.appendChild(_this.markerSVGObject);\n              maps.element.appendChild(maps.svgObject);\n              if ((currentLayer.layerType === 'OSM' || currentLayer.urlTemplate.indexOf('openstreetmap') !== -1 && isNullOrUndefined(currentLayer.shapeData)) && maps.zoomSettings.enable) {\n                layerElement.appendChild(_this.markerSVGObject);\n              } else {\n                clusterTemplate(currentLayer, _this.markerSVGObject, maps, layerIndex, _this.markerSVGObject, layerElement, true, false);\n              }\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              maps.renderReactTemplates();\n            }\n          }\n          if (markerTemplateEle.childElementCount === markerDataLength - markerCount - nullCount && getElementByID(maps.element.id + '_Secondary_Element')) {\n            getElementByID(maps.element.id + '_Secondary_Element').appendChild(markerTemplateEle);\n            if (maps.checkInitialRender) {\n              if (currentLayer.markerClusterSettings.allowClustering) {\n                clusterTemplate(currentLayer, markerTemplateEle, maps, layerIndex, _this.markerSVGObject, layerElement, false, false);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                maps.renderReactTemplates();\n              }\n            }\n          }\n        });\n      });\n    });\n  };\n  /**\n   * To find zoom level for individual layers like India, USA.\n   *\n   * @param {number} mapWidth - Specifies the width of the maps\n   * @param {number} mapHeight - Specifies the height of the maps\n   * @param {number} maxZoomFact - Specifies the maximum zoom factor\n   * @returns {number} - Returns the scale factor\n   */\n  Marker.prototype.calculateIndividualLayerMarkerZoomLevel = function (mapWidth, mapHeight, maxZoomFact) {\n    var latZoom;\n    var lngZoom;\n    var height = Math.abs(this.maps.baseMapBounds.latitude.max - this.maps.baseMapBounds.latitude.min);\n    var width = Math.abs(this.maps.baseMapBounds.longitude.max - this.maps.baseMapBounds.longitude.min);\n    latZoom = Math.floor(Math.log(mapHeight / height));\n    latZoom = latZoom > maxZoomFact ? maxZoomFact : latZoom;\n    lngZoom = Math.floor(Math.log(mapWidth / width));\n    lngZoom = lngZoom > maxZoomFact ? maxZoomFact : lngZoom;\n    var result = Math.min(latZoom, lngZoom);\n    var scaleFactor = Math.min(result, maxZoomFact - 1);\n    if (!this.maps.isTileMap) {\n      compareZoomFactor(scaleFactor, this.maps);\n    }\n    return scaleFactor;\n  };\n  /**\n   * To calculate center position and factor value dynamically\n   */\n  Marker.prototype.calculateZoomCenterPositionAndFactor = function (layersCollection) {\n    if (this.maps.zoomSettings.shouldZoomInitially && this.maps.markerModule) {\n      var minLong_1;\n      var maxLat_1;\n      var minLat_1;\n      var maxLong_1;\n      var latZoom = void 0;\n      var lngZoom = void 0;\n      var result = void 0;\n      var zoomLevel = void 0;\n      var centerLat = void 0;\n      var centerLong = void 0;\n      var maxZoomFact = this.maps.zoomSettings.maxZoom;\n      var mapWidth = this.maps.mapAreaRect.width;\n      var mapHeight = this.maps.mapAreaRect.height;\n      this.maps.markerZoomedState = this.maps.markerZoomedState ? this.maps.markerZoomedState : isNullOrUndefined(this.maps.markerZoomFactor) ? !this.maps.markerZoomedState : this.maps.markerZoomFactor > 1 ? this.maps.markerZoomedState : !this.maps.markerZoomedState;\n      this.maps.defaultState = this.maps.markerZoomedState ? !this.maps.markerZoomedState : this.maps.defaultState;\n      Array.prototype.forEach.call(layersCollection, function (currentLayer, layerIndex) {\n        var isMarker = currentLayer.markerSettings.length !== 0;\n        if (isMarker) {\n          Array.prototype.forEach.call(currentLayer.markerSettings, function (markerSetting, markerIndex) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var markerData = markerSetting.dataSource;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            Array.prototype.forEach.call(markerData, function (data, dataIndex) {\n              var latitude = !isNullOrUndefined(data['latitude']) ? parseFloat(data['latitude']) : !isNullOrUndefined(data['Latitude']) ? parseFloat(data['Latitude']) : null;\n              var longitude = !isNullOrUndefined(data['longitude']) ? parseFloat(data['longitude']) : !isNullOrUndefined(data['Longitude']) ? parseFloat(data['Longitude']) : null;\n              minLong_1 = isNullOrUndefined(minLong_1) && dataIndex === 0 ? longitude : minLong_1;\n              maxLat_1 = isNullOrUndefined(maxLat_1) && dataIndex === 0 ? latitude : maxLat_1;\n              minLat_1 = isNullOrUndefined(minLat_1) && dataIndex === 0 ? latitude : minLat_1;\n              maxLong_1 = isNullOrUndefined(maxLong_1) && dataIndex === 0 ? longitude : maxLong_1;\n              if (minLong_1 > longitude) {\n                minLong_1 = longitude;\n              }\n              if (minLat_1 > latitude) {\n                minLat_1 = latitude;\n              }\n              if (maxLong_1 < longitude) {\n                maxLong_1 = longitude;\n              }\n              if (maxLat_1 < latitude) {\n                maxLat_1 = latitude;\n              }\n            });\n          });\n        }\n      });\n      if (!isNullOrUndefined(minLat_1) && !isNullOrUndefined(minLong_1) && !isNullOrUndefined(maxLong_1) && !isNullOrUndefined(maxLat_1)) {\n        // To find the center position\n        centerLat = (minLat_1 + maxLat_1) / 2;\n        centerLong = (minLong_1 + maxLong_1) / 2;\n        this.maps.markerCenterLatitude = centerLat;\n        this.maps.markerCenterLongitude = centerLong;\n        if (isNullOrUndefined(this.maps.markerZoomCenterPoint) || this.maps.markerZoomedState) {\n          this.maps.markerZoomCenterPoint = {\n            latitude: centerLat,\n            longitude: centerLong\n          };\n        }\n        var markerFactor = void 0;\n        if (this.maps.isTileMap || this.maps.baseMapRectBounds['min']['x'] === 0) {\n          zoomLevel = calculateZoomLevel(minLat_1, maxLat_1, minLong_1, maxLong_1, mapWidth, mapHeight, this.maps);\n          if (this.maps.isTileMap) {\n            markerFactor = isNullOrUndefined(this.maps.markerZoomFactor) ? zoomLevel : isNullOrUndefined(this.maps.mapScaleValue) ? zoomLevel : this.maps.mapScaleValue > 1 && this.maps.markerZoomFactor !== 1 ? this.maps.mapScaleValue : zoomLevel;\n          } else {\n            markerFactor = isNullOrUndefined(this.maps.mapScaleValue) ? zoomLevel : Math.floor(this.maps.scale) !== 1 && this.maps.mapScaleValue !== zoomLevel && isNullOrUndefined(this.maps.shouldZoomCurrentFactor) ? this.maps.mapScaleValue : zoomLevel;\n            if (markerFactor === this.maps.mapScaleValue && (this.maps.markerZoomFactor === 1 || this.maps.mapScaleValue === 1) && !this.maps.enablePersistence) {\n              markerFactor = zoomLevel;\n            }\n          }\n        } else {\n          zoomLevel = this.calculateIndividualLayerMarkerZoomLevel(mapWidth, mapHeight, maxZoomFact);\n          markerFactor = isNullOrUndefined(this.maps.mapScaleValue) ? zoomLevel : this.maps.mapScaleValue !== zoomLevel ? this.maps.mapScaleValue : zoomLevel;\n        }\n        this.maps.markerZoomFactor = markerFactor;\n      }\n    } else {\n      this.maps.markerZoomedState = false;\n      if (this.maps.markerZoomFactor > 1) {\n        this.maps.markerCenterLatitude = null;\n        this.maps.markerCenterLongitude = null;\n        this.maps.markerZoomFactor = 1;\n        if (!this.maps.enablePersistence) {\n          this.maps.mapScaleValue = 1;\n        }\n      }\n      if (this.maps.isTileMap && !this.maps.enablePersistence && this.maps.mapScaleValue <= 1) {\n        this.maps.tileZoomLevel = this.maps.mapScaleValue === 0 ? 1 : this.maps.mapScaleValue;\n        if (this.maps.mapScaleValue === 1 && this.maps.markerZoomFactor === 1) {\n          this.maps.tileTranslatePoint.x = 0;\n          this.maps.tileTranslatePoint.y = 0;\n        }\n      }\n    }\n  };\n  /**\n   * To check and trigger marker click event\n   */\n  Marker.prototype.markerClick = function (e) {\n    var target = e.target.id;\n    if (target.indexOf('_LayerIndex_') === -1 || target.indexOf('_cluster_') > 0) {\n      return;\n    }\n    var options = this.getMarker(target);\n    if (isNullOrUndefined(options)) {\n      return;\n    }\n    var eventArgs = {\n      cancel: false,\n      name: markerClick,\n      data: options.data,\n      maps: this.maps,\n      marker: options.marker,\n      target: target,\n      x: e.clientX,\n      y: e.clientY,\n      latitude: options.data['latitude'] || options.data['Latitude'],\n      longitude: options.data['longitude'] || options.data['Longitude'],\n      value: options.data['name']\n    };\n    this.maps.trigger(markerClick, eventArgs);\n  };\n  /**\n   * To check and trigger Cluster click event\n   */\n  Marker.prototype.markerClusterClick = function (e) {\n    var target = e.target.id;\n    if (target.indexOf('_LayerIndex_') === -1 || target.indexOf('_cluster_') === -1) {\n      return;\n    }\n    var options = this.getMarker(target);\n    if (isNullOrUndefined(options)) {\n      return;\n    }\n    if (options.clusterCollection.length > 0 && this.maps.markerClusterExpand) {\n      if (getElement(this.maps.element.id + '_mapsTooltip') && this.maps.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') > -1) {\n        removeElement(this.maps.element.id + '_mapsTooltip');\n      }\n      if (this.sameMarkerData.length > 0 && !this.maps.markerClusterExpandCheck) {\n        this.maps.markerClusterExpandCheck = true;\n        mergeSeparateCluster(this.sameMarkerData, this.maps, this.markerSVGObject);\n      } else {\n        this.sameMarkerData = options.clusterCollection;\n        this.maps.markerClusterExpandCheck = false;\n        clusterSeparate(this.sameMarkerData, this.maps, this.markerSVGObject, true);\n      }\n    }\n    var eventArgs = {\n      cancel: false,\n      name: markerClusterClick,\n      data: options,\n      maps: this.maps,\n      target: target,\n      x: e.clientX,\n      y: e.clientY,\n      latitude: options.data['latitude'] || options.data['Latitude'],\n      longitude: options.data['longitude'] || options.data['Longitude'],\n      markerClusterCollection: options['markCollection']\n    };\n    this.maps.trigger(markerClusterClick, eventArgs);\n  };\n  /**\n   * To get marker from target id\n   *\n   * @param {string} target - Specifies the target\n   * @returns {string} - Returns the string\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Marker.prototype.getMarker = function (target) {\n    var id = target.split('_LayerIndex_');\n    var index = parseInt(id[1].split('_')[0], 10);\n    var layer = this.maps.layers[index];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var data;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var markCollection = [];\n    var clusterCollection = [];\n    var marker;\n    this.maps.markerClusterExpand = layer.markerClusterSettings.allowClusterExpand;\n    if (target.indexOf('_MarkerIndex_') > -1) {\n      var markerIndex = parseInt(id[1].split('_MarkerIndex_')[1].split('_')[0], 10);\n      var dataIndex = parseInt(id[1].split('_dataIndex_')[1].split('_')[0], 10);\n      marker = layer.markerSettings[markerIndex];\n      if (!isNaN(markerIndex)) {\n        data = marker.dataSource[dataIndex];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var collection_1 = [];\n        if (!marker.template && target.indexOf('_cluster_') > -1 && this.maps.layers[index].markerClusterSettings.allowClusterExpand) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          Array.prototype.forEach.call(marker.dataSource, function (location, index) {\n            if (location['latitude'] === data['latitude'] && location['longitude'] === data['longitude']) {\n              collection_1.push({\n                data: data,\n                index: index\n              });\n            }\n          });\n        }\n        if (target.indexOf('_cluster_') > -1) {\n          var isClusterSame = false;\n          var clusterElement = document.getElementById(target.indexOf('_datalabel_') > -1 ? layer.markerClusterSettings.shape === 'Balloon' ? target.split('_datalabel_')[0] + '_Group' : target.split('_datalabel_')[0] : layer.markerClusterSettings.shape === 'Balloon' ? target + '_Group' : target);\n          var indexes = layer.markerClusterSettings.shape === 'Balloon' ? clusterElement.children[0].innerHTML.split(',').map(Number) : clusterElement.innerHTML.split(',').map(Number);\n          collection_1 = [];\n          for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\n            var i = indexes_1[_i];\n            collection_1.push({\n              data: marker.dataSource[i],\n              index: i\n            });\n            markCollection.push(marker.dataSource[i]);\n          }\n          isClusterSame = false;\n          clusterCollection.push({\n            data: collection_1,\n            layerIndex: index,\n            markerIndex: markerIndex,\n            dataIndex: dataIndex,\n            targetClusterIndex: +(target.split('_cluster_')[1].indexOf('_datalabel_') > -1 ? target.split('_cluster_')[1].split('_datalabel_')[0] : target.split('_cluster_')[1]),\n            isClusterSame: isClusterSame\n          });\n        }\n        return {\n          marker: marker,\n          data: data,\n          clusterCollection: clusterCollection,\n          markCollection: markCollection\n        };\n      }\n    }\n    return null;\n  };\n  /**\n   * To check and trigger marker move event\n   */\n  Marker.prototype.markerMove = function (e) {\n    var targetId = e.target.id;\n    if (targetId.indexOf('_LayerIndex_') === -1 || targetId.indexOf('_cluster_') > 0) {\n      return;\n    }\n    var options = this.getMarker(targetId);\n    if (isNullOrUndefined(options)) {\n      return;\n    }\n    var eventArgs = {\n      cancel: false,\n      name: markerMouseMove,\n      data: options.data,\n      maps: this.maps,\n      target: targetId,\n      x: e.clientX,\n      y: e.clientY\n    };\n    this.maps.trigger(markerMouseMove, eventArgs);\n  };\n  /**\n   * To check and trigger cluster move event\n   */\n  Marker.prototype.markerClusterMouseMove = function (e) {\n    var targetId = e.target.id;\n    if (targetId.indexOf('_LayerIndex_') === -1 || targetId.indexOf('_cluster_') === -1) {\n      return;\n    }\n    var options = this.getMarker(targetId);\n    if (this.maps.markerClusterExpand) {\n      e.target.setAttribute('style', 'cursor: pointer');\n    }\n    if (isNullOrUndefined(options)) {\n      return;\n    }\n    var eventArgs = {\n      cancel: false,\n      name: markerClusterMouseMove,\n      data: options.data,\n      maps: this.maps,\n      target: targetId,\n      x: e.clientX,\n      y: e.clientY\n    };\n    this.maps.trigger(markerClusterMouseMove, eventArgs);\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} - Returns the module name\n   */\n  Marker.prototype.getModuleName = function () {\n    return 'Marker';\n  };\n  /**\n   * To destroy the layers.\n   *\n   * @returns {void}\n   * @private\n   */\n  Marker.prototype.destroy = function () {\n    this.maps = null;\n    this.trackElements = [];\n    this.markerSVGObject = null;\n    this.sameMarkerData = [];\n  };\n  return Marker;\n}();\nexport { Marker };","map":{"version":3,"names":["markerRendering","convertTileLatLongToPoint","MapLocation","markerClick","markerMouseMove","markerClusterClick","markerClusterMouseMove","isNullOrUndefined","createElement","getTranslate","convertGeoToPoint","clusterTemplate","marker","markerTemplate","getZoomTranslate","getElementByID","mergeSeparateCluster","clusterSeparate","removeElement","getElement","markerColorChoose","markerShapeChoose","calculateZoomLevel","compareZoomFactor","getValueFromObject","Marker","maps","trackElements","sameMarkerData","prototype","markerRender","layerElement","layerIndex","factor","type","_this","templateFn","markerCount","nullCount","markerTemplateCount","translateType","currentLayer","layersCollection","markerSVGObject","renderer","createGroup","id","element","class","style","markerTemplateEle","className","styles","mapAreaRect","y","x","height","width","markerSettings","map","markerIndex","markerData","dataSource","Array","forEach","call","data","dataIndex","markerNullCount","eventArgs","cancel","name","fill","imageUrl","shape","template","border","colorValuePath","shapeValuePath","imageUrlValuePath","trigger","MarkerArgs","lng","longitudeValuePath","Number","parseFloat","lat","latitudeValuePath","offset","visible","markerID","location_1","isTileMap","tileTranslatePoint","animate","animationDuration","zoomModule","translate","tileZoomLevel","Object","zoomSettings","zoomFactor","scale","transPoint","translatePoint","isNaN","renderReactTemplates","markerDataLength","length","childElementCount","appendChild","markerClusterSettings","allowClustering","svgObject","layerType","urlTemplate","indexOf","shapeData","enable","checkInitialRender","calculateIndividualLayerMarkerZoomLevel","mapWidth","mapHeight","maxZoomFact","latZoom","lngZoom","Math","abs","baseMapBounds","latitude","max","min","longitude","floor","log","result","scaleFactor","calculateZoomCenterPositionAndFactor","shouldZoomInitially","markerModule","minLong_1","maxLat_1","minLat_1","maxLong_1","zoomLevel","centerLat","centerLong","maxZoom","markerZoomedState","markerZoomFactor","defaultState","isMarker","markerSetting","markerCenterLatitude","markerCenterLongitude","markerZoomCenterPoint","markerFactor","baseMapRectBounds","mapScaleValue","shouldZoomCurrentFactor","enablePersistence","e","target","options","getMarker","clientX","clientY","value","clusterCollection","markerClusterExpand","mapsTooltipModule","tooltipTargetID","markerClusterExpandCheck","markerClusterCollection","split","index","parseInt","layer","layers","markCollection","allowClusterExpand","collection_1","location","push","isClusterSame","clusterElement","document","getElementById","indexes","children","innerHTML","_i","indexes_1","i","targetClusterIndex","markerMove","targetId","setAttribute","getModuleName","destroy"],"sources":["/Users/macbookpro16/Desktop/cs222/client/node_modules/@syncfusion/ej2-maps/src/maps/layers/marker.js"],"sourcesContent":["import { markerRendering, convertTileLatLongToPoint, MapLocation } from '../index';\nimport { markerClick, markerMouseMove, markerClusterClick, markerClusterMouseMove } from '../index';\nimport { isNullOrUndefined, createElement } from '@syncfusion/ej2-base';\nimport { getTranslate, convertGeoToPoint, clusterTemplate, marker, markerTemplate, getZoomTranslate } from '../utils/helper';\nimport { getElementByID, mergeSeparateCluster, clusterSeparate, removeElement, getElement, markerColorChoose, markerShapeChoose, calculateZoomLevel, compareZoomFactor, getValueFromObject } from '../utils/helper';\n/**\n * Marker class\n */\nvar Marker = /** @class */ (function () {\n    function Marker(maps) {\n        this.maps = maps;\n        this.trackElements = [];\n        this.sameMarkerData = [];\n    }\n    Marker.prototype.markerRender = function (maps, layerElement, layerIndex, factor, type) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var templateFn;\n        var markerCount = 0;\n        var nullCount = 0;\n        var markerTemplateCount = 0;\n        maps.translateType = 'marker';\n        var currentLayer = maps.layersCollection[layerIndex];\n        this.markerSVGObject = maps.renderer.createGroup({\n            id: maps.element.id + '_Markers_Group',\n            class: 'GroupElement',\n            style: 'pointer-events: auto;'\n        });\n        var markerTemplateEle = createElement('div', {\n            id: maps.element.id + '_LayerIndex_' + layerIndex + '_Markers_Template_Group',\n            className: maps.element.id + '_template',\n            styles: 'overflow: hidden; position: absolute;pointer-events: none;' +\n                'top:' + maps.mapAreaRect.y + 'px;' +\n                'left:' + maps.mapAreaRect.x + 'px;' +\n                'height:' + maps.mapAreaRect.height + 'px;' +\n                'width:' + maps.mapAreaRect.width + 'px;'\n        });\n        currentLayer.markerSettings.map(function (markerSettings, markerIndex) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var markerData = markerSettings.dataSource;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            Array.prototype.forEach.call(markerData, function (data, dataIndex) {\n                maps.markerNullCount = markerIndex > 0 && dataIndex === 0 ? 0 : maps.markerNullCount;\n                var eventArgs = {\n                    cancel: false, name: markerRendering, fill: markerSettings.fill, height: markerSettings.height,\n                    width: markerSettings.width, imageUrl: markerSettings.imageUrl, shape: markerSettings.shape,\n                    template: markerSettings.template, data: data, maps: maps, marker: markerSettings,\n                    border: markerSettings.border, colorValuePath: markerSettings.colorValuePath,\n                    shapeValuePath: markerSettings.shapeValuePath, imageUrlValuePath: markerSettings.imageUrlValuePath\n                };\n                maps.trigger('markerRendering', eventArgs, function (MarkerArgs) {\n                    eventArgs = markerColorChoose(eventArgs, data);\n                    eventArgs = markerShapeChoose(eventArgs, data);\n                    var lng = (!isNullOrUndefined(markerSettings.longitudeValuePath)) ?\n                        Number(getValueFromObject(data, markerSettings.longitudeValuePath)) : !isNullOrUndefined(data['longitude']) ?\n                        parseFloat(data['longitude']) : !isNullOrUndefined(data['Longitude']) ? parseFloat(data['Longitude']) : null;\n                    var lat = (!isNullOrUndefined(markerSettings.latitudeValuePath)) ?\n                        Number(getValueFromObject(data, markerSettings.latitudeValuePath)) : !isNullOrUndefined(data['latitude']) ?\n                        parseFloat(data['latitude']) : !isNullOrUndefined(data['Latitude']) ? parseFloat(data['Latitude']) : null;\n                    var offset = markerSettings.offset;\n                    if (!eventArgs.cancel && markerSettings.visible && !isNullOrUndefined(lng) && !isNullOrUndefined(lat)) {\n                        var markerID = maps.element.id + '_LayerIndex_' + layerIndex + '_MarkerIndex_'\n                            + markerIndex + '_dataIndex_' + dataIndex;\n                        var location_1 = (maps.isTileMap) ? convertTileLatLongToPoint(new MapLocation(lng, lat), factor, maps.tileTranslatePoint, true) : convertGeoToPoint(lat, lng, factor, currentLayer, maps);\n                        var animate = currentLayer.animationDuration !== 0 || isNullOrUndefined(maps.zoomModule);\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var translate = (maps.isTileMap) ? (currentLayer.type === 'SubLayer' && isNullOrUndefined(maps.zoomModule)) ? location_1 = convertTileLatLongToPoint(new MapLocation(lng, lat), maps.tileZoomLevel, maps.tileTranslatePoint, true) : new Object() :\n                            !isNullOrUndefined(maps.zoomModule) && maps.zoomSettings.zoomFactor > 1 ?\n                                getZoomTranslate(maps, currentLayer, animate) :\n                                getTranslate(maps, currentLayer, animate);\n                        var scale = type === 'AddMarker' ? maps.scale : translate['scale'];\n                        var transPoint = type === 'AddMarker' ? maps.translatePoint : translate['location'];\n                        if (eventArgs.template && (!isNaN(location_1.x) && !isNaN(location_1.y))) {\n                            markerTemplateCount++;\n                            markerTemplate(eventArgs, templateFn, markerID, data, markerIndex, markerTemplateEle, location_1, transPoint, scale, offset, maps);\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            maps.renderReactTemplates();\n                        }\n                        else if (!eventArgs.template && (!isNaN(location_1.x) && !isNaN(location_1.y))) {\n                            markerCount++;\n                            marker(eventArgs, markerSettings, markerData, dataIndex, location_1, transPoint, markerID, offset, scale, maps, _this.markerSVGObject);\n                        }\n                    }\n                    nullCount += (!isNaN(lat) && !isNaN(lng)) ? 0 : 1;\n                    markerTemplateCount += (eventArgs.cancel) ? 1 : 0;\n                    markerCount += (eventArgs.cancel) ? 1 : 0;\n                    maps.markerNullCount = (isNullOrUndefined(lng) || isNullOrUndefined(lat)) ? maps.markerNullCount + 1 : maps.markerNullCount;\n                    var markerDataLength = markerData.length - maps.markerNullCount;\n                    if (_this.markerSVGObject.childElementCount === (markerDataLength - markerTemplateCount - nullCount) && (type !== 'Template')) {\n                        layerElement.appendChild(_this.markerSVGObject);\n                        if (currentLayer.markerClusterSettings.allowClustering) {\n                            maps.svgObject.appendChild(_this.markerSVGObject);\n                            maps.element.appendChild(maps.svgObject);\n                            if ((currentLayer.layerType === 'OSM' || (currentLayer.urlTemplate.indexOf('openstreetmap') !== -1 && isNullOrUndefined(currentLayer.shapeData)))\n                                && maps.zoomSettings.enable) {\n                                layerElement.appendChild(_this.markerSVGObject);\n                            }\n                            else {\n                                clusterTemplate(currentLayer, _this.markerSVGObject, maps, layerIndex, _this.markerSVGObject, layerElement, true, false);\n                            }\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            maps.renderReactTemplates();\n                        }\n                    }\n                    if (markerTemplateEle.childElementCount === (markerDataLength - markerCount - nullCount) && getElementByID(maps.element.id + '_Secondary_Element')) {\n                        getElementByID(maps.element.id + '_Secondary_Element').appendChild(markerTemplateEle);\n                        if (maps.checkInitialRender) {\n                            if (currentLayer.markerClusterSettings.allowClustering) {\n                                clusterTemplate(currentLayer, markerTemplateEle, maps, layerIndex, _this.markerSVGObject, layerElement, false, false);\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                maps.renderReactTemplates();\n                            }\n                        }\n                    }\n                });\n            });\n        });\n    };\n    /**\n     * To find zoom level for individual layers like India, USA.\n     *\n     * @param {number} mapWidth - Specifies the width of the maps\n     * @param {number} mapHeight - Specifies the height of the maps\n     * @param {number} maxZoomFact - Specifies the maximum zoom factor\n     * @returns {number} - Returns the scale factor\n     */\n    Marker.prototype.calculateIndividualLayerMarkerZoomLevel = function (mapWidth, mapHeight, maxZoomFact) {\n        var latZoom;\n        var lngZoom;\n        var height = Math.abs(this.maps.baseMapBounds.latitude.max - this.maps.baseMapBounds.latitude.min);\n        var width = Math.abs(this.maps.baseMapBounds.longitude.max - this.maps.baseMapBounds.longitude.min);\n        latZoom = Math.floor(Math.log(mapHeight / height));\n        latZoom = (latZoom > maxZoomFact) ? maxZoomFact : latZoom;\n        lngZoom = Math.floor(Math.log(mapWidth / width));\n        lngZoom = (lngZoom > maxZoomFact) ? maxZoomFact : lngZoom;\n        var result = Math.min(latZoom, lngZoom);\n        var scaleFactor = Math.min(result, maxZoomFact - 1);\n        if (!this.maps.isTileMap) {\n            compareZoomFactor(scaleFactor, this.maps);\n        }\n        return scaleFactor;\n    };\n    /**\n     * To calculate center position and factor value dynamically\n     */\n    Marker.prototype.calculateZoomCenterPositionAndFactor = function (layersCollection) {\n        if (this.maps.zoomSettings.shouldZoomInitially && this.maps.markerModule) {\n            var minLong_1;\n            var maxLat_1;\n            var minLat_1;\n            var maxLong_1;\n            var latZoom = void 0;\n            var lngZoom = void 0;\n            var result = void 0;\n            var zoomLevel = void 0;\n            var centerLat = void 0;\n            var centerLong = void 0;\n            var maxZoomFact = this.maps.zoomSettings.maxZoom;\n            var mapWidth = this.maps.mapAreaRect.width;\n            var mapHeight = this.maps.mapAreaRect.height;\n            this.maps.markerZoomedState = this.maps.markerZoomedState ? this.maps.markerZoomedState : isNullOrUndefined(this.maps.markerZoomFactor) ?\n                !this.maps.markerZoomedState : this.maps.markerZoomFactor > 1 ? this.maps.markerZoomedState : !this.maps.markerZoomedState;\n            this.maps.defaultState = this.maps.markerZoomedState ? !this.maps.markerZoomedState : this.maps.defaultState;\n            Array.prototype.forEach.call(layersCollection, function (currentLayer, layerIndex) {\n                var isMarker = currentLayer.markerSettings.length !== 0;\n                if (isMarker) {\n                    Array.prototype.forEach.call(currentLayer.markerSettings, function (markerSetting, markerIndex) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var markerData = markerSetting.dataSource;\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        Array.prototype.forEach.call(markerData, function (data, dataIndex) {\n                            var latitude = !isNullOrUndefined(data['latitude']) ? parseFloat(data['latitude']) :\n                                !isNullOrUndefined(data['Latitude']) ? parseFloat(data['Latitude']) : null;\n                            var longitude = !isNullOrUndefined(data['longitude']) ? parseFloat(data['longitude']) :\n                                !isNullOrUndefined(data['Longitude']) ? parseFloat(data['Longitude']) : null;\n                            minLong_1 = isNullOrUndefined(minLong_1) && dataIndex === 0 ?\n                                longitude : minLong_1;\n                            maxLat_1 = isNullOrUndefined(maxLat_1) && dataIndex === 0 ?\n                                latitude : maxLat_1;\n                            minLat_1 = isNullOrUndefined(minLat_1) && dataIndex === 0 ?\n                                latitude : minLat_1;\n                            maxLong_1 = isNullOrUndefined(maxLong_1) && dataIndex === 0 ?\n                                longitude : maxLong_1;\n                            if (minLong_1 > longitude) {\n                                minLong_1 = longitude;\n                            }\n                            if (minLat_1 > latitude) {\n                                minLat_1 = latitude;\n                            }\n                            if (maxLong_1 < longitude) {\n                                maxLong_1 = longitude;\n                            }\n                            if (maxLat_1 < latitude) {\n                                maxLat_1 = latitude;\n                            }\n                        });\n                    });\n                }\n            });\n            if (!isNullOrUndefined(minLat_1) && !isNullOrUndefined(minLong_1) &&\n                !isNullOrUndefined(maxLong_1) && !isNullOrUndefined(maxLat_1)) {\n                // To find the center position\n                centerLat = (minLat_1 + maxLat_1) / 2;\n                centerLong = (minLong_1 + maxLong_1) / 2;\n                this.maps.markerCenterLatitude = centerLat;\n                this.maps.markerCenterLongitude = centerLong;\n                if (isNullOrUndefined(this.maps.markerZoomCenterPoint) || this.maps.markerZoomedState) {\n                    this.maps.markerZoomCenterPoint = {\n                        latitude: centerLat,\n                        longitude: centerLong\n                    };\n                }\n                var markerFactor = void 0;\n                if (this.maps.isTileMap || this.maps.baseMapRectBounds['min']['x'] === 0) {\n                    zoomLevel = calculateZoomLevel(minLat_1, maxLat_1, minLong_1, maxLong_1, mapWidth, mapHeight, this.maps);\n                    if (this.maps.isTileMap) {\n                        markerFactor = isNullOrUndefined(this.maps.markerZoomFactor) ?\n                            zoomLevel : isNullOrUndefined(this.maps.mapScaleValue) ?\n                            zoomLevel : this.maps.mapScaleValue > 1 && this.maps.markerZoomFactor !== 1 ?\n                            this.maps.mapScaleValue : zoomLevel;\n                    }\n                    else {\n                        markerFactor = isNullOrUndefined(this.maps.mapScaleValue) ? zoomLevel :\n                            (Math.floor(this.maps.scale) !== 1 &&\n                                this.maps.mapScaleValue !== zoomLevel)\n                                &&\n                                    (isNullOrUndefined(this.maps.shouldZoomCurrentFactor))\n                                ? this.maps.mapScaleValue : zoomLevel;\n                        if (((markerFactor === this.maps.mapScaleValue &&\n                            (this.maps.markerZoomFactor === 1 || this.maps.mapScaleValue === 1))\n                            && (!this.maps.enablePersistence))) {\n                            markerFactor = zoomLevel;\n                        }\n                    }\n                }\n                else {\n                    zoomLevel = this.calculateIndividualLayerMarkerZoomLevel(mapWidth, mapHeight, maxZoomFact);\n                    markerFactor = isNullOrUndefined(this.maps.mapScaleValue) ? zoomLevel :\n                        (this.maps.mapScaleValue !== zoomLevel)\n                            ? this.maps.mapScaleValue : zoomLevel;\n                }\n                this.maps.markerZoomFactor = markerFactor;\n            }\n        }\n        else {\n            this.maps.markerZoomedState = false;\n            if (this.maps.markerZoomFactor > 1) {\n                this.maps.markerCenterLatitude = null;\n                this.maps.markerCenterLongitude = null;\n                this.maps.markerZoomFactor = 1;\n                if (!this.maps.enablePersistence) {\n                    this.maps.mapScaleValue = 1;\n                }\n            }\n            if (this.maps.isTileMap && !this.maps.enablePersistence\n                && this.maps.mapScaleValue <= 1) {\n                this.maps.tileZoomLevel = this.maps.mapScaleValue === 0 ? 1 : this.maps.mapScaleValue;\n                if (this.maps.mapScaleValue === 1 && this.maps.markerZoomFactor === 1) {\n                    this.maps.tileTranslatePoint.x = 0;\n                    this.maps.tileTranslatePoint.y = 0;\n                }\n            }\n        }\n    };\n    /**\n     * To check and trigger marker click event\n     */\n    Marker.prototype.markerClick = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1 || target.indexOf('_cluster_') > 0) {\n            return;\n        }\n        var options = this.getMarker(target);\n        if (isNullOrUndefined(options)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: markerClick, data: options.data, maps: this.maps,\n            marker: options.marker, target: target, x: e.clientX, y: e.clientY,\n            latitude: options.data['latitude'] || options.data['Latitude'],\n            longitude: options.data['longitude'] || options.data['Longitude'],\n            value: options.data['name']\n        };\n        this.maps.trigger(markerClick, eventArgs);\n    };\n    /**\n     * To check and trigger Cluster click event\n     */\n    Marker.prototype.markerClusterClick = function (e) {\n        var target = e.target.id;\n        if (target.indexOf('_LayerIndex_') === -1 || target.indexOf('_cluster_') === -1) {\n            return;\n        }\n        var options = this.getMarker(target);\n        if (isNullOrUndefined(options)) {\n            return;\n        }\n        if ((options.clusterCollection.length > 0 && this.maps.markerClusterExpand)) {\n            if (getElement(this.maps.element.id + '_mapsTooltip') &&\n                this.maps.mapsTooltipModule.tooltipTargetID.indexOf('_MarkerIndex_') > -1) {\n                removeElement(this.maps.element.id + '_mapsTooltip');\n            }\n            if (this.sameMarkerData.length > 0 && !this.maps.markerClusterExpandCheck) {\n                this.maps.markerClusterExpandCheck = true;\n                mergeSeparateCluster(this.sameMarkerData, this.maps, this.markerSVGObject);\n            }\n            else {\n                this.sameMarkerData = options.clusterCollection;\n                this.maps.markerClusterExpandCheck = false;\n                clusterSeparate(this.sameMarkerData, this.maps, this.markerSVGObject, true);\n            }\n        }\n        var eventArgs = {\n            cancel: false, name: markerClusterClick, data: options, maps: this.maps,\n            target: target, x: e.clientX, y: e.clientY,\n            latitude: options.data['latitude'] || options.data['Latitude'], longitude: options.data['longitude'] || options.data['Longitude'],\n            markerClusterCollection: options['markCollection']\n        };\n        this.maps.trigger(markerClusterClick, eventArgs);\n    };\n    /**\n     * To get marker from target id\n     *\n     * @param {string} target - Specifies the target\n     * @returns {string} - Returns the string\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Marker.prototype.getMarker = function (target) {\n        var id = target.split('_LayerIndex_');\n        var index = parseInt(id[1].split('_')[0], 10);\n        var layer = this.maps.layers[index];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var markCollection = [];\n        var clusterCollection = [];\n        var marker;\n        this.maps.markerClusterExpand = layer.markerClusterSettings.allowClusterExpand;\n        if (target.indexOf('_MarkerIndex_') > -1) {\n            var markerIndex = parseInt(id[1].split('_MarkerIndex_')[1].split('_')[0], 10);\n            var dataIndex = parseInt(id[1].split('_dataIndex_')[1].split('_')[0], 10);\n            marker = layer.markerSettings[markerIndex];\n            if (!isNaN(markerIndex)) {\n                data = marker.dataSource[dataIndex];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var collection_1 = [];\n                if (!marker.template && (target.indexOf('_cluster_') > -1) && (this.maps.layers[index].markerClusterSettings.allowClusterExpand)) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    Array.prototype.forEach.call(marker.dataSource, function (location, index) {\n                        if (location['latitude'] === data['latitude'] && location['longitude'] === data['longitude']) {\n                            collection_1.push({ data: data, index: index });\n                        }\n                    });\n                }\n                if ((target.indexOf('_cluster_') > -1)) {\n                    var isClusterSame = false;\n                    var clusterElement = document.getElementById(target.indexOf('_datalabel_') > -1 ? layer.markerClusterSettings.shape === 'Balloon' ? target.split('_datalabel_')[0] + '_Group' : target.split('_datalabel_')[0] : layer.markerClusterSettings.shape === 'Balloon' ? target + '_Group' : target);\n                    var indexes = layer.markerClusterSettings.shape === 'Balloon' ? clusterElement.children[0].innerHTML.split(',').map(Number) : clusterElement.innerHTML.split(',').map(Number);\n                    collection_1 = [];\n                    for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\n                        var i = indexes_1[_i];\n                        collection_1.push({ data: marker.dataSource[i], index: i });\n                        markCollection.push(marker.dataSource[i]);\n                    }\n                    isClusterSame = false;\n                    clusterCollection.push({\n                        data: collection_1, layerIndex: index, markerIndex: markerIndex, dataIndex: dataIndex,\n                        targetClusterIndex: +(target.split('_cluster_')[1].indexOf('_datalabel_') > -1 ? target.split('_cluster_')[1].split('_datalabel_')[0] : target.split('_cluster_')[1]),\n                        isClusterSame: isClusterSame\n                    });\n                }\n                return { marker: marker, data: data, clusterCollection: clusterCollection, markCollection: markCollection };\n            }\n        }\n        return null;\n    };\n    /**\n     * To check and trigger marker move event\n     */\n    Marker.prototype.markerMove = function (e) {\n        var targetId = e.target.id;\n        if (targetId.indexOf('_LayerIndex_') === -1 || targetId.indexOf('_cluster_') > 0) {\n            return;\n        }\n        var options = this.getMarker(targetId);\n        if (isNullOrUndefined(options)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: markerMouseMove, data: options.data,\n            maps: this.maps, target: targetId, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(markerMouseMove, eventArgs);\n    };\n    /**\n     * To check and trigger cluster move event\n     */\n    Marker.prototype.markerClusterMouseMove = function (e) {\n        var targetId = e.target.id;\n        if (targetId.indexOf('_LayerIndex_') === -1 || targetId.indexOf('_cluster_') === -1) {\n            return;\n        }\n        var options = this.getMarker(targetId);\n        if (this.maps.markerClusterExpand) {\n            e.target.setAttribute('style', 'cursor: pointer');\n        }\n        if (isNullOrUndefined(options)) {\n            return;\n        }\n        var eventArgs = {\n            cancel: false, name: markerClusterMouseMove, data: options.data, maps: this.maps,\n            target: targetId, x: e.clientX, y: e.clientY\n        };\n        this.maps.trigger(markerClusterMouseMove, eventArgs);\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} - Returns the module name\n     */\n    Marker.prototype.getModuleName = function () {\n        return 'Marker';\n    };\n    /**\n     * To destroy the layers.\n     *\n     * @returns {void}\n     * @private\n     */\n    Marker.prototype.destroy = function () {\n        this.maps = null;\n        this.trackElements = [];\n        this.markerSVGObject = null;\n        this.sameMarkerData = [];\n    };\n    return Marker;\n}());\nexport { Marker };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}