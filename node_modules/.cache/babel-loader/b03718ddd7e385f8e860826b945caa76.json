{"ast":null,"code":"/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable no-case-declarations */\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { isNullOrUndefined, extend, createElement, Ajax } from '@syncfusion/ej2-base';\nimport { getShapeColor } from '../model/theme';\nimport { GeoLocation, isCustomPath, convertGeoToPoint, Point, PathOption, Size, removeElement } from '../utils/helper';\nimport { getElementByID, maintainSelection, getValueFromObject } from '../utils/helper';\nimport { RectOption, getTranslate, convertTileLatLongToPoint, checkShapeDataFields, CircleOption } from '../utils/helper';\nimport { getZoomTranslate, fixInitialScaleForTile } from '../utils/helper';\nimport { Tile } from '../model/base';\nimport { BingMap } from './bing-map';\nimport { ColorMapping } from './color-mapping';\nimport { layerRendering, shapeRendering } from '../index';\n/**\n * To calculate and render the shape layer\n */\nvar LayerPanel = /** @class */function () {\n  function LayerPanel(map) {\n    this.isMapCoordinates = true;\n    this.horizontalPan = false;\n    this.horizontalPanXCount = 0;\n    this.mapObject = map;\n    this.ajaxModule = new Ajax();\n    this.ajaxResponse = [];\n  }\n  LayerPanel.prototype.measureLayerPanel = function () {\n    var _this = this;\n    var layerCollection = this.mapObject.layersCollection;\n    var areaRect = this.mapObject.mapAreaRect;\n    var secondaryEle = getElementByID(this.mapObject.element.id + '_Secondary_Element');\n    if (this.mapObject.isTileMap && secondaryEle) {\n      this.tileSvgObject = this.mapObject.renderer.createSvg({\n        id: this.mapObject.element.id + '_Tile_SVG',\n        width: areaRect.width,\n        height: areaRect.height\n      });\n      var parentElement = createElement('div', {\n        id: this.mapObject.element.id + '_Tile_SVG_Parent',\n        styles: 'position: absolute; height: ' + areaRect.height + 'px; width: ' + areaRect.width + 'px;'\n      });\n      parentElement.appendChild(this.tileSvgObject);\n      secondaryEle.appendChild(parentElement);\n    }\n    this.layerGroup = this.mapObject.renderer.createGroup({\n      id: this.mapObject.element.id + '_Layer_Collections',\n      'clip-path': 'url(#' + this.mapObject.element.id + '_MapArea_ClipRect)'\n    });\n    if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n      var staticMapSize = 640;\n      this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', {\n        width: 1,\n        color: 'Gray'\n      }, 1, {\n        x: (areaRect.width - staticMapSize) / 2,\n        y: 0,\n        width: staticMapSize,\n        height: areaRect.height\n      }));\n    } else {\n      this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', {\n        width: 1,\n        color: 'Gray'\n      }, 1, {\n        x: this.mapObject.isTileMap ? 0 : areaRect.x,\n        y: this.mapObject.isTileMap ? 0 : areaRect.y,\n        width: areaRect.width,\n        height: areaRect.height\n      }));\n    }\n    this.layerGroup.appendChild(this.clipRectElement);\n    this.mapObject.baseMapBounds = null;\n    this.mapObject.baseMapRectBounds = null;\n    this.mapObject.baseSize = null;\n    Array.prototype.forEach.call(layerCollection, function (layer, index) {\n      _this.currentLayer = layer;\n      _this.processLayers(layer, index);\n    });\n    if (!isNullOrUndefined(this.mapObject.legendModule) && this.mapObject.legendSettings.position === 'Float') {\n      if (this.mapObject.isTileMap) {\n        this.layerGroup.appendChild(this.mapObject.legendModule.legendGroup);\n      } else {\n        this.mapObject.svgObject.appendChild(this.mapObject.legendModule.legendGroup);\n      }\n    }\n  };\n  /**\n   * Tile rendering\n   *\n   * @param {LayerPanel} panel - Specifies the layer panel.\n   * @param {LayerSettings} layer - Specifies the layer settings.\n   * @param {number} layerIndex - Specifies the layer index.\n   * @param {BingMap} bing - Specifies the bing map.\n   * @returns {void}\n   * @private\n   */\n  LayerPanel.prototype.renderTileLayer = function (panel, layer, layerIndex, bing) {\n    panel.currentFactor = panel.calculateFactor(layer);\n    panel.mapObject.defaultState = panel.mapObject.zoomSettings.zoomFactor !== 1 && !isNullOrUndefined(panel.mapObject.tileZoomLevel) && panel.mapObject.tileZoomLevel !== 1 ? false : true;\n    if (isNullOrUndefined(panel.mapObject.previousCenterLatitude) && isNullOrUndefined(panel.mapObject.previousCenterLongitude)) {\n      panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n      panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n    } else if (panel.mapObject.previousCenterLatitude !== panel.mapObject.centerPosition.latitude && panel.mapObject.previousCenterLongitude !== panel.mapObject.centerPosition.longitude) {\n      panel.mapObject.centerPositionChanged = true;\n      panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n      panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n    } else {\n      panel.mapObject.centerPositionChanged = false;\n    }\n    var center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n    var centerTileMap = center;\n    if (this.mapObject.isTileMap && panel.mapObject.markerModule && panel.mapObject.zoomSettings.enable) {\n      panel.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n      if (!isNullOrUndefined(this.mapObject.markerCenterLatitude) && !isNullOrUndefined(this.mapObject.markerCenterLongitude)) {\n        centerTileMap = new Point(panel.mapObject.markerCenterLongitude, panel.mapObject.markerCenterLatitude);\n      }\n    }\n    if (!panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.centerPosition.longitude && panel.mapObject.centerPosition.latitude && !panel.mapObject.zoomPersistence && panel.mapObject.defaultState) {\n      center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n    } else if (panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.markerZoomedState && !panel.mapObject.zoomPersistence && !isNullOrUndefined(panel.mapObject.markerZoomCenterPoint)) {\n      center = new Point(panel.mapObject.markerZoomCenterPoint.longitude, panel.mapObject.markerZoomCenterPoint.latitude);\n    } else {\n      center = {\n        x: null,\n        y: null\n      };\n    }\n    var zoomFactorValue = panel.mapObject.zoomSettings.shouldZoomInitially ? isNullOrUndefined(panel.mapObject.markerZoomFactor) ? 1 : panel.mapObject.markerZoomFactor : panel.mapObject.zoomSettings.zoomFactor;\n    zoomFactorValue = panel.mapObject.enablePersistence ? isNullOrUndefined(panel.mapObject.mapScaleValue) ? isNullOrUndefined(panel.mapObject.markerZoomFactor) ? panel.mapObject.zoomSettings.zoomFactor : panel.mapObject.markerZoomFactor : panel.mapObject.mapScaleValue : zoomFactorValue;\n    zoomFactorValue = panel.mapObject.zoomSettings.enable ? zoomFactorValue : panel.mapObject.zoomSettings.zoomFactor;\n    zoomFactorValue = zoomFactorValue > 0 ? zoomFactorValue : 1;\n    panel.mapObject.defaultState = zoomFactorValue !== 1 ? false : true;\n    if (!panel.mapObject.markerZoomedState && panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.zoomSettings.zoomFactor === 1) {\n      panel.mapObject.defaultState = true;\n    }\n    if (isNullOrUndefined(panel.mapObject.tileZoomLevel)) {\n      panel.mapObject.tileZoomLevel = zoomFactorValue;\n      panel.mapObject.previousZoomFactor = zoomFactorValue;\n    } else if (this.mapObject.isReset && panel.mapObject.tileZoomLevel === 1 && !panel.mapObject.zoomSettings.shouldZoomInitially) {\n      var zoomLevel = panel.mapObject.tileZoomLevel;\n      panel.mapObject.tileZoomLevel = zoomLevel;\n    } else if (panel.mapObject.zoomSettings.zoomFactor !== 1 || panel.mapObject.zoomSettings.shouldZoomInitially) {\n      panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n      panel.mapObject.tileZoomLevel = panel.mapObject.defaultState && panel.mapObject.zoomSettings.enable ? panel.mapObject.tileZoomLevel : !panel.mapObject.zoomSettings.shouldZoomInitially && !panel.mapObject.centerPositionChanged ? panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor ? panel.mapObject.zoomSettings.zoomFactor : panel.mapObject.tileZoomLevel : zoomFactorValue;\n      panel.mapObject.tileZoomLevel = zoomFactorValue === 1 && panel.mapObject.zoomSettings.zoomFactor === 0 ? zoomFactorValue : panel.mapObject.tileZoomLevel;\n      if (!isNullOrUndefined(panel.mapObject.tileTranslatePoint) && (panel.mapObject.markerZoomFactor !== panel.mapObject.mapScaleValue || isNullOrUndefined(panel.mapObject.markerZoomFactor) && isNullOrUndefined(panel.mapObject.mapScaleValue)) && (panel.mapObject.zoomSettings.zoomFactor <= 1 || panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor)) {\n        panel.mapObject.tileTranslatePoint.x = 0;\n        panel.mapObject.tileTranslatePoint.y = 0;\n      }\n    } else if (panel.mapObject.defaultState) {\n      panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n      panel.mapObject.tileZoomLevel = zoomFactorValue;\n      panel.mapObject.tileTranslatePoint.x = 0;\n      panel.mapObject.tileTranslatePoint.y = 0;\n    }\n    if (zoomFactorValue <= 1 && !isNullOrUndefined(panel.mapObject.height) && !panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.tileZoomLevel === panel.mapObject.tileZoomScale && this.mapObject.initialCheck) {\n      fixInitialScaleForTile(this.mapObject);\n    }\n    if (!isNullOrUndefined(panel.mapObject.centerLatOfGivenLocation) && !isNullOrUndefined(panel.mapObject.centerLongOfGivenLocation) && panel.mapObject.zoomNotApplied) {\n      centerTileMap.y = panel.mapObject.centerLatOfGivenLocation;\n      centerTileMap.x = panel.mapObject.centerLongOfGivenLocation;\n      panel.mapObject.tileZoomLevel = panel.mapObject.mapScaleValue = panel.mapObject.scaleOfGivenLocation;\n    }\n    panel.mapObject.tileTranslatePoint = panel.panTileMap(panel.mapObject.availableSize.width, panel.mapObject.availableSize.height, centerTileMap);\n    if (this.mapObject.zoomSettings.resetToInitial && this.mapObject.initialCheck && !isNullOrUndefined(panel.mapObject.height) && this.mapObject.availableSize.height > 512) {\n      this.mapObject.applyZoomReset = true;\n      this.mapObject.initialZoomLevel = Math.floor(this.mapObject.availableSize.height / 512);\n      var padding = this.mapObject.layers[this.mapObject.baseLayerIndex].layerType !== 'GoogleStaticMap' ? 20 : 0;\n      var totalSize = Math.pow(2, this.mapObject.initialZoomLevel) * 256;\n      this.mapObject.initialTileTranslate.x = this.mapObject.availableSize.width / 2 - totalSize / 2;\n      this.mapObject.initialTileTranslate.y = this.mapObject.availableSize.height / 2 - totalSize / 2 + padding;\n    }\n    panel.generateTiles(panel.mapObject.tileZoomLevel, panel.mapObject.tileTranslatePoint, null, bing);\n    if (!isNullOrUndefined(panel.mapObject.previousZoomFactor) && panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor) {\n      panel.mapObject.previousZoomFactor = panel.mapObject.zoomSettings.zoomFactor;\n    }\n    if (panel.mapObject.navigationLineModule) {\n      panel.layerObject.appendChild(panel.mapObject.navigationLineModule.renderNavigation(panel.currentLayer, panel.mapObject.tileZoomLevel, layerIndex));\n    }\n    if (panel.mapObject.markerModule) {\n      panel.mapObject.markerModule.markerRender(this.mapObject, panel.layerObject, layerIndex, panel.mapObject.tileZoomLevel, null);\n    }\n    panel.translateLayerElements(panel.layerObject, layerIndex);\n    panel.layerGroup.appendChild(panel.layerObject);\n  };\n  LayerPanel.prototype.processLayers = function (layer, layerIndex) {\n    var _this = this;\n    this.layerObject = this.mapObject.renderer.createGroup({\n      id: this.mapObject.element.id + '_LayerIndex_' + layerIndex\n    });\n    if (!this.mapObject.enablePersistence) {\n      var itemName = this.mapObject.getModuleName() + this.mapObject.element.id;\n      if (navigator.userAgent.indexOf('Edge') === -1) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = void 0;\n        try {\n          data = window.localStorage;\n        } catch (e) {\n          data = null;\n        }\n        if (!isNullOrUndefined(data) && window.localStorage.getItem(itemName)) {\n          window.localStorage.removeItem(itemName);\n        }\n      }\n    }\n    var eventArgs = {\n      cancel: false,\n      name: layerRendering,\n      index: layerIndex,\n      layer: layer,\n      maps: this.mapObject,\n      visible: layer.visible\n    };\n    this.mapObject.trigger('layerRendering', eventArgs, function (observedArgs) {\n      if (!eventArgs.cancel && eventArgs.visible) {\n        if (layer.layerType === 'OSM') {\n          layer.urlTemplate = 'https://a.tile.openstreetmap.org/level/tileX/tileY.png';\n        }\n        if (layer.layerType === 'Google') {\n          layer.urlTemplate = 'https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level';\n        }\n        if (layer.layerType !== 'Geometry' || isNullOrUndefined(layer.shapeData) && !isNullOrUndefined(layer.urlTemplate) && layer.urlTemplate !== '') {\n          if (layer.layerType !== 'Bing' || _this.bing) {\n            if (!isNullOrUndefined(layer.urlTemplate) && layer.urlTemplate.indexOf('quadkey') > -1) {\n              var bing = new BingMap(_this.mapObject);\n              _this.bingMapCalculation(layer, layerIndex, _this, bing);\n            } else {\n              _this.renderTileLayer(_this, layer, layerIndex);\n            }\n          } else if (layer.key && layer.key.length > 1) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = _this;\n            var bing_1 = new BingMap(_this.mapObject);\n            var bingType = layer.bingMapType === 'AerialWithLabel' ? 'AerialWithLabelsOnDemand' : layer.bingMapType;\n            var url = 'https://dev.virtualearth.net/REST/V1/Imagery/Metadata/' + bingType;\n            var ajax = new Ajax({\n              url: url + '?output=json&include=ImageryProviders&urischeme=https&key=' + layer.key\n            });\n            ajax.onSuccess = function (json) {\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              var jsonObject = JSON.parse(json);\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              var resource = jsonObject['resourceSets'][0]['resources'][0];\n              var imageUrl = resource['imageUrl'];\n              var subDomains = resource['imageUrlSubdomains'];\n              var maxZoom = resource['zoomMax'];\n              var markerGroupElement = document.getElementById(proxy_1.mapObject.element.id + '_Markers_Group');\n              if (imageUrl !== null && imageUrl !== undefined && imageUrl !== bing_1.imageUrl) {\n                bing_1.imageUrl = imageUrl;\n              }\n              if (subDomains !== null && subDomains !== undefined && subDomains !== bing_1.subDomains) {\n                bing_1.subDomains = subDomains;\n              }\n              if (maxZoom !== null && maxZoom !== undefined && maxZoom !== bing_1.maxZoom) {\n                bing_1.maxZoom = maxZoom;\n              }\n              proxy_1.mapObject['bingMap'] = bing_1;\n              proxy_1.renderTileLayer(proxy_1, layer, layerIndex, bing_1);\n              _this.mapObject.arrangeTemplate();\n              if (_this.mapObject.zoomModule && _this.mapObject.previousScale !== _this.mapObject.scale) {\n                _this.mapObject.zoomModule.applyTransform(_this.mapObject, true);\n              }\n            };\n            ajax.send();\n          }\n        } else {\n          if (!isNullOrUndefined(layer.shapeData) && (!isNullOrUndefined(layer.shapeData['geometries']) || !isNullOrUndefined(layer.shapeData['features']))) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var featureData = !isNullOrUndefined(layer.shapeData['geometries']) &&\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            layer.shapeData['geometries'].length > 0 ? layer.shapeData['geometries'] : layer.shapeData['features'];\n            layer.layerData = [];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var bbox = layer.shapeData['bbox'];\n            if (!isNullOrUndefined(bbox) && layer.isBaseLayer) {\n              _this.mapObject.baseMapBounds = new GeoLocation({\n                min: bbox[0][1],\n                max: bbox[1][1]\n              }, {\n                min: bbox[0][0],\n                max: bbox[1][0]\n              });\n            } else if (isNullOrUndefined(_this.mapObject.baseMapBounds) && !isCustomPath(featureData)) {\n              _this.calculateRectBounds(featureData);\n            }\n            _this.calculatePathCollection(layerIndex, featureData);\n          }\n        }\n      }\n    });\n    if (!this.mapObject.isTileMap) {\n      this.mapObject.svgObject.appendChild(this.layerGroup);\n    } else if (this.tileSvgObject) {\n      this.tileSvgObject.appendChild(this.layerGroup);\n      this.mapObject.baseMapBounds = null;\n    }\n  };\n  LayerPanel.prototype.bingMapCalculation = function (layer, layerIndex, proxy, bing) {\n    bing.imageUrl = layer.urlTemplate;\n    bing.subDomains = ['t0', 't1', 't2', 't3'];\n    bing.maxZoom = '21';\n    proxy.mapObject['bingMap'] = bing;\n    proxy.renderTileLayer(proxy, layer, layerIndex, bing);\n    this.mapObject.arrangeTemplate();\n    if (this.mapObject.zoomModule && this.mapObject.previousScale !== this.mapObject.scale) {\n      this.mapObject.zoomModule.applyTransform(this.mapObject, true);\n    }\n  };\n  LayerPanel.prototype.bubbleCalculation = function (bubbleSettings, range) {\n    if (bubbleSettings.dataSource != null && bubbleSettings != null) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var bubbleDataSource = bubbleSettings.dataSource;\n      for (var i = 0; i < bubbleDataSource.length; i++) {\n        var bubbledata = !isNullOrUndefined(bubbleSettings.valuePath) ? bubbleSettings.valuePath.indexOf('.') > -1 ? Number(getValueFromObject(bubbleSettings.dataSource[i], bubbleSettings.valuePath)) : parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath]) : parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath]);\n        if (i !== 0) {\n          if (bubbledata > range.max) {\n            range.max = bubbledata;\n          } else if (bubbledata < range.min) {\n            range.min = bubbledata;\n          }\n        } else {\n          range.max = range.min = bubbledata;\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.calculatePathCollection = function (layerIndex, renderData) {\n    var _this = this;\n    this.groupElements = [];\n    if (!isCustomPath(renderData)) {\n      this.currentFactor = this.calculateFactor(this.currentLayer);\n    }\n    this.rectBounds = null;\n    var shapeSettings = this.currentLayer.shapeSettings;\n    var bubbleSettings = this.currentLayer.bubbleSettings;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Array.prototype.forEach.call(renderData, function (geometryData, index) {\n      if (!isNullOrUndefined(geometryData['geometry']) || !isNullOrUndefined(geometryData['coordinates'])) {\n        var type = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['type'] : geometryData['type'];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var coords = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['coordinates'] : geometryData['coordinates'];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var data = geometryData['geometry'];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var properties = geometryData['properties'];\n        _this.generatePoints(type, coords, data, properties);\n      }\n    });\n    this.currentLayer.rectBounds = this.rectBounds;\n    if (isNullOrUndefined(this.mapObject.baseMapRectBounds) && this.currentLayer.isBaseLayer) {\n      this.mapObject.baseMapRectBounds = this.rectBounds;\n    }\n    var colors = shapeSettings.palette.length > 1 ? shapeSettings.palette : getShapeColor(this.mapObject.theme);\n    var labelTemplateEle = createElement('div', {\n      id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_Label_Template_Group',\n      className: this.mapObject.element.id + '_template',\n      styles: 'pointer-events: none; overflow: hidden; position: absolute;' + 'top:' + this.mapObject.mapAreaRect.y + 'px;' + 'left:' + this.mapObject.mapAreaRect.x + 'px;' + 'height:' + this.mapObject.mapAreaRect.height + 'px;' + 'width:' + this.mapObject.mapAreaRect.width + 'px;'\n    });\n    if (this.currentLayer.layerData.length !== 0) {\n      var _loop_1 = function (i) {\n        var k = void 0;\n        var borderValue = {\n          color: shapeSettings.border.color,\n          width: shapeSettings.border.width,\n          opacity: shapeSettings.border.opacity\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var currentShapeData = this_1.currentLayer.layerData[i];\n        var pathOptions;\n        var polyLineOptions = void 0;\n        var circleOptions;\n        var groupElement;\n        var drawObject = void 0;\n        var path = '';\n        var points = '';\n        var fill = shapeSettings.autofill ? colors[i % colors.length] : shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill;\n        if (shapeSettings.colorValuePath !== null && !isNullOrUndefined(currentShapeData['property'])) {\n          k = checkShapeDataFields(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n          if (k !== null && shapeSettings.colorMapping.length === 0) {\n            fill = this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1 ? getValueFromObject(this_1.currentLayer.dataSource[k], shapeSettings.colorValuePath) : this_1.currentLayer.dataSource[k][shapeSettings.colorValuePath];\n          } else if (currentShapeData['property'][shapeSettings.colorValuePath] &&\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this_1.currentLayer.dataSource.length === 0 && shapeSettings.colorMapping.length === 0) {\n            fill = this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1 ? getValueFromObject(currentShapeData['property'], shapeSettings.colorValuePath) : currentShapeData['property'][shapeSettings.colorValuePath];\n          }\n          fill = !isNullOrUndefined(fill) ? fill : shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill;\n        }\n        var shapeID = this_1.mapObject.element.id + '_LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_' + k;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var getShapeColor_1 = this_1.getShapeColorMapping(this_1.currentLayer, currentShapeData['property'], fill);\n        fill = Object.prototype.toString.call(getShapeColor_1) === '[object Object]' && !isNullOrUndefined(getShapeColor_1['fill']) ? getShapeColor_1['fill'] : fill;\n        if (this_1.currentLayer.shapeSettings.borderColorValuePath || this_1.currentLayer.shapeSettings.borderWidthValuePath) {\n          var borderColorValue = this_1.currentLayer.shapeSettings.borderColorValuePath;\n          var borderWidthValue = this_1.currentLayer.shapeSettings.borderWidthValuePath;\n          k = checkShapeDataFields(\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n          if (k !== null) {\n            if (this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath]) {\n              borderValue.color = this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath];\n            }\n            if (this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath]) {\n              borderValue.width = this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath];\n            }\n          }\n        }\n        var opacity = Object.prototype.toString.call(getShapeColor_1) === '[object Object]' && !isNullOrUndefined(getShapeColor_1['opacity']) ? getShapeColor_1['opacity'] : shapeSettings.opacity;\n        var eventArgs = {\n          cancel: false,\n          name: shapeRendering,\n          index: i,\n          data: this_1.currentLayer.dataSource ? this_1.currentLayer.dataSource[k] : null,\n          maps: this_1.mapObject,\n          shape: shapeSettings,\n          fill: fill,\n          border: {\n            width: borderValue.width,\n            color: borderValue.color,\n            opacity: borderValue.opacity\n          }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var shapeRenderingSuccess = function (eventArgs) {\n          var drawingType = !isNullOrUndefined(currentShapeData['_isMultiPolygon']) ? 'MultiPolygon' : isNullOrUndefined(currentShapeData['type']) ? currentShapeData[0]['type'] : currentShapeData['type'];\n          drawingType = drawingType === 'Polygon' || drawingType === 'MultiPolygon' ? 'Polygon' : drawingType;\n          if (!eventArgs.cancel) {\n            eventArgs.fill = eventArgs.fill === '#A6A6A6' ? eventArgs.shape.fill || _this.mapObject.themeStyle.shapeFill : eventArgs.fill;\n            eventArgs.border.color = eventArgs.border.color === '#000000' ? eventArgs.shape.border.color : eventArgs.border.color;\n            eventArgs.border.width = eventArgs.border.width === 0 ? eventArgs.shape.border.width : eventArgs.border.width;\n            if (isNullOrUndefined(shapeSettings.borderColorValuePath)) {\n              _this.mapObject.layers[layerIndex].shapeSettings.border.color = eventArgs.border.color;\n            }\n            if (isNullOrUndefined(shapeSettings.borderWidthValuePath)) {\n              _this.mapObject.layers[layerIndex].shapeSettings.border.width = eventArgs.border.width;\n            }\n          } else {\n            eventArgs.fill = fill;\n            eventArgs.border.color = shapeSettings.border.color;\n            eventArgs.border.width = shapeSettings.border.width;\n            _this.mapObject.layers[layerIndex].shapeSettings.border = shapeSettings.border;\n          }\n          eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n          if (_this.groupElements.length < 1) {\n            groupElement = _this.mapObject.renderer.createGroup({\n              id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group',\n              transform: ''\n            });\n            _this.groupElements.push(groupElement);\n          } else {\n            for (var i_1 = 0; i_1 < _this.groupElements.length; i_1++) {\n              var ele = _this.groupElements[i_1];\n              if (ele.id.indexOf(drawingType) > -1) {\n                groupElement = ele;\n                break;\n              } else if (i_1 >= _this.groupElements.length - 1) {\n                groupElement = _this.mapObject.renderer.createGroup({\n                  id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group'\n                });\n                _this.groupElements.push(groupElement);\n                break;\n              }\n            }\n          }\n          var pathEle;\n          switch (drawingType) {\n            case 'Polygon':\n              if (!currentShapeData['_isMultiPolygon']) {\n                path += 'M' + currentShapeData[0]['point']['x'] + ' ' + currentShapeData[0]['point']['y'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                currentShapeData.map(function (shapeData) {\n                  path += ' L ' + shapeData['point']['x'] + ' ' + shapeData['point']['y'];\n                });\n              } else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                path = _this.generateMultiPolygonPath(currentShapeData);\n              }\n              path += ' z ';\n              if (path.length > 3) {\n                pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n              }\n              break;\n            case 'LineString':\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              currentShapeData.map(function (lineData, index) {\n                if (index === 0) {\n                  path += 'M ' + lineData['point']['x'] + ' ' + lineData['point']['y'];\n                } else {\n                  path += 'L' + lineData['point']['x'] + ' , ' + lineData['point']['y'] + ' ';\n                }\n              });\n              if (path.length > 3) {\n                pathOptions = new PathOption(shapeID, 'transparent', !isNullOrUndefined(eventArgs.border.width) ? eventArgs.border.width : 1, !isNullOrUndefined(eventArgs.fill) ? eventArgs.fill : eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n              }\n              break;\n            case 'MultiLineString':\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              currentShapeData.map(function (multilineData) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                multilineData.map(function (lineData, index) {\n                  if (index === 0) {\n                    path += 'M ' + lineData['point']['x'] + ' ' + lineData['point']['y'];\n                  } else {\n                    path += 'L' + lineData['point']['x'] + ' , ' + lineData['point']['y'] + ' ';\n                  }\n                });\n              });\n              if (path.length > 3) {\n                pathOptions = new PathOption(shapeID, 'transparent', !isNullOrUndefined(eventArgs.border.width) ? eventArgs.border.width : 1, !isNullOrUndefined(eventArgs.fill) ? eventArgs.fill : eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n              }\n              break;\n            case 'Point':\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              var pointData = currentShapeData['point'];\n              var circleRadius = _this.mapObject.layers[layerIndex].type !== 'SubLayer' ? shapeSettings.circleRadius : shapeSettings.circleRadius / (_this.mapObject.isTileMap ? _this.mapObject.scale : _this.currentFactor);\n              circleOptions = new CircleOption(shapeID, eventArgs.fill, eventArgs.border, opacity, pointData['x'], pointData['y'], circleRadius, shapeSettings.dashArray);\n              pathEle = _this.mapObject.renderer.drawCircle(circleOptions);\n              break;\n            case 'MultiPoint':\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              currentShapeData.map(function (multiPointData, index) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var pointData = multiPointData['point'];\n                var circleRadius = _this.mapObject.layers[layerIndex].type !== 'SubLayer' ? shapeSettings.circleRadius : shapeSettings.circleRadius / (_this.mapObject.isTileMap ? _this.mapObject.scale : _this.currentFactor);\n                circleOptions = new CircleOption(shapeID + \"_multiLine_\" + index, eventArgs.fill, eventArgs.border, opacity, pointData['x'], pointData['y'], circleRadius, shapeSettings.dashArray);\n                pathEle = _this.mapObject.renderer.drawCircle(circleOptions);\n                _this.pathAttributeCalculate(groupElement, pathEle, drawingType, currentShapeData, i);\n              });\n              break;\n            case 'Path':\n              path = currentShapeData['point'];\n              pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n              pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n              break;\n          }\n          if (!isNullOrUndefined(pathEle) && drawingType !== 'MultiPoint') {\n            _this.pathAttributeCalculate(groupElement, pathEle, drawingType, currentShapeData, i);\n          }\n          if (i === _this.currentLayer.layerData.length - 1) {\n            _this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n          }\n        };\n        shapeRenderingSuccess.bind(this_1);\n        this_1.mapObject.trigger('shapeRendering', eventArgs, shapeRenderingSuccess);\n      };\n      var this_1 = this;\n      for (var i = 0; i < this.currentLayer.layerData.length; i++) {\n        _loop_1(i);\n      }\n    } else {\n      this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n    }\n  };\n  /**\n   * layer features as bubble, marker, datalabel, navigation line.\n   *\n   * @param {groupElement} Element - Specifies the element to append the group\n   * @param {pathEle} Element - Specifies the svg element\n   * @param {drawingType} string - Specifies the data type\n   * @param {currentShapeData} any - Specifies the layer of shapedata.\n   * @param {index} number - Specifies the tab index.\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.pathAttributeCalculate = function (groupElement, pathEle, drawingType, currentShapeData, index) {\n    var property = Object.prototype.toString.call(this.currentLayer.shapePropertyPath) === '[object Array]' ? this.currentLayer.shapePropertyPath : [this.currentLayer.shapePropertyPath];\n    var properties;\n    for (var j = 0; j < property.length; j++) {\n      if (!isNullOrUndefined(currentShapeData['property'])) {\n        properties = property[j];\n        break;\n      }\n    }\n    pathEle.setAttribute('aria-label', !isNullOrUndefined(currentShapeData['property']) ? currentShapeData['property'][properties] : '');\n    pathEle.setAttribute('tabindex', (this.mapObject.tabIndex + index + 3).toString());\n    pathEle.setAttribute('role', '');\n    if (drawingType === 'LineString' || drawingType === 'MultiLineString') {\n      pathEle.setAttribute('style', 'outline:none');\n    }\n    maintainSelection(this.mapObject.selectedElementId, this.mapObject.shapeSelectionClass, pathEle, 'ShapeselectionMapStyle');\n    if (this.mapObject.toggledShapeElementId) {\n      for (var j = 0; j < this.mapObject.toggledShapeElementId.length; j++) {\n        var styleProperty = this.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings ? this.currentLayer.shapeSettings : this.mapObject.legendSettings.toggleLegendSettings;\n        if (this.mapObject.toggledShapeElementId[j] === pathEle.id) {\n          pathEle.setAttribute('fill', styleProperty.fill);\n          pathEle.setAttribute('stroke', styleProperty.border.color);\n          pathEle.setAttribute('fill-opacity', styleProperty.opacity.toString());\n          pathEle.setAttribute('stroke-opacity', (isNullOrUndefined(styleProperty.border.opacity) ? styleProperty.opacity : styleProperty.border.opacity).toString());\n          pathEle.setAttribute('stroke-width', styleProperty.border.width.toString());\n        }\n      }\n    }\n    groupElement.appendChild(pathEle);\n  };\n  /**\n   * layer features as bubble, marker, datalabel, navigation line.\n   *\n   * @param {number} layerIndex - Specifies the layer index\n   * @param {string[]} colors - Specifies the colors\n   * @param {Object[]} renderData - Specifies the render data\n   * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n   * @returns {void}\n   */\n  LayerPanel.prototype.layerFeatures = function (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layerIndex, colors, renderData, labelTemplateEle) {\n    var _this = this;\n    var bubbleG;\n    if (this.currentLayer.bubbleSettings.length && this.mapObject.bubbleModule) {\n      var length_1 = this.currentLayer.bubbleSettings.length;\n      var bubble_1;\n      var _loop_2 = function (j) {\n        bubble_1 = this_2.currentLayer.bubbleSettings[j];\n        bubbleG = this_2.mapObject.renderer.createGroup({\n          id: this_2.mapObject.element.id + '_LayerIndex_' + layerIndex + '_bubble_Group_' + j\n        });\n        var range = {\n          min: 0,\n          max: 0\n        };\n        this_2.bubbleCalculation(bubble_1, range);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var bubbleDataSource = bubble_1.dataSource;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        bubbleDataSource.map(function (bubbleData, i) {\n          _this.renderBubble(_this.currentLayer, bubbleData, colors[i % colors.length], range, j, i, bubbleG, layerIndex, bubble_1);\n        });\n        this_2.groupElements.push(bubbleG);\n      };\n      var this_2 = this;\n      for (var j = 0; j < length_1; j++) {\n        _loop_2(j);\n      }\n    }\n    if (this.mapObject.markerModule && !this.mapObject.isTileMap && this.mapObject.zoomSettings.enable) {\n      this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n    }\n    var group = this.mapObject.renderer.createGroup({\n      id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_dataLableIndex_Group',\n      style: 'pointer-events: none;'\n    });\n    if (this.mapObject.dataLabelModule && this.currentLayer.dataLabelSettings.visible) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var intersect_1 = [];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      renderData.map(function (currentShapeData, i) {\n        _this.renderLabel(_this.currentLayer, layerIndex, currentShapeData, group, i, labelTemplateEle, intersect_1);\n      });\n      this.groupElements.push(group);\n    }\n    if (this.mapObject.navigationLineModule) {\n      this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer, this.currentFactor, layerIndex));\n    }\n    this.groupElements.map(function (element) {\n      _this.layerObject.appendChild(element);\n    });\n    if (this.mapObject.markerModule) {\n      this.mapObject.markerModule.markerRender(this.mapObject, this.layerObject, layerIndex, this.mapObject.isTileMap ? Math.floor(this.currentFactor) : this.currentFactor, null);\n    }\n    this.translateLayerElements(this.layerObject, layerIndex);\n    this.layerGroup.appendChild(this.layerObject);\n  };\n  /**\n   * render datalabel\n   *\n   * @param {LayerSettings} layer - Specifies the layer\n   * @param {number} layerIndex - Specifies the layer index\n   * @param {object[]} shape - Specifies the shape\n   * @param {Element} group - Specifies the group\n   * @param {number} shapeIndex - Specifies the shape index\n   * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n   * @param {object[]} intersect - Specifies the intersect\n   * @returns {void}\n   */\n  LayerPanel.prototype.renderLabel = function (layer, layerIndex,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  shape, group, shapeIndex, labelTemplateEle, intersect) {\n    this.mapObject.dataLabelModule.renderLabel(layer, layerIndex, shape, layer.layerData, group, labelTemplateEle, shapeIndex, intersect);\n  };\n  /**\n   * To render path for multipolygon\n   *\n   * @param {any[]} currentShapeData Specifies the current shape data\n   * @returns {string} Returns the path\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.generateMultiPolygonPath = function (currentShapeData) {\n    var path = '';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var shape;\n    for (var j = 0; j < currentShapeData.length; j++) {\n      path += 'M' + currentShapeData[j][0]['point']['x'] + ' ' + currentShapeData[j][0]['point']['y'];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      shape = currentShapeData[j];\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      shape.map(function (shapeData) {\n        path += ' L ' + shapeData['point']['x'] + ' ' + shapeData['point']['y'];\n      });\n    }\n    return path;\n  };\n  /**\n   * To render bubble\n   *\n   * @param {LayerSettings} layer - Specifies the layer\n   * @param {object} bubbleData - Specifies the bubble data\n   * @param {string} color - Specifies the color\n   * @param {number} range - Specifies the range\n   * @param {number} bubbleIndex - Specifies the bubble index\n   * @param {number} dataIndex - Specifies the data index\n   * @param {number} group - Specifies the group\n   * @param {number} layerIndex - Specifies the layer index\n   * @param {BubbleSettingsModel} bubbleSettings - Specifies the bubble settings\n   * @returns {void}\n   */\n  LayerPanel.prototype.renderBubble = function (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  layer, bubbleData, color, range, bubbleIndex, dataIndex, group, layerIndex, bubbleSettings) {\n    if (isNullOrUndefined(this.mapObject.bubbleModule) || !bubbleSettings.visible) {\n      return null;\n    }\n    color = bubbleSettings.fill ? bubbleSettings.fill : color;\n    this.mapObject.bubbleModule.id = this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_BubbleIndex_' + bubbleIndex + '_dataIndex_' + dataIndex;\n    this.mapObject.bubbleModule.renderBubble(bubbleSettings, bubbleData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, this.mapObject.bubbleModule.id);\n  };\n  /**\n   * To get the shape color from color mapping module\n   *\n   * @param {LayerSettingsModel} layer - Specifies the layer\n   * @param {object} shape - Specifies the shape\n   * @param {string} color - Specifies the color\n   * @returns {Object} - Returns the object\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.getShapeColorMapping = function (layer, shape, color) {\n    color = color ? color : layer.shapeSettings.fill;\n    if (layer.shapeSettings.colorMapping.length === 0 && isNullOrUndefined(layer.dataSource)) {\n      return color;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var index = checkShapeDataFields(layer.dataSource, shape, layer.shapeDataPath, layer.shapePropertyPath, layer);\n    var colorMapping = new ColorMapping(this.mapObject);\n    if (isNullOrUndefined(layer.dataSource[index])) {\n      return color;\n    }\n    return colorMapping.getShapeColorMapping(layer.shapeSettings, layer.dataSource[index], color);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.generatePoints = function (type, coordinates, data, properties) {\n    var _this = this;\n    var latitude;\n    var longitude;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var newData = [];\n    switch (type.toLowerCase()) {\n      case 'polygon':\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        newData = this.calculatePolygonBox(coordinates[0], data, properties);\n        if (newData.length > 0) {\n          newData['property'] = properties;\n          newData['type'] = type;\n          newData['_isMultiPolygon'] = false;\n          this.currentLayer.layerData.push(newData);\n        }\n        break;\n      case 'multipolygon':\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var multiPolygonDatas = [];\n        for (var i = 0; i < coordinates.length; i++) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          newData = this.calculatePolygonBox(coordinates[i][0], data, properties);\n          if (newData.length > 0) {\n            multiPolygonDatas.push(newData);\n          }\n        }\n        multiPolygonDatas['property'] = properties;\n        multiPolygonDatas['type'] = type;\n        multiPolygonDatas['_isMultiPolygon'] = true;\n        this.currentLayer.layerData.push(multiPolygonDatas);\n        break;\n      case 'linestring':\n        var extraSpace_1 = !isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ? typeof this.currentLayer.shapeSettings.border.width === 'string' ? parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width : 1;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        coordinates.map(function (points, index) {\n          latitude = points[1];\n          longitude = points[0];\n          var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n          _this.calculateBox(point, extraSpace_1);\n          newData.push({\n            point: point,\n            lat: latitude,\n            lng: longitude\n          });\n        });\n        newData['property'] = properties;\n        newData['type'] = type;\n        this.currentLayer.layerData.push(newData);\n        break;\n      case 'multilinestring':\n        var extraSpaces_1 = !isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ? typeof this.currentLayer.shapeSettings.border.width === 'string' ? parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width : 1;\n        var multiLineData_1 = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        coordinates.map(function (multiPoints) {\n          newData = [];\n          multiPoints.map(function (points) {\n            latitude = points[1];\n            longitude = points[0];\n            var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n            _this.calculateBox(point, extraSpaces_1);\n            newData.push({\n              point: point,\n              lat: latitude,\n              lng: longitude\n            });\n          });\n          multiLineData_1.push(newData);\n        });\n        multiLineData_1['property'] = properties;\n        multiLineData_1['type'] = type;\n        this.currentLayer.layerData.push(multiLineData_1);\n        break;\n      case 'point':\n        var pointExtraSpace = (!isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ? typeof this.currentLayer.shapeSettings.border.width === 'string' ? parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width : 1) + this.currentLayer.shapeSettings.circleRadius * 2;\n        latitude = coordinates[1];\n        longitude = coordinates[0];\n        var point = convertGeoToPoint(latitude, longitude, this.currentFactor, this.currentLayer, this.mapObject);\n        this.calculateBox(point, pointExtraSpace);\n        this.currentLayer.layerData.push({\n          point: point,\n          type: type,\n          lat: latitude,\n          lng: longitude,\n          property: properties\n        });\n        break;\n      case 'multipoint':\n        {\n          var extraSpace_2 = (!isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ? typeof this.currentLayer.shapeSettings.border.width === 'string' ? parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width : 1) + this.currentLayer.shapeSettings.circleRadius * 2;\n          newData = [];\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          coordinates.map(function (points) {\n            latitude = points[1];\n            longitude = points[0];\n            var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n            _this.calculateBox(point, extraSpace_2);\n            newData.push({\n              point: point,\n              lat: latitude,\n              lng: longitude\n            });\n          });\n          newData['property'] = properties;\n          newData['type'] = type;\n          this.currentLayer.layerData.push(newData);\n          break;\n        }\n      case 'path':\n        this.currentLayer.layerData.push({\n          point: data['d'],\n          type: type,\n          property: properties\n        });\n        break;\n    }\n  };\n  LayerPanel.prototype.calculateBox = function (point, extraSpace) {\n    if (isNullOrUndefined(this.rectBounds)) {\n      this.rectBounds = {\n        min: {\n          x: point.x - extraSpace,\n          y: point.y - extraSpace\n        },\n        max: {\n          x: point.x + extraSpace,\n          y: point.y + extraSpace\n        }\n      };\n    } else {\n      this.rectBounds['min']['x'] = Math.min(this.rectBounds['min']['x'], point.x - extraSpace);\n      this.rectBounds['min']['y'] = Math.min(this.rectBounds['min']['y'], point.y - extraSpace);\n      this.rectBounds['max']['x'] = Math.max(this.rectBounds['max']['x'], point.x + extraSpace);\n      this.rectBounds['max']['y'] = Math.max(this.rectBounds['max']['y'], point.y + extraSpace);\n    }\n  };\n  LayerPanel.prototype.calculateFactor = function (layer) {\n    var horFactor;\n    var verFactor = 1;\n    var divide = 10;\n    var exp = 'e+1';\n    var bounds = this.mapObject.baseMapBounds;\n    var mapSize = new Size(this.mapObject.mapAreaRect.width, this.mapObject.mapAreaRect.height - 5);\n    var mapHeight;\n    var mapWidth;\n    if (bounds) {\n      var start = convertGeoToPoint(bounds.latitude.min, bounds.longitude.min, null, layer, this.mapObject);\n      var end = convertGeoToPoint(bounds.latitude.max, bounds.longitude.max, null, layer, this.mapObject);\n      mapHeight = end.y - start.y;\n      mapWidth = end.x - start.x;\n      if (mapHeight === 0 || mapWidth === 0) {\n        mapWidth = mapSize.width / 2;\n        mapHeight = mapSize.height;\n      }\n    } else {\n      mapHeight = mapWidth = 500;\n    }\n    if (mapHeight < mapSize.height) {\n      horFactor = parseFloat(Math.abs(Number(mapSize.height / Number(mapHeight.toString() + exp)) * 100).toString().split('.')[0]) / divide;\n    } else {\n      horFactor = mapSize.height / mapHeight;\n    }\n    if (mapWidth < mapSize.width) {\n      verFactor = parseFloat(Math.abs(Number(mapSize.width / Number(mapWidth.toString() + exp)) * 100).toString().split('.')[0]) / divide;\n    } else {\n      verFactor = mapSize.width / mapWidth;\n    }\n    return Math.min(verFactor, horFactor);\n  };\n  LayerPanel.prototype.translateLayerElements = function (layerElement, index) {\n    var childNode;\n    this.mapObject.translateType = 'layer';\n    if (!isNullOrUndefined(this.mapObject.baseMapRectBounds)) {\n      var duration = this.currentLayer.animationDuration;\n      var animate = duration !== 0 || isNullOrUndefined(this.mapObject.zoomModule);\n      this.mapObject.baseTranslatePoint = this.mapObject.zoomTranslatePoint;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var translate = void 0;\n      if (this.mapObject.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n        translate = getZoomTranslate(this.mapObject, this.currentLayer, animate);\n      } else {\n        translate = getTranslate(this.mapObject, this.currentLayer, animate);\n      }\n      var scale = this.mapObject.previousScale = translate['scale'];\n      var location_1 = this.mapObject.previousPoint = translate['location'];\n      this.mapObject.baseTranslatePoint = this.mapObject.translatePoint = location_1;\n      this.mapObject.baseScale = this.mapObject.scale = scale;\n      for (var i = 0; i < layerElement.childElementCount; i++) {\n        childNode = layerElement.childNodes[i];\n        if (!(childNode.id.indexOf('_Markers_Group') > -1) && !(childNode.id.indexOf('_bubble_Group') > -1) && !(childNode.id.indexOf('_dataLableIndex_Group') > -1)) {\n          var transform = 'scale( ' + scale + ' ) ' + 'translate( ' + location_1.x + ' ' + location_1.y + ' ) ';\n          childNode.setAttribute('transform', transform);\n          if (duration > 0 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n            if (this.mapObject.zoomSettings.zoomFactor > 1) {\n              translate = getZoomTranslate(this.mapObject, this.currentLayer);\n            } else {\n              translate = getTranslate(this.mapObject, this.currentLayer);\n            }\n            this.mapObject.scale = translate['scale'];\n            this.mapObject.zoomTranslatePoint = this.mapObject.translatePoint = translate['location'];\n          }\n        }\n      }\n    } else if (this.mapObject.isTileMap && !isNullOrUndefined(this.mapObject.scale)) {\n      for (var j = 0; j < layerElement.childElementCount; j++) {\n        childNode = layerElement.childNodes[j];\n        if (!(childNode.id.indexOf('_Markers_Group') > -1) && !(childNode.id.indexOf('_bubble_Group') > -1) && !(childNode.id.indexOf('_dataLableIndex_Group') > -1) && !(childNode.id.indexOf('_line_Group') > -1)) {\n          var transform = 'scale( ' + this.mapObject.scale + ' ) ' + 'translate( ' + this.mapObject.translatePoint.x + ' ' + this.mapObject.translatePoint.y + ' ) ';\n          childNode.setAttribute('transform', transform);\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.calculateRectBounds = function (layerData) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Array.prototype.forEach.call(layerData, function (obj, index) {\n      if (!isNullOrUndefined(obj['geometry']) || !isNullOrUndefined(obj['coordinates'])) {\n        var type = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['type'] : obj['type'];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var coordinates = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['coordinates'] : obj['coordinates'];\n        switch (type.toLowerCase()) {\n          case 'polygon':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            _this.calculateRectBox(coordinates[0]);\n            break;\n          case 'multipolygon':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            coordinates.map(function (point, index) {\n              _this.calculateRectBox(point[0]);\n            });\n            break;\n          case 'multilinestring':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            coordinates.map(function (multiPoint, index) {\n              multiPoint.map(function (point, index) {\n                _this.calculateRectBox(point, 'multilinestring', index === 0 ? true : false);\n              });\n            });\n            break;\n          case 'linestring':\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            coordinates.map(function (point, index) {\n              _this.calculateRectBox(point, 'linestring', index === 0 ? true : false);\n            });\n            break;\n          case 'point':\n            _this.calculateRectBox(coordinates, 'point');\n            break;\n          case 'multipoint':\n            coordinates.map(function (point, index) {\n              _this.calculateRectBox(point, 'multipoint', index === 0 ? true : false);\n            });\n            break;\n        }\n      }\n    });\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.calculatePolygonBox = function (coordinates, data, properties) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var newData = [];\n    var bounds = this.mapObject.baseMapBounds;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    coordinates.map(function (currentPoint, index) {\n      var latitude = currentPoint[1];\n      var longitude = currentPoint[0];\n      if (longitude >= bounds.longitude.min && longitude <= bounds.longitude.max && latitude >= bounds.latitude.min && latitude <= bounds.latitude.max) {\n        var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n        if (isNullOrUndefined(_this.rectBounds)) {\n          _this.rectBounds = {\n            min: {\n              x: point.x,\n              y: point.y\n            },\n            max: {\n              x: point.x,\n              y: point.y\n            }\n          };\n        } else {\n          _this.rectBounds['min']['x'] = Math.min(_this.rectBounds['min']['x'], point.x);\n          _this.rectBounds['min']['y'] = Math.min(_this.rectBounds['min']['y'], point.y);\n          _this.rectBounds['max']['x'] = Math.max(_this.rectBounds['max']['x'], point.x);\n          _this.rectBounds['max']['y'] = Math.max(_this.rectBounds['max']['y'], point.y);\n        }\n        newData.push({\n          point: point,\n          lat: latitude,\n          lng: longitude\n        });\n      }\n    });\n    return newData;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  LayerPanel.prototype.calculateRectBox = function (coordinates, type, isFirstItem) {\n    var _this = this;\n    if (type !== 'linestring' && type !== 'multilinestring' && type !== 'point' && type !== 'multipoint') {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      Array.prototype.forEach.call(coordinates, function (currentCoords) {\n        if (isNullOrUndefined(_this.mapObject.baseMapBounds)) {\n          _this.mapObject.baseMapBounds = new GeoLocation({\n            min: currentCoords[1],\n            max: currentCoords[1]\n          }, {\n            min: currentCoords[0],\n            max: currentCoords[0]\n          });\n        } else {\n          _this.mapObject.baseMapBounds.latitude.min = Math.min(_this.mapObject.baseMapBounds.latitude.min, currentCoords[1]);\n          _this.mapObject.baseMapBounds.latitude.max = Math.max(_this.mapObject.baseMapBounds.latitude.max, currentCoords[1]);\n          _this.mapObject.baseMapBounds.longitude.min = Math.min(_this.mapObject.baseMapBounds.longitude.min, currentCoords[0]);\n          _this.mapObject.baseMapBounds.longitude.max = Math.max(_this.mapObject.baseMapBounds.longitude.max, currentCoords[0]);\n        }\n      });\n    } else {\n      if ((isFirstItem || type === 'point') && isNullOrUndefined(this.mapObject.baseMapBounds)) {\n        this.mapObject.baseMapBounds = new GeoLocation({\n          min: coordinates[1],\n          max: coordinates[1]\n        }, {\n          min: coordinates[0],\n          max: coordinates[0]\n        });\n      } else {\n        this.mapObject.baseMapBounds.latitude.min = Math.min(this.mapObject.baseMapBounds.latitude.min, coordinates[1]);\n        this.mapObject.baseMapBounds.latitude.max = Math.max(this.mapObject.baseMapBounds.latitude.max, coordinates[1]);\n        this.mapObject.baseMapBounds.longitude.min = Math.min(this.mapObject.baseMapBounds.longitude.min, coordinates[0]);\n        this.mapObject.baseMapBounds.longitude.max = Math.max(this.mapObject.baseMapBounds.longitude.max, coordinates[0]);\n      }\n    }\n  };\n  LayerPanel.prototype.generateTiles = function (zoomLevel, tileTranslatePoint, zoomType, bing, position) {\n    var userLang = this.mapObject.locale;\n    var size = this.mapObject.availableSize;\n    this.tiles = [];\n    var xcount;\n    var ycount;\n    xcount = ycount = Math.pow(2, zoomLevel);\n    var xLeft = 0;\n    var xRight = 0;\n    if (tileTranslatePoint.x + xcount * 256 < size.width) {\n      xLeft = tileTranslatePoint.x > 0 ? Math.ceil(tileTranslatePoint.x / 256) : 0;\n      xRight = tileTranslatePoint.x + xcount * 256 < size.width ? Math.ceil((size.width - (tileTranslatePoint.x + xcount * 256)) / 256) : 0;\n    }\n    xcount += xLeft + xRight;\n    if (zoomType === 'Pan') {\n      xcount = this.horizontalPanXCount >= xcount ? this.horizontalPanXCount : xcount;\n      this.horizontalPan = false;\n    } else {\n      this.horizontalPanXCount = xcount;\n      this.horizontalPan = true;\n    }\n    var baseLayer = this.mapObject.layers[this.mapObject.baseLayerIndex];\n    this.urlTemplate = baseLayer.urlTemplate;\n    var endY = Math.min(ycount, (-tileTranslatePoint.y + size.height) / 256 + 1);\n    var endX = Math.min(xcount, (-tileTranslatePoint.x + size.width + xRight * 256) / 256 + 1);\n    var startX = -(tileTranslatePoint.x + xLeft * 256 + 256) / 256;\n    var startY = -(tileTranslatePoint.y + 256) / 256;\n    bing = bing || this.bing || this.mapObject['bingMap'];\n    for (var i = Math.round(startX); i < Math.round(endX); i++) {\n      for (var j = Math.round(startY); j < Math.round(endY); j++) {\n        var x = 256 * i + tileTranslatePoint.x;\n        var y = 256 * j + tileTranslatePoint.y;\n        if (x > -256 && x <= size.width && y > -256 && y < size.height) {\n          if (j >= 0) {\n            var tileI = i;\n            if (i < 0) {\n              tileI = tileI % ycount + ycount;\n            }\n            var tile = new Tile(tileI % ycount, j);\n            tile.left = x;\n            tile.top = y;\n            if (baseLayer.layerType === 'Bing' || bing && !isNullOrUndefined(baseLayer.urlTemplate) && baseLayer.urlTemplate !== '') {\n              var key = baseLayer.key;\n              tile.src = bing.getBingMap(tile, key, baseLayer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n            } else {\n              tile.src = this.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', tile.x.toString()).replace('tileY', tile.y.toString());\n            }\n            this.tiles.push(tile);\n          }\n        }\n      }\n    }\n    if (!isNullOrUndefined(zoomType)) {\n      if (zoomType.indexOf('wheel') > 1) {\n        this.animateToZoomX = this.mapObject.availableSize.width / 2 - position.x - 10;\n        this.animateToZoomY = -position.y;\n      } else {\n        this.animateToZoomX = -10;\n        this.animateToZoomY = -(this.mapObject.availableSize.height / 2 + 11.5) + 10;\n      }\n    }\n    var proxTiles = extend([], this.tiles, [], true);\n    for (var _i = 0, _a = this.mapObject.layers; _i < _a.length; _i++) {\n      var layer = _a[_i];\n      if (!(layer.type === 'SubLayer' && layer.visible)) {\n        continue;\n      }\n      if (layer.layerType !== 'Geometry' && layer.layerType !== 'GoogleStaticMap' || layer.layerType === 'Geometry' && isNullOrUndefined(layer.shapeData) && !isNullOrUndefined(layer.urlTemplate) && layer.urlTemplate !== '') {\n        for (var _b = 0, proxTiles_1 = proxTiles; _b < proxTiles_1.length; _b++) {\n          var baseTile = proxTiles_1[_b];\n          var subtile = extend({}, baseTile, {}, true);\n          if (layer.layerType === 'Bing') {\n            bing = new BingMap(this.mapObject);\n            subtile.src = bing.getBingMap(subtile, layer.key, layer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n          } else {\n            subtile.src = layer.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', baseTile.x.toString()).replace('tileY', baseTile.y.toString());\n          }\n          this.tiles.push(subtile);\n        }\n      }\n    }\n    if (this.mapObject.previousScale !== this.mapObject.scale || this.mapObject.isReset) {\n      this.arrangeTiles(zoomType, this.animateToZoomX, this.animateToZoomY);\n    }\n  };\n  LayerPanel.prototype.arrangeTiles = function (type, x, y) {\n    var _this = this;\n    var element = document.getElementById(this.mapObject.element.id + '_tile_parent');\n    var element1 = document.getElementById(this.mapObject.element.id + '_tiles');\n    var timeOut;\n    if (!isNullOrUndefined(type) && type !== 'Pan') {\n      this.tileAnimation(type, x, y);\n      timeOut = this.mapObject.layersCollection[0].animationDuration;\n    } else {\n      timeOut = 0;\n    }\n    if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n      this.renderGoogleMap(this.mapObject.layers[0].key, this.mapObject.staticMapZoom);\n    } else {\n      setTimeout(function () {\n        if (element) {\n          element.style.zIndex = '1';\n        }\n        if (element1) {\n          element1.style.zIndex = '0';\n        }\n        var animateElement;\n        if (!document.getElementById(_this.mapObject.element.id + '_animated_tiles') && element) {\n          animateElement = createElement('div', {\n            id: _this.mapObject.element.id + '_animated_tiles'\n          });\n          element.appendChild(animateElement);\n        } else {\n          if (type !== 'Pan' && element1 && element) {\n            element1.appendChild(element.children[0]);\n            if (!_this.mapObject.isAddLayer && !isNullOrUndefined(document.getElementById(_this.mapObject.element.id + '_animated_tiles'))) {\n              document.getElementById(_this.mapObject.element.id + '_animated_tiles').id = _this.mapObject.element.id + '_animated_tiles_old';\n            }\n            animateElement = createElement('div', {\n              id: _this.mapObject.element.id + '_animated_tiles'\n            });\n            element.appendChild(animateElement);\n          } else {\n            animateElement = element ? element.children[0] : null;\n          }\n        }\n        var id = 0;\n        var _loop_3 = function (tile) {\n          var imgElement = createElement('img');\n          imgElement.setAttribute('height', '256px');\n          imgElement.setAttribute('width', '256px');\n          imgElement.setAttribute('src', tile.src);\n          imgElement.setAttribute('alt', _this.mapObject.getLocalizedLabel('ImageNotFound'));\n          var mapId = _this.mapObject.element.id;\n          imgElement.onload = function () {\n            if (document.getElementById(mapId + '_tile_' + id) && type === 'Pan') {\n              removeElement(mapId + '_tile_' + id);\n            }\n            var child = createElement('div', {\n              id: mapId + '_tile_' + id\n            });\n            child.style.position = 'absolute';\n            child.style.left = tile.left + 'px';\n            child.style.top = tile.top + 'px';\n            child.style.height = tile.height + 'px';\n            child.style.width = tile.width + 'px';\n            child.appendChild(imgElement);\n            if (animateElement) {\n              animateElement.appendChild(child);\n            }\n            id++;\n            if (id === _this.tiles.length && document.getElementById(_this.mapObject.element.id + '_animated_tiles_old')) {\n              removeElement(_this.mapObject.element.id + '_animated_tiles_old');\n            }\n          };\n        };\n        for (var _i = 0, _a = _this.tiles; _i < _a.length; _i++) {\n          var tile = _a[_i];\n          _loop_3(tile);\n        }\n      }, timeOut);\n    }\n  };\n  /**\n   * Animation for tile layers and hide the group element until the tile layer rendering\n   *\n   * @param {string} zoomType - Specifies the zoom type\n   * @param {number} translateX - Specifies the x translate point\n   * @param {number} translateY - Specifies the y translate point\n   * @returns {void}\n   */\n  LayerPanel.prototype.tileAnimation = function (zoomType, translateX, translateY) {\n    var tileParent = document.getElementById(this.mapObject.element.id + '_tile_parent');\n    var animatedTiles = document.getElementById(this.mapObject.element.id + '_animated_tiles');\n    var tileElement = document.getElementById(this.mapObject.element.id + '_tiles');\n    var scaleValue = '2';\n    if (zoomType.indexOf('ZoomOut') === 0 || zoomType === 'Reset') {\n      tileElement.style.zIndex = '1';\n      tileParent.style.zIndex = '0';\n      while (tileElement.childElementCount >= 1) {\n        tileElement.removeChild(tileElement.children[0]);\n      }\n      translateX = 0;\n      translateY = document.getElementById(this.mapObject.element.id + '_tile_parent').getClientRects()[0].height / 4;\n      scaleValue = zoomType.indexOf('ZoomOut') === 0 ? '0.5' : '0.2';\n    }\n    if (!isNullOrUndefined(animatedTiles)) {\n      animatedTiles.style.transition = this.mapObject.layersCollection[0].animationDuration + 'ms';\n      animatedTiles.style.transform = 'translate(' + translateX + 'px, ' + translateY + 'px) scale(' + scaleValue + ')';\n    }\n  };\n  /**\n   * Static map rendering\n   *\n   * @param {string} apikey - Specifies the api key\n   * @param {number} zoom - Specifies the zoom value\n   * @returns {void}\n   * @private\n   */\n  LayerPanel.prototype.renderGoogleMap = function (apikey, zoom) {\n    var map = this.mapObject;\n    // zoom = this.mapObject.zoomSettings.shouldZoomInitially ? this.mapObject.markerZoomFactor : zoom;\n    zoom = this.mapObject.tileZoomLevel;\n    var totalSize = Math.pow(2, zoom) * 256;\n    var x = map.mapAreaRect.width / 2 - totalSize / 2;\n    var y = map.mapAreaRect.height / 2 - totalSize / 2;\n    var centerPoint = new Point(null, null);\n    var diffX = 0;\n    var diffY = 0;\n    var position = convertTileLatLongToPoint(centerPoint, zoom, {\n      x: x,\n      y: y\n    }, this.isMapCoordinates);\n    if (map.zoomModule && map.zoomSettings.enable) {\n      diffX = map.zoomModule.mouseDownLatLong['x'] - map.zoomModule.mouseMoveLatLong['x'];\n      diffY = map.zoomModule.mouseDownLatLong['y'] - map.zoomModule.mouseMoveLatLong['y'];\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var panLatLng = map.pointToLatLong(position.x - diffX, position.y - diffY);\n    map.centerPosition.latitude = panLatLng['latitude'];\n    map.centerPosition.longitude = panLatLng['longitude'];\n    var mapWidth;\n    var mapHeight;\n    if (isNullOrUndefined(parseInt(map.width, 10))) {\n      mapWidth = parseInt(map.width, 10) - 22;\n    } else {\n      mapWidth = Math.round(map.mapAreaRect.width);\n    }\n    if (isNullOrUndefined(parseInt(map.height, 10))) {\n      mapHeight = parseInt(map.height, 10) - 22;\n    } else {\n      mapHeight = Math.round(map.mapAreaRect.height);\n    }\n    var eleWidth = mapWidth > 640 ? (mapWidth - 640) / 2 : 0;\n    var eleHeight = mapHeight > 640 ? (mapHeight - 640) / 2 : 0;\n    var center;\n    var mapType = map.layers[map.layers.length - 1].staticMapType.toString().toLowerCase();\n    if (map.centerPosition.latitude && map.centerPosition.longitude) {\n      center = map.centerPosition.latitude.toString() + ',' + map.centerPosition.longitude.toString();\n    } else {\n      center = '0,0';\n    }\n    var staticMapString = 'https://maps.googleapis.com/maps/api/staticmap?size=' + mapWidth + 'x' + mapHeight + '&zoom=' + zoom + '&center=' + center + '&maptype=' + mapType + '&key=' + apikey;\n    document.getElementById(this.mapObject.element.id + '_tile_parent').innerHTML = '<div id=\"' + this.mapObject.element.id + '_StaticGoogleMap\"' + 'style=\"position:absolute; left:' + eleWidth + 'px; top:' + eleHeight + 'px\"><img src=\"' + staticMapString + '\"' + 'alt=\"' + this.mapObject.getLocalizedLabel('ImageNotFound') + '\"></div>';\n  };\n  /**\n   * To find the tile translate point\n   *\n   * @param {number} factorX - Specifies the x factor\n   * @param {number} factorY - Specifies the x factor\n   * @param {MapLocation} centerPosition - Specifies the map location\n   * @returns {Point} - Returns point values\n   */\n  LayerPanel.prototype.panTileMap = function (factorX, factorY, centerPosition) {\n    if (this.mapObject.tileZoomLevel <= this.mapObject.tileZoomScale && this.mapObject.initialCheck) {\n      this.mapObject.tileZoomLevel = this.mapObject.tileZoomScale;\n    }\n    var level = this.mapObject.tileZoomLevel;\n    var padding = this.mapObject.layers[this.mapObject.layers.length - 1].layerType !== 'GoogleStaticMap' ? 20 : 0;\n    var x;\n    var y;\n    var totalSize = Math.pow(2, level) * 256;\n    x = factorX / 2 - totalSize / 2;\n    y = factorY / 2 - totalSize / 2;\n    var position = convertTileLatLongToPoint(centerPosition, level, {\n      x: x,\n      y: y\n    }, this.isMapCoordinates);\n    padding = this.mapObject.zoomNotApplied ? 0 : padding;\n    x -= position.x - factorX / 2;\n    y = y - (position.y - factorY / 2) + padding;\n    this.mapObject.scale = Math.pow(2, level - 1);\n    if (isNullOrUndefined(this.mapObject.tileTranslatePoint) || this.mapObject.tileTranslatePoint.y === 0 && this.mapObject.tileTranslatePoint.x === 0 || isNullOrUndefined(this.mapObject.previousTileWidth) || isNullOrUndefined(this.mapObject.previousTileHeight)) {\n      this.mapObject.previousTileWidth = factorX;\n      this.mapObject.previousTileHeight = factorY;\n    }\n    if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && isNullOrUndefined(centerPosition.x) && (this.mapObject.zoomSettings.zoomFactor === 1 || this.mapObject.zoomSettings.zoomFactor !== level || !this.mapObject.defaultState)) {\n      if (factorX !== this.mapObject.previousTileWidth || factorY !== this.mapObject.previousTileHeight) {\n        var xdiff = x - (this.mapObject.previousTileWidth / 2 - totalSize / 2);\n        var ydiff = y - (this.mapObject.previousTileHeight / 2 - totalSize / 2 + padding);\n        this.mapObject.tileTranslatePoint.x = this.mapObject.tileTranslatePoint.x + xdiff;\n        this.mapObject.tileTranslatePoint.y = this.mapObject.tileTranslatePoint.y + ydiff;\n      }\n    }\n    if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && !this.mapObject.zoomNotApplied) {\n      if (this.mapObject.tileTranslatePoint.x !== 0 && this.mapObject.tileTranslatePoint.x !== x && !this.mapObject.centerPositionChanged) {\n        x = this.mapObject.tileTranslatePoint.x;\n      }\n      if (this.mapObject.tileTranslatePoint.y !== 0 && this.mapObject.tileTranslatePoint.y !== y && !this.mapObject.centerPositionChanged) {\n        y = this.mapObject.tileTranslatePoint.y;\n      }\n    }\n    this.mapObject.translatePoint = new Point((x - 0.01 * this.mapObject.zoomSettings.zoomFactor) / this.mapObject.scale, (y - 0.01 * this.mapObject.zoomSettings.zoomFactor) / this.mapObject.scale);\n    this.mapObject.previousTileWidth = factorX;\n    this.mapObject.previousTileHeight = factorY;\n    return new Point(x, y);\n  };\n  /**\n   * @returns {void}\n   * @private\n   */\n  LayerPanel.prototype.destroy = function () {\n    this.mapObject = null;\n    this.groupElements = [];\n    this.layerObject = null;\n    this.currentLayer = null;\n    this.rectBounds = null;\n    this.tiles = [];\n    this.clipRectElement = null;\n    this.tileSvgObject = null;\n    this.ajaxModule = null;\n    this.ajaxResponse = [];\n    this.layerGroup = null;\n    if (!isNullOrUndefined(this.bing)) {\n      this.bing.destroy();\n    }\n    this.bing = null;\n  };\n  return LayerPanel;\n}();\nexport { LayerPanel };","map":{"version":3,"names":["isNullOrUndefined","extend","createElement","Ajax","getShapeColor","GeoLocation","isCustomPath","convertGeoToPoint","Point","PathOption","Size","removeElement","getElementByID","maintainSelection","getValueFromObject","RectOption","getTranslate","convertTileLatLongToPoint","checkShapeDataFields","CircleOption","getZoomTranslate","fixInitialScaleForTile","Tile","BingMap","ColorMapping","layerRendering","shapeRendering","LayerPanel","map","isMapCoordinates","horizontalPan","horizontalPanXCount","mapObject","ajaxModule","ajaxResponse","prototype","measureLayerPanel","_this","layerCollection","layersCollection","areaRect","mapAreaRect","secondaryEle","element","id","isTileMap","tileSvgObject","renderer","createSvg","width","height","parentElement","styles","appendChild","layerGroup","createGroup","layers","baseLayerIndex","layerType","staticMapSize","clipRectElement","drawClipPath","color","x","y","baseMapBounds","baseMapRectBounds","baseSize","Array","forEach","call","layer","index","currentLayer","processLayers","legendModule","legendSettings","position","legendGroup","svgObject","renderTileLayer","panel","layerIndex","bing","currentFactor","calculateFactor","defaultState","zoomSettings","zoomFactor","tileZoomLevel","previousCenterLatitude","previousCenterLongitude","centerPosition","latitude","longitude","centerPositionChanged","center","centerTileMap","markerModule","enable","calculateZoomCenterPositionAndFactor","markerCenterLatitude","markerCenterLongitude","shouldZoomInitially","zoomPersistence","markerZoomedState","markerZoomCenterPoint","zoomFactorValue","markerZoomFactor","enablePersistence","mapScaleValue","previousZoomFactor","isReset","zoomLevel","tileTranslatePoint","tileZoomScale","initialCheck","centerLatOfGivenLocation","centerLongOfGivenLocation","zoomNotApplied","scaleOfGivenLocation","panTileMap","availableSize","resetToInitial","applyZoomReset","initialZoomLevel","Math","floor","padding","totalSize","pow","initialTileTranslate","generateTiles","navigationLineModule","layerObject","renderNavigation","markerRender","translateLayerElements","itemName","getModuleName","navigator","userAgent","indexOf","data","window","localStorage","e","getItem","removeItem","eventArgs","cancel","name","maps","visible","trigger","observedArgs","urlTemplate","shapeData","bingMapCalculation","key","length","proxy_1","bing_1","bingType","bingMapType","url","ajax","onSuccess","json","jsonObject","JSON","parse","resource","imageUrl","subDomains","maxZoom","markerGroupElement","document","getElementById","undefined","arrangeTemplate","zoomModule","previousScale","scale","applyTransform","send","featureData","layerData","bbox","isBaseLayer","min","max","calculateRectBounds","calculatePathCollection","proxy","bubbleCalculation","bubbleSettings","range","dataSource","bubbleDataSource","i","bubbledata","valuePath","Number","parseFloat","renderData","groupElements","rectBounds","shapeSettings","geometryData","type","coords","properties","generatePoints","colors","palette","theme","labelTemplateEle","className","_loop_1","k","borderValue","border","opacity","currentShapeData","this_1","pathOptions","polyLineOptions","circleOptions","groupElement","drawObject","path","points","fill","autofill","themeStyle","shapeFill","colorValuePath","shapeDataPath","shapePropertyPath","colorMapping","shapeID","getShapeColor_1","getShapeColorMapping","Object","toString","borderColorValuePath","borderWidthValuePath","borderColorValue","borderWidthValue","shape","shapeRenderingSuccess","drawingType","transform","push","i_1","ele","pathEle","generateMultiPolygonPath","dashArray","drawPath","lineData","multilineData","pointData","circleRadius","drawCircle","multiPointData","pathAttributeCalculate","layerFeatures","bind","property","j","setAttribute","tabIndex","selectedElementId","shapeSelectionClass","toggledShapeElementId","styleProperty","toggleLegendSettings","applyShapeSettings","bubbleG","bubbleModule","length_1","bubble_1","_loop_2","this_2","bubbleData","renderBubble","group","style","dataLabelModule","dataLabelSettings","intersect_1","renderLabel","shapeIndex","intersect","bubbleIndex","dataIndex","coordinates","newData","toLowerCase","calculatePolygonBox","multiPolygonDatas","extraSpace_1","parseInt","point","calculateBox","lat","lng","extraSpaces_1","multiLineData_1","multiPoints","pointExtraSpace","extraSpace_2","extraSpace","horFactor","verFactor","divide","exp","bounds","mapSize","mapHeight","mapWidth","start","end","abs","split","layerElement","childNode","translateType","duration","animationDuration","animate","baseTranslatePoint","zoomTranslatePoint","translate","location_1","previousPoint","translatePoint","baseScale","childElementCount","childNodes","obj","calculateRectBox","multiPoint","currentPoint","isFirstItem","currentCoords","zoomType","userLang","locale","size","tiles","xcount","ycount","xLeft","xRight","ceil","baseLayer","endY","endX","startX","startY","round","tileI","tile","left","top","src","getBingMap","replace","animateToZoomX","animateToZoomY","proxTiles","_i","_a","_b","proxTiles_1","baseTile","subtile","arrangeTiles","element1","timeOut","tileAnimation","renderGoogleMap","staticMapZoom","setTimeout","zIndex","animateElement","children","isAddLayer","_loop_3","imgElement","getLocalizedLabel","mapId","onload","child","translateX","translateY","tileParent","animatedTiles","tileElement","scaleValue","removeChild","getClientRects","transition","apikey","zoom","centerPoint","diffX","diffY","mouseDownLatLong","mouseMoveLatLong","panLatLng","pointToLatLong","eleWidth","eleHeight","mapType","staticMapType","staticMapString","innerHTML","factorX","factorY","level","previousTileWidth","previousTileHeight","xdiff","ydiff","destroy"],"sources":["/Users/macbookpro16/Desktop/cs222/client/node_modules/@syncfusion/ej2-maps/src/maps/layers/layer-panel.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable no-case-declarations */\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { isNullOrUndefined, extend, createElement, Ajax } from '@syncfusion/ej2-base';\nimport { getShapeColor } from '../model/theme';\nimport { GeoLocation, isCustomPath, convertGeoToPoint, Point, PathOption, Size, removeElement } from '../utils/helper';\nimport { getElementByID, maintainSelection, getValueFromObject } from '../utils/helper';\nimport { RectOption, getTranslate, convertTileLatLongToPoint, checkShapeDataFields, CircleOption } from '../utils/helper';\nimport { getZoomTranslate, fixInitialScaleForTile } from '../utils/helper';\nimport { Tile } from '../model/base';\nimport { BingMap } from './bing-map';\nimport { ColorMapping } from './color-mapping';\nimport { layerRendering, shapeRendering } from '../index';\n/**\n * To calculate and render the shape layer\n */\nvar LayerPanel = /** @class */ (function () {\n    function LayerPanel(map) {\n        this.isMapCoordinates = true;\n        this.horizontalPan = false;\n        this.horizontalPanXCount = 0;\n        this.mapObject = map;\n        this.ajaxModule = new Ajax();\n        this.ajaxResponse = [];\n    }\n    LayerPanel.prototype.measureLayerPanel = function () {\n        var _this = this;\n        var layerCollection = this.mapObject.layersCollection;\n        var areaRect = this.mapObject.mapAreaRect;\n        var secondaryEle = getElementByID(this.mapObject.element.id + '_Secondary_Element');\n        if (this.mapObject.isTileMap && secondaryEle) {\n            this.tileSvgObject = this.mapObject.renderer.createSvg({\n                id: this.mapObject.element.id + '_Tile_SVG', width: areaRect.width,\n                height: areaRect.height\n            });\n            var parentElement = createElement('div', {\n                id: this.mapObject.element.id + '_Tile_SVG_Parent', styles: 'position: absolute; height: ' +\n                    (areaRect.height) + 'px; width: '\n                    + (areaRect.width) + 'px;'\n            });\n            parentElement.appendChild(this.tileSvgObject);\n            secondaryEle.appendChild(parentElement);\n        }\n        this.layerGroup = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_Layer_Collections',\n            'clip-path': 'url(#' + this.mapObject.element.id + '_MapArea_ClipRect)'\n        }));\n        if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n            var staticMapSize = 640;\n            this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', { width: 1, color: 'Gray' }, 1, {\n                x: ((areaRect.width - staticMapSize) / 2), y: 0,\n                width: staticMapSize, height: areaRect.height\n            }));\n        }\n        else {\n            this.clipRectElement = this.mapObject.renderer.drawClipPath(new RectOption(this.mapObject.element.id + '_MapArea_ClipRect', 'transparent', { width: 1, color: 'Gray' }, 1, {\n                x: this.mapObject.isTileMap ? 0 : areaRect.x, y: this.mapObject.isTileMap ? 0 : areaRect.y,\n                width: areaRect.width, height: areaRect.height\n            }));\n        }\n        this.layerGroup.appendChild(this.clipRectElement);\n        this.mapObject.baseMapBounds = null;\n        this.mapObject.baseMapRectBounds = null;\n        this.mapObject.baseSize = null;\n        Array.prototype.forEach.call(layerCollection, function (layer, index) {\n            _this.currentLayer = layer;\n            _this.processLayers(layer, index);\n        });\n        if (!isNullOrUndefined(this.mapObject.legendModule) && this.mapObject.legendSettings.position === 'Float') {\n            if (this.mapObject.isTileMap) {\n                this.layerGroup.appendChild(this.mapObject.legendModule.legendGroup);\n            }\n            else {\n                this.mapObject.svgObject.appendChild(this.mapObject.legendModule.legendGroup);\n            }\n        }\n    };\n    /**\n     * Tile rendering\n     *\n     * @param {LayerPanel} panel - Specifies the layer panel.\n     * @param {LayerSettings} layer - Specifies the layer settings.\n     * @param {number} layerIndex - Specifies the layer index.\n     * @param {BingMap} bing - Specifies the bing map.\n     * @returns {void}\n     * @private\n     */\n    LayerPanel.prototype.renderTileLayer = function (panel, layer, layerIndex, bing) {\n        panel.currentFactor = panel.calculateFactor(layer);\n        panel.mapObject.defaultState = ((panel.mapObject.zoomSettings.zoomFactor !== 1) &&\n            (!isNullOrUndefined(panel.mapObject.tileZoomLevel) && panel.mapObject.tileZoomLevel !== 1)) ?\n            false : true;\n        if (isNullOrUndefined(panel.mapObject.previousCenterLatitude) &&\n            isNullOrUndefined(panel.mapObject.previousCenterLongitude)) {\n            panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n            panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n        }\n        else if (panel.mapObject.previousCenterLatitude !==\n            panel.mapObject.centerPosition.latitude && panel.mapObject.previousCenterLongitude !==\n            panel.mapObject.centerPosition.longitude) {\n            panel.mapObject.centerPositionChanged = true;\n            panel.mapObject.previousCenterLatitude = panel.mapObject.centerPosition.latitude;\n            panel.mapObject.previousCenterLongitude = panel.mapObject.centerPosition.longitude;\n        }\n        else {\n            panel.mapObject.centerPositionChanged = false;\n        }\n        var center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n        var centerTileMap = center;\n        if ((this.mapObject.isTileMap && panel.mapObject.markerModule) && panel.mapObject.zoomSettings.enable) {\n            panel.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n            if (!isNullOrUndefined(this.mapObject.markerCenterLatitude) && !isNullOrUndefined(this.mapObject.markerCenterLongitude)) {\n                centerTileMap = new Point(panel.mapObject.markerCenterLongitude, panel.mapObject.markerCenterLatitude);\n            }\n        }\n        if (!panel.mapObject.zoomSettings.shouldZoomInitially && panel.mapObject.centerPosition.longitude\n            && panel.mapObject.centerPosition.latitude && !panel.mapObject.zoomPersistence && panel.mapObject.defaultState) {\n            center = new Point(panel.mapObject.centerPosition.longitude, panel.mapObject.centerPosition.latitude);\n        }\n        else if (panel.mapObject.zoomSettings.shouldZoomInitially\n            && panel.mapObject.markerZoomedState && !panel.mapObject.zoomPersistence\n            && !isNullOrUndefined(panel.mapObject.markerZoomCenterPoint)) {\n            center = new Point(panel.mapObject.markerZoomCenterPoint.longitude, panel.mapObject.markerZoomCenterPoint.latitude);\n        }\n        else {\n            center = { x: null, y: null };\n        }\n        var zoomFactorValue = panel.mapObject.zoomSettings.shouldZoomInitially ?\n            isNullOrUndefined(panel.mapObject.markerZoomFactor) ? 1 :\n                panel.mapObject.markerZoomFactor : panel.mapObject.zoomSettings.zoomFactor;\n        zoomFactorValue = (panel.mapObject.enablePersistence) ? ((isNullOrUndefined(panel.mapObject.mapScaleValue))\n            ? (isNullOrUndefined(panel.mapObject.markerZoomFactor) ? panel.mapObject.zoomSettings.zoomFactor :\n                panel.mapObject.markerZoomFactor) : panel.mapObject.mapScaleValue) : zoomFactorValue;\n        zoomFactorValue = panel.mapObject.zoomSettings.enable ? zoomFactorValue : panel.mapObject.zoomSettings.zoomFactor;\n        zoomFactorValue = zoomFactorValue > 0 ? zoomFactorValue : 1;\n        panel.mapObject.defaultState = zoomFactorValue !== 1 ? false : true;\n        if (!panel.mapObject.markerZoomedState && panel.mapObject.zoomSettings.shouldZoomInitially &&\n            panel.mapObject.zoomSettings.zoomFactor === 1) {\n            panel.mapObject.defaultState = true;\n        }\n        if (isNullOrUndefined(panel.mapObject.tileZoomLevel)) {\n            panel.mapObject.tileZoomLevel = zoomFactorValue;\n            panel.mapObject.previousZoomFactor = zoomFactorValue;\n        }\n        else if (this.mapObject.isReset && panel.mapObject.tileZoomLevel === 1 && !panel.mapObject.zoomSettings.shouldZoomInitially) {\n            var zoomLevel = panel.mapObject.tileZoomLevel;\n            panel.mapObject.tileZoomLevel = zoomLevel;\n        }\n        else if (panel.mapObject.zoomSettings.zoomFactor !== 1 || panel.mapObject.zoomSettings.shouldZoomInitially) {\n            panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n            panel.mapObject.tileZoomLevel = panel.mapObject.defaultState && panel.mapObject.zoomSettings.enable ?\n                panel.mapObject.tileZoomLevel : !panel.mapObject.zoomSettings.shouldZoomInitially\n                && !panel.mapObject.centerPositionChanged ?\n                panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor ?\n                    panel.mapObject.zoomSettings.zoomFactor : panel.mapObject.tileZoomLevel : zoomFactorValue;\n            panel.mapObject.tileZoomLevel = zoomFactorValue === 1 && panel.mapObject.zoomSettings.zoomFactor === 0 ?\n                zoomFactorValue : panel.mapObject.tileZoomLevel;\n            if (!isNullOrUndefined(panel.mapObject.tileTranslatePoint) &&\n                (panel.mapObject.markerZoomFactor !== panel.mapObject.mapScaleValue\n                    || (isNullOrUndefined(panel.mapObject.markerZoomFactor)\n                        && isNullOrUndefined(panel.mapObject.mapScaleValue)))\n                && (panel.mapObject.zoomSettings.zoomFactor <= 1 || panel.mapObject.previousZoomFactor !==\n                    panel.mapObject.zoomSettings.zoomFactor)) {\n                panel.mapObject.tileTranslatePoint.x = 0;\n                panel.mapObject.tileTranslatePoint.y = 0;\n            }\n        }\n        else if (panel.mapObject.defaultState) {\n            panel.mapObject.previousZoomFactor = panel.mapObject.tileZoomLevel;\n            panel.mapObject.tileZoomLevel = zoomFactorValue;\n            panel.mapObject.tileTranslatePoint.x = 0;\n            panel.mapObject.tileTranslatePoint.y = 0;\n        }\n        if (zoomFactorValue <= 1 && !isNullOrUndefined(panel.mapObject.height) && !panel.mapObject.zoomSettings.shouldZoomInitially\n            && (panel.mapObject.tileZoomLevel === panel.mapObject.tileZoomScale) && this.mapObject.initialCheck) {\n            fixInitialScaleForTile(this.mapObject);\n        }\n        if (!isNullOrUndefined(panel.mapObject.centerLatOfGivenLocation) && !isNullOrUndefined(panel.mapObject.centerLongOfGivenLocation) &&\n            panel.mapObject.zoomNotApplied) {\n            centerTileMap.y = panel.mapObject.centerLatOfGivenLocation;\n            centerTileMap.x = panel.mapObject.centerLongOfGivenLocation;\n            panel.mapObject.tileZoomLevel = panel.mapObject.mapScaleValue = panel.mapObject.scaleOfGivenLocation;\n        }\n        panel.mapObject.tileTranslatePoint = panel.panTileMap(panel.mapObject.availableSize.width, panel.mapObject.availableSize.height, centerTileMap);\n        if (this.mapObject.zoomSettings.resetToInitial && this.mapObject.initialCheck && !isNullOrUndefined(panel.mapObject.height)\n            && this.mapObject.availableSize.height > 512) {\n            this.mapObject.applyZoomReset = true;\n            this.mapObject.initialZoomLevel = Math.floor(this.mapObject.availableSize.height / 512);\n            var padding = this.mapObject.layers[this.mapObject.baseLayerIndex].layerType !== 'GoogleStaticMap' ?\n                20 : 0;\n            var totalSize = Math.pow(2, this.mapObject.initialZoomLevel) * 256;\n            this.mapObject.initialTileTranslate.x = (this.mapObject.availableSize.width / 2) - (totalSize / 2);\n            this.mapObject.initialTileTranslate.y = (this.mapObject.availableSize.height / 2) - (totalSize / 2) + padding;\n        }\n        panel.generateTiles(panel.mapObject.tileZoomLevel, panel.mapObject.tileTranslatePoint, null, bing);\n        if (!isNullOrUndefined(panel.mapObject.previousZoomFactor)\n            && panel.mapObject.previousZoomFactor !== panel.mapObject.zoomSettings.zoomFactor) {\n            panel.mapObject.previousZoomFactor = panel.mapObject.zoomSettings.zoomFactor;\n        }\n        if (panel.mapObject.navigationLineModule) {\n            panel.layerObject.appendChild(panel.mapObject.navigationLineModule.renderNavigation(panel.currentLayer, panel.mapObject.tileZoomLevel, layerIndex));\n        }\n        if (panel.mapObject.markerModule) {\n            panel.mapObject.markerModule.markerRender(this.mapObject, panel.layerObject, layerIndex, panel.mapObject.tileZoomLevel, null);\n        }\n        panel.translateLayerElements(panel.layerObject, layerIndex);\n        panel.layerGroup.appendChild(panel.layerObject);\n    };\n    LayerPanel.prototype.processLayers = function (layer, layerIndex) {\n        var _this = this;\n        this.layerObject = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex\n        }));\n        if (!this.mapObject.enablePersistence) {\n            var itemName = this.mapObject.getModuleName() + this.mapObject.element.id;\n            if (navigator.userAgent.indexOf('Edge') === -1) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var data = void 0;\n                try {\n                    data = window.localStorage;\n                }\n                catch (e) {\n                    data = null;\n                }\n                if (!isNullOrUndefined(data) && window.localStorage.getItem(itemName)) {\n                    window.localStorage.removeItem(itemName);\n                }\n            }\n        }\n        var eventArgs = {\n            cancel: false, name: layerRendering, index: layerIndex,\n            layer: layer, maps: this.mapObject, visible: layer.visible\n        };\n        this.mapObject.trigger('layerRendering', eventArgs, function (observedArgs) {\n            if (!eventArgs.cancel && eventArgs.visible) {\n                if (layer.layerType === 'OSM') {\n                    layer.urlTemplate = 'https://a.tile.openstreetmap.org/level/tileX/tileY.png';\n                }\n                if (layer.layerType === 'Google') {\n                    layer.urlTemplate = 'https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level';\n                }\n                if (layer.layerType !== 'Geometry' || (isNullOrUndefined(layer.shapeData) && !isNullOrUndefined(layer.urlTemplate) && layer.urlTemplate !== '')) {\n                    if (layer.layerType !== 'Bing' || _this.bing) {\n                        if (!isNullOrUndefined(layer.urlTemplate) && layer.urlTemplate.indexOf('quadkey') > -1) {\n                            var bing = new BingMap(_this.mapObject);\n                            _this.bingMapCalculation(layer, layerIndex, _this, bing);\n                        }\n                        else {\n                            _this.renderTileLayer(_this, layer, layerIndex);\n                        }\n                    }\n                    else if (layer.key && layer.key.length > 1) {\n                        // eslint-disable-next-line @typescript-eslint/no-this-alias\n                        var proxy_1 = _this;\n                        var bing_1 = new BingMap(_this.mapObject);\n                        var bingType = layer.bingMapType === 'AerialWithLabel' ? 'AerialWithLabelsOnDemand' : layer.bingMapType;\n                        var url = 'https://dev.virtualearth.net/REST/V1/Imagery/Metadata/' + bingType;\n                        var ajax = new Ajax({\n                            url: url + '?output=json&include=ImageryProviders&urischeme=https&key=' + layer.key\n                        });\n                        ajax.onSuccess = function (json) {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            var jsonObject = JSON.parse(json);\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            var resource = jsonObject['resourceSets'][0]['resources'][0];\n                            var imageUrl = resource['imageUrl'];\n                            var subDomains = resource['imageUrlSubdomains'];\n                            var maxZoom = resource['zoomMax'];\n                            var markerGroupElement = document.getElementById(proxy_1.mapObject.element.id + '_Markers_Group');\n                            if (imageUrl !== null && imageUrl !== undefined && imageUrl !== bing_1.imageUrl) {\n                                bing_1.imageUrl = imageUrl;\n                            }\n                            if (subDomains !== null && subDomains !== undefined && subDomains !== bing_1.subDomains) {\n                                bing_1.subDomains = subDomains;\n                            }\n                            if (maxZoom !== null && maxZoom !== undefined && maxZoom !== bing_1.maxZoom) {\n                                bing_1.maxZoom = maxZoom;\n                            }\n                            proxy_1.mapObject['bingMap'] = bing_1;\n                            proxy_1.renderTileLayer(proxy_1, layer, layerIndex, bing_1);\n                            _this.mapObject.arrangeTemplate();\n                            if (_this.mapObject.zoomModule && (_this.mapObject.previousScale !== _this.mapObject.scale)) {\n                                _this.mapObject.zoomModule.applyTransform(_this.mapObject, true);\n                            }\n                        };\n                        ajax.send();\n                    }\n                }\n                else {\n                    if (!isNullOrUndefined(layer.shapeData) && (!isNullOrUndefined(layer.shapeData['geometries']) ||\n                        !isNullOrUndefined(layer.shapeData['features']))) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var featureData = (!isNullOrUndefined(layer.shapeData['geometries']) &&\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            layer.shapeData['geometries'].length > 0 ? layer.shapeData['geometries'] :\n                            layer.shapeData['features']);\n                        layer.layerData = [];\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        var bbox = layer.shapeData['bbox'];\n                        if (!isNullOrUndefined(bbox) && layer.isBaseLayer) {\n                            _this.mapObject.baseMapBounds = new GeoLocation({ min: bbox[0][1], max: bbox[1][1] }, { min: bbox[0][0], max: bbox[1][0] });\n                        }\n                        else if (isNullOrUndefined(_this.mapObject.baseMapBounds) && !isCustomPath(featureData)) {\n                            _this.calculateRectBounds(featureData);\n                        }\n                        _this.calculatePathCollection(layerIndex, featureData);\n                    }\n                }\n            }\n        });\n        if (!this.mapObject.isTileMap) {\n            this.mapObject.svgObject.appendChild(this.layerGroup);\n        }\n        else if (this.tileSvgObject) {\n            this.tileSvgObject.appendChild(this.layerGroup);\n            this.mapObject.baseMapBounds = null;\n        }\n    };\n    LayerPanel.prototype.bingMapCalculation = function (layer, layerIndex, proxy, bing) {\n        bing.imageUrl = layer.urlTemplate;\n        bing.subDomains = ['t0', 't1', 't2', 't3'];\n        bing.maxZoom = '21';\n        proxy.mapObject['bingMap'] = bing;\n        proxy.renderTileLayer(proxy, layer, layerIndex, bing);\n        this.mapObject.arrangeTemplate();\n        if (this.mapObject.zoomModule && (this.mapObject.previousScale !== this.mapObject.scale)) {\n            this.mapObject.zoomModule.applyTransform(this.mapObject, true);\n        }\n    };\n    LayerPanel.prototype.bubbleCalculation = function (bubbleSettings, range) {\n        if (bubbleSettings.dataSource != null && bubbleSettings != null) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var bubbleDataSource = bubbleSettings.dataSource;\n            for (var i = 0; i < bubbleDataSource.length; i++) {\n                var bubbledata = (!isNullOrUndefined(bubbleSettings.valuePath)) ? ((bubbleSettings.valuePath.indexOf('.') > -1) ?\n                    Number(getValueFromObject(bubbleSettings.dataSource[i], bubbleSettings.valuePath)) :\n                    parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath])) :\n                    parseFloat(bubbleSettings.dataSource[i][bubbleSettings.valuePath]);\n                if (i !== 0) {\n                    if (bubbledata > range.max) {\n                        range.max = bubbledata;\n                    }\n                    else if (bubbledata < range.min) {\n                        range.min = bubbledata;\n                    }\n                }\n                else {\n                    range.max = range.min = bubbledata;\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculatePathCollection = function (layerIndex, renderData) {\n        var _this = this;\n        this.groupElements = [];\n        if ((!isCustomPath(renderData))) {\n            this.currentFactor = this.calculateFactor(this.currentLayer);\n        }\n        this.rectBounds = null;\n        var shapeSettings = this.currentLayer.shapeSettings;\n        var bubbleSettings = this.currentLayer.bubbleSettings;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Array.prototype.forEach.call(renderData, function (geometryData, index) {\n            if (!isNullOrUndefined(geometryData['geometry']) || !isNullOrUndefined(geometryData['coordinates'])) {\n                var type = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['type'] : geometryData['type'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var coords = !isNullOrUndefined(geometryData['geometry']) ? geometryData['geometry']['coordinates'] :\n                    geometryData['coordinates'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var data = geometryData['geometry'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var properties = geometryData['properties'];\n                _this.generatePoints(type, coords, data, properties);\n            }\n        });\n        this.currentLayer.rectBounds = this.rectBounds;\n        if (isNullOrUndefined(this.mapObject.baseMapRectBounds) && this.currentLayer.isBaseLayer) {\n            this.mapObject.baseMapRectBounds = this.rectBounds;\n        }\n        var colors = shapeSettings.palette.length > 1 ? shapeSettings.palette : getShapeColor(this.mapObject.theme);\n        var labelTemplateEle = createElement('div', {\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_Label_Template_Group',\n            className: this.mapObject.element.id + '_template',\n            styles: 'pointer-events: none; overflow: hidden; position: absolute;' +\n                'top:' + this.mapObject.mapAreaRect.y + 'px;' +\n                'left:' + this.mapObject.mapAreaRect.x + 'px;' +\n                'height:' + this.mapObject.mapAreaRect.height + 'px;' +\n                'width:' + this.mapObject.mapAreaRect.width + 'px;'\n        });\n        if (this.currentLayer.layerData.length !== 0) {\n            var _loop_1 = function (i) {\n                var k = void 0;\n                var borderValue = {\n                    color: shapeSettings.border.color,\n                    width: shapeSettings.border.width,\n                    opacity: shapeSettings.border.opacity\n                };\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var currentShapeData = this_1.currentLayer.layerData[i];\n                var pathOptions;\n                var polyLineOptions = void 0;\n                var circleOptions;\n                var groupElement;\n                var drawObject = void 0;\n                var path = '';\n                var points = '';\n                var fill = (shapeSettings.autofill) ? colors[i % colors.length] :\n                    (shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill);\n                if (shapeSettings.colorValuePath !== null && !isNullOrUndefined(currentShapeData['property'])) {\n                    k = checkShapeDataFields(\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n                    if (k !== null && shapeSettings.colorMapping.length === 0) {\n                        fill = ((this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1) ?\n                            (getValueFromObject(this_1.currentLayer.dataSource[k], shapeSettings.colorValuePath)) :\n                            this_1.currentLayer.dataSource[k][shapeSettings.colorValuePath]);\n                    }\n                    else if (currentShapeData['property'][shapeSettings.colorValuePath] &&\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        this_1.currentLayer.dataSource.length === 0 && shapeSettings.colorMapping.length === 0) {\n                        fill = ((this_1.currentLayer.shapeSettings.colorValuePath.indexOf('.') > -1) ?\n                            (getValueFromObject(currentShapeData['property'], shapeSettings.colorValuePath)) :\n                            currentShapeData['property'][shapeSettings.colorValuePath]);\n                    }\n                    fill = !isNullOrUndefined(fill) ? fill : (shapeSettings.fill || this_1.mapObject.themeStyle.shapeFill);\n                }\n                var shapeID = this_1.mapObject.element.id + '_LayerIndex_' + layerIndex + '_shapeIndex_' + i + '_dataIndex_' + k;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var getShapeColor_1 = this_1.getShapeColorMapping(this_1.currentLayer, currentShapeData['property'], fill);\n                fill = Object.prototype.toString.call(getShapeColor_1) === '[object Object]' && !isNullOrUndefined(getShapeColor_1['fill'])\n                    ? getShapeColor_1['fill'] : fill;\n                if (this_1.currentLayer.shapeSettings.borderColorValuePath || this_1.currentLayer.shapeSettings.borderWidthValuePath) {\n                    var borderColorValue = this_1.currentLayer.shapeSettings.borderColorValuePath;\n                    var borderWidthValue = this_1.currentLayer.shapeSettings.borderWidthValuePath;\n                    k = checkShapeDataFields(\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this_1.currentLayer.dataSource, currentShapeData['property'], this_1.currentLayer.shapeDataPath, this_1.currentLayer.shapePropertyPath, this_1.currentLayer);\n                    if (k !== null) {\n                        if (this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath]) {\n                            borderValue.color = this_1.currentLayer.dataSource[k][shapeSettings.borderColorValuePath];\n                        }\n                        if (this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath]) {\n                            borderValue.width = this_1.currentLayer.dataSource[k][shapeSettings.borderWidthValuePath];\n                        }\n                    }\n                }\n                var opacity = (Object.prototype.toString.call(getShapeColor_1) === '[object Object]'\n                    && !isNullOrUndefined(getShapeColor_1['opacity'])) ? getShapeColor_1['opacity'] : shapeSettings.opacity;\n                var eventArgs = {\n                    cancel: false, name: shapeRendering, index: i,\n                    data: this_1.currentLayer.dataSource ? this_1.currentLayer.dataSource[k] : null,\n                    maps: this_1.mapObject,\n                    shape: shapeSettings, fill: fill,\n                    border: { width: borderValue.width, color: borderValue.color, opacity: borderValue.opacity }\n                };\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var shapeRenderingSuccess = function (eventArgs) {\n                    var drawingType = !isNullOrUndefined(currentShapeData['_isMultiPolygon'])\n                        ? 'MultiPolygon' : isNullOrUndefined(currentShapeData['type']) ? currentShapeData[0]['type'] : currentShapeData['type'];\n                    drawingType = (drawingType === 'Polygon' || drawingType === 'MultiPolygon') ? 'Polygon' : drawingType;\n                    if (!eventArgs.cancel) {\n                        eventArgs.fill = eventArgs.fill === '#A6A6A6' ? eventArgs.shape.fill ||\n                            _this.mapObject.themeStyle.shapeFill : eventArgs.fill;\n                        eventArgs.border.color = eventArgs.border.color === '#000000' ?\n                            eventArgs.shape.border.color : eventArgs.border.color;\n                        eventArgs.border.width = eventArgs.border.width === 0 ? eventArgs.shape.border.width : eventArgs.border.width;\n                        if (isNullOrUndefined(shapeSettings.borderColorValuePath)) {\n                            _this.mapObject.layers[layerIndex].shapeSettings.border.color = eventArgs.border.color;\n                        }\n                        if (isNullOrUndefined(shapeSettings.borderWidthValuePath)) {\n                            _this.mapObject.layers[layerIndex].shapeSettings.border.width = eventArgs.border.width;\n                        }\n                    }\n                    else {\n                        eventArgs.fill = fill;\n                        eventArgs.border.color = shapeSettings.border.color;\n                        eventArgs.border.width = shapeSettings.border.width;\n                        _this.mapObject.layers[layerIndex].shapeSettings.border = shapeSettings.border;\n                    }\n                    eventArgs.border.opacity = isNullOrUndefined(eventArgs.border.opacity) ? opacity : eventArgs.border.opacity;\n                    if (_this.groupElements.length < 1) {\n                        groupElement = _this.mapObject.renderer.createGroup({\n                            id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group', transform: ''\n                        });\n                        _this.groupElements.push(groupElement);\n                    }\n                    else {\n                        for (var i_1 = 0; i_1 < _this.groupElements.length; i_1++) {\n                            var ele = _this.groupElements[i_1];\n                            if (ele.id.indexOf(drawingType) > -1) {\n                                groupElement = ele;\n                                break;\n                            }\n                            else if (i_1 >= _this.groupElements.length - 1) {\n                                groupElement = _this.mapObject.renderer.createGroup({\n                                    id: _this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_' + drawingType + '_Group'\n                                });\n                                _this.groupElements.push(groupElement);\n                                break;\n                            }\n                        }\n                    }\n                    var pathEle;\n                    switch (drawingType) {\n                        case 'Polygon':\n                            if (!currentShapeData['_isMultiPolygon']) {\n                                path += 'M' + (currentShapeData[0]['point']['x']) + ' ' + (currentShapeData[0]['point']['y']);\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                currentShapeData.map(function (shapeData) {\n                                    path += ' L ' + (shapeData['point']['x']) + ' ' + (shapeData['point']['y']);\n                                });\n                            }\n                            else {\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                path = _this.generateMultiPolygonPath(currentShapeData);\n                            }\n                            path += ' z ';\n                            if (path.length > 3) {\n                                pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n                            }\n                            break;\n                        case 'LineString':\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            currentShapeData.map(function (lineData, index) {\n                                if (index === 0) {\n                                    path += 'M ' + (lineData['point']['x']) + ' ' + (lineData['point']['y']);\n                                }\n                                else {\n                                    path += 'L' + (lineData['point']['x']) + ' , ' + (lineData['point']['y']) + ' ';\n                                }\n                            });\n                            if (path.length > 3) {\n                                pathOptions = new PathOption(shapeID, 'transparent', !isNullOrUndefined(eventArgs.border.width) ? eventArgs.border.width : 1, !isNullOrUndefined(eventArgs.fill) ? eventArgs.fill :\n                                    eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n                            }\n                            break;\n                        case 'MultiLineString':\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            currentShapeData.map(function (multilineData) {\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                multilineData.map(function (lineData, index) {\n                                    if (index === 0) {\n                                        path += 'M ' + (lineData['point']['x']) + ' ' + (lineData['point']['y']);\n                                    }\n                                    else {\n                                        path += 'L' + (lineData['point']['x']) + ' , ' + (lineData['point']['y']) + ' ';\n                                    }\n                                });\n                            });\n                            if (path.length > 3) {\n                                pathOptions = new PathOption(shapeID, 'transparent', !isNullOrUndefined(eventArgs.border.width) ? eventArgs.border.width : 1, !isNullOrUndefined(eventArgs.fill) ? eventArgs.fill :\n                                    eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                                pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n                            }\n                            break;\n                        case 'Point':\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            var pointData = currentShapeData['point'];\n                            var circleRadius = (_this.mapObject.layers[layerIndex].type !== 'SubLayer') ? shapeSettings.circleRadius : shapeSettings.circleRadius / (_this.mapObject.isTileMap ? _this.mapObject.scale : _this.currentFactor);\n                            circleOptions = new CircleOption(shapeID, eventArgs.fill, eventArgs.border, opacity, pointData['x'], pointData['y'], circleRadius, shapeSettings.dashArray);\n                            pathEle = _this.mapObject.renderer.drawCircle(circleOptions);\n                            break;\n                        case 'MultiPoint':\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            currentShapeData.map(function (multiPointData, index) {\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                                var pointData = multiPointData['point'];\n                                var circleRadius = (_this.mapObject.layers[layerIndex].type !== 'SubLayer') ? shapeSettings.circleRadius : shapeSettings.circleRadius / (_this.mapObject.isTileMap ? _this.mapObject.scale : _this.currentFactor);\n                                circleOptions = new CircleOption((shapeID + \"_multiLine_\" + index), eventArgs.fill, eventArgs.border, opacity, pointData['x'], pointData['y'], circleRadius, shapeSettings.dashArray);\n                                pathEle = _this.mapObject.renderer.drawCircle(circleOptions);\n                                _this.pathAttributeCalculate(groupElement, pathEle, drawingType, currentShapeData, i);\n                            });\n                            break;\n                        case 'Path':\n                            path = currentShapeData['point'];\n                            pathOptions = new PathOption(shapeID, eventArgs.fill, eventArgs.border.width, eventArgs.border.color, opacity, eventArgs.border.opacity, shapeSettings.dashArray, path);\n                            pathEle = _this.mapObject.renderer.drawPath(pathOptions);\n                            break;\n                    }\n                    if (!isNullOrUndefined(pathEle) && drawingType !== 'MultiPoint') {\n                        _this.pathAttributeCalculate(groupElement, pathEle, drawingType, currentShapeData, i);\n                    }\n                    if (i === _this.currentLayer.layerData.length - 1) {\n                        _this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n                    }\n                };\n                shapeRenderingSuccess.bind(this_1);\n                this_1.mapObject.trigger('shapeRendering', eventArgs, shapeRenderingSuccess);\n            };\n            var this_1 = this;\n            for (var i = 0; i < this.currentLayer.layerData.length; i++) {\n                _loop_1(i);\n            }\n        }\n        else {\n            this.layerFeatures(layerIndex, colors, renderData, labelTemplateEle);\n        }\n    };\n    /**\n     * layer features as bubble, marker, datalabel, navigation line.\n     *\n     * @param {groupElement} Element - Specifies the element to append the group\n     * @param {pathEle} Element - Specifies the svg element\n     * @param {drawingType} string - Specifies the data type\n     * @param {currentShapeData} any - Specifies the layer of shapedata.\n     * @param {index} number - Specifies the tab index.\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.pathAttributeCalculate = function (groupElement, pathEle, drawingType, currentShapeData, index) {\n        var property = (Object.prototype.toString.call(this.currentLayer.shapePropertyPath) === '[object Array]' ?\n            this.currentLayer.shapePropertyPath : [this.currentLayer.shapePropertyPath]);\n        var properties;\n        for (var j = 0; j < property.length; j++) {\n            if (!isNullOrUndefined(currentShapeData['property'])) {\n                properties = property[j];\n                break;\n            }\n        }\n        pathEle.setAttribute('aria-label', ((!isNullOrUndefined(currentShapeData['property'])) ?\n            (currentShapeData['property'][properties]) : ''));\n        pathEle.setAttribute('tabindex', (this.mapObject.tabIndex + index + 3).toString());\n        pathEle.setAttribute('role', '');\n        if (drawingType === 'LineString' || drawingType === 'MultiLineString') {\n            pathEle.setAttribute('style', 'outline:none');\n        }\n        maintainSelection(this.mapObject.selectedElementId, this.mapObject.shapeSelectionClass, pathEle, 'ShapeselectionMapStyle');\n        if (this.mapObject.toggledShapeElementId) {\n            for (var j = 0; j < this.mapObject.toggledShapeElementId.length; j++) {\n                var styleProperty = this.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings ?\n                    this.currentLayer.shapeSettings : this.mapObject.legendSettings.toggleLegendSettings;\n                if (this.mapObject.toggledShapeElementId[j] === pathEle.id) {\n                    pathEle.setAttribute('fill', styleProperty.fill);\n                    pathEle.setAttribute('stroke', styleProperty.border.color);\n                    pathEle.setAttribute('fill-opacity', (styleProperty.opacity).toString());\n                    pathEle.setAttribute('stroke-opacity', (isNullOrUndefined(styleProperty.border.opacity) ? styleProperty.opacity : styleProperty.border.opacity).toString());\n                    pathEle.setAttribute('stroke-width', (styleProperty.border.width).toString());\n                }\n            }\n        }\n        groupElement.appendChild(pathEle);\n    };\n    /**\n     * layer features as bubble, marker, datalabel, navigation line.\n     *\n     * @param {number} layerIndex - Specifies the layer index\n     * @param {string[]} colors - Specifies the colors\n     * @param {Object[]} renderData - Specifies the render data\n     * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n     * @returns {void}\n     */\n    LayerPanel.prototype.layerFeatures = function (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    layerIndex, colors, renderData, labelTemplateEle) {\n        var _this = this;\n        var bubbleG;\n        if (this.currentLayer.bubbleSettings.length && this.mapObject.bubbleModule) {\n            var length_1 = this.currentLayer.bubbleSettings.length;\n            var bubble_1;\n            var _loop_2 = function (j) {\n                bubble_1 = this_2.currentLayer.bubbleSettings[j];\n                bubbleG = this_2.mapObject.renderer.createGroup({\n                    id: this_2.mapObject.element.id + '_LayerIndex_' + layerIndex + '_bubble_Group_' + j\n                });\n                var range = { min: 0, max: 0 };\n                this_2.bubbleCalculation(bubble_1, range);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var bubbleDataSource = bubble_1.dataSource;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                bubbleDataSource.map(function (bubbleData, i) {\n                    _this.renderBubble(_this.currentLayer, bubbleData, colors[i % colors.length], range, j, i, bubbleG, layerIndex, bubble_1);\n                });\n                this_2.groupElements.push(bubbleG);\n            };\n            var this_2 = this;\n            for (var j = 0; j < length_1; j++) {\n                _loop_2(j);\n            }\n        }\n        if ((this.mapObject.markerModule && !this.mapObject.isTileMap) && this.mapObject.zoomSettings.enable) {\n            this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);\n        }\n        var group = (this.mapObject.renderer.createGroup({\n            id: this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_dataLableIndex_Group',\n            style: 'pointer-events: none;'\n        }));\n        if (this.mapObject.dataLabelModule && this.currentLayer.dataLabelSettings.visible) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var intersect_1 = [];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            renderData.map(function (currentShapeData, i) {\n                _this.renderLabel(_this.currentLayer, layerIndex, currentShapeData, group, i, labelTemplateEle, intersect_1);\n            });\n            this.groupElements.push(group);\n        }\n        if (this.mapObject.navigationLineModule) {\n            this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer, this.currentFactor, layerIndex));\n        }\n        this.groupElements.map(function (element) {\n            _this.layerObject.appendChild(element);\n        });\n        if (this.mapObject.markerModule) {\n            this.mapObject.markerModule.markerRender(this.mapObject, this.layerObject, layerIndex, (this.mapObject.isTileMap ? Math.floor(this.currentFactor)\n                : this.currentFactor), null);\n        }\n        this.translateLayerElements(this.layerObject, layerIndex);\n        this.layerGroup.appendChild(this.layerObject);\n    };\n    /**\n     * render datalabel\n     *\n     * @param {LayerSettings} layer - Specifies the layer\n     * @param {number} layerIndex - Specifies the layer index\n     * @param {object[]} shape - Specifies the shape\n     * @param {Element} group - Specifies the group\n     * @param {number} shapeIndex - Specifies the shape index\n     * @param {HTMLElement} labelTemplateEle - Specifies the label template element\n     * @param {object[]} intersect - Specifies the intersect\n     * @returns {void}\n     */\n    LayerPanel.prototype.renderLabel = function (layer, layerIndex, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    shape, group, shapeIndex, labelTemplateEle, intersect) {\n        this.mapObject.dataLabelModule.renderLabel(layer, layerIndex, shape, layer.layerData, group, labelTemplateEle, shapeIndex, intersect);\n    };\n    /**\n     * To render path for multipolygon\n     *\n     * @param {any[]} currentShapeData Specifies the current shape data\n     * @returns {string} Returns the path\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.generateMultiPolygonPath = function (currentShapeData) {\n        var path = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var shape;\n        for (var j = 0; j < currentShapeData.length; j++) {\n            path += 'M' + (currentShapeData[j][0]['point']['x']) + ' ' + (currentShapeData[j][0]['point']['y']);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shape = currentShapeData[j];\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            shape.map(function (shapeData) {\n                path += ' L ' + (shapeData['point']['x']) + ' ' + (shapeData['point']['y']);\n            });\n        }\n        return path;\n    };\n    /**\n     * To render bubble\n     *\n     * @param {LayerSettings} layer - Specifies the layer\n     * @param {object} bubbleData - Specifies the bubble data\n     * @param {string} color - Specifies the color\n     * @param {number} range - Specifies the range\n     * @param {number} bubbleIndex - Specifies the bubble index\n     * @param {number} dataIndex - Specifies the data index\n     * @param {number} group - Specifies the group\n     * @param {number} layerIndex - Specifies the layer index\n     * @param {BubbleSettingsModel} bubbleSettings - Specifies the bubble settings\n     * @returns {void}\n     */\n    LayerPanel.prototype.renderBubble = function (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    layer, bubbleData, color, range, bubbleIndex, dataIndex, group, layerIndex, bubbleSettings) {\n        if (isNullOrUndefined(this.mapObject.bubbleModule) || !bubbleSettings.visible) {\n            return null;\n        }\n        color = bubbleSettings.fill ? bubbleSettings.fill : color;\n        this.mapObject.bubbleModule.id = this.mapObject.element.id + '_LayerIndex_' + layerIndex + '_BubbleIndex_' +\n            bubbleIndex + '_dataIndex_' + dataIndex;\n        this.mapObject.bubbleModule.renderBubble(bubbleSettings, bubbleData, color, range, bubbleIndex, dataIndex, layerIndex, layer, group, this.mapObject.bubbleModule.id);\n    };\n    /**\n     * To get the shape color from color mapping module\n     *\n     * @param {LayerSettingsModel} layer - Specifies the layer\n     * @param {object} shape - Specifies the shape\n     * @param {string} color - Specifies the color\n     * @returns {Object} - Returns the object\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.getShapeColorMapping = function (layer, shape, color) {\n        color = color ? color : layer.shapeSettings.fill;\n        if (layer.shapeSettings.colorMapping.length === 0 && isNullOrUndefined(layer.dataSource)) {\n            return color;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var index = checkShapeDataFields(layer.dataSource, shape, layer.shapeDataPath, layer.shapePropertyPath, layer);\n        var colorMapping = new ColorMapping(this.mapObject);\n        if (isNullOrUndefined(layer.dataSource[index])) {\n            return color;\n        }\n        return colorMapping.getShapeColorMapping(layer.shapeSettings, layer.dataSource[index], color);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.generatePoints = function (type, coordinates, data, properties) {\n        var _this = this;\n        var latitude;\n        var longitude;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var newData = [];\n        switch (type.toLowerCase()) {\n            case 'polygon':\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                newData = this.calculatePolygonBox(coordinates[0], data, properties);\n                if (newData.length > 0) {\n                    newData['property'] = properties;\n                    newData['type'] = type;\n                    newData['_isMultiPolygon'] = false;\n                    this.currentLayer.layerData.push(newData);\n                }\n                break;\n            case 'multipolygon':\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var multiPolygonDatas = [];\n                for (var i = 0; i < coordinates.length; i++) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    newData = this.calculatePolygonBox(coordinates[i][0], data, properties);\n                    if (newData.length > 0) {\n                        multiPolygonDatas.push(newData);\n                    }\n                }\n                multiPolygonDatas['property'] = properties;\n                multiPolygonDatas['type'] = type;\n                multiPolygonDatas['_isMultiPolygon'] = true;\n                this.currentLayer.layerData.push(multiPolygonDatas);\n                break;\n            case 'linestring':\n                var extraSpace_1 = !isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ?\n                    (typeof (this.currentLayer.shapeSettings.border.width) === 'string' ?\n                        parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width) : 1;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                coordinates.map(function (points, index) {\n                    latitude = points[1];\n                    longitude = points[0];\n                    var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                    _this.calculateBox(point, extraSpace_1);\n                    newData.push({\n                        point: point, lat: latitude, lng: longitude\n                    });\n                });\n                newData['property'] = properties;\n                newData['type'] = type;\n                this.currentLayer.layerData.push(newData);\n                break;\n            case 'multilinestring':\n                var extraSpaces_1 = !isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ?\n                    (typeof (this.currentLayer.shapeSettings.border.width) === 'string' ?\n                        parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width) : 1;\n                var multiLineData_1 = [];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                coordinates.map(function (multiPoints) {\n                    newData = [];\n                    multiPoints.map(function (points) {\n                        latitude = points[1];\n                        longitude = points[0];\n                        var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                        _this.calculateBox(point, extraSpaces_1);\n                        newData.push({\n                            point: point, lat: latitude, lng: longitude\n                        });\n                    });\n                    multiLineData_1.push(newData);\n                });\n                multiLineData_1['property'] = properties;\n                multiLineData_1['type'] = type;\n                this.currentLayer.layerData.push(multiLineData_1);\n                break;\n            case 'point':\n                var pointExtraSpace = (!isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ?\n                    (typeof (this.currentLayer.shapeSettings.border.width) === 'string' ?\n                        parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width) : 1) +\n                    (this.currentLayer.shapeSettings.circleRadius * 2);\n                latitude = coordinates[1];\n                longitude = coordinates[0];\n                var point = convertGeoToPoint(latitude, longitude, this.currentFactor, this.currentLayer, this.mapObject);\n                this.calculateBox(point, pointExtraSpace);\n                this.currentLayer.layerData.push({\n                    point: point, type: type, lat: latitude, lng: longitude, property: properties\n                });\n                break;\n            case 'multipoint': {\n                var extraSpace_2 = (!isNullOrUndefined(this.currentLayer.shapeSettings.border.width) ?\n                    (typeof (this.currentLayer.shapeSettings.border.width) === 'string' ?\n                        parseInt(this.currentLayer.shapeSettings.border.width, 10) : this.currentLayer.shapeSettings.border.width) : 1) +\n                    (this.currentLayer.shapeSettings.circleRadius * 2);\n                newData = [];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                coordinates.map(function (points) {\n                    latitude = points[1];\n                    longitude = points[0];\n                    var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                    _this.calculateBox(point, extraSpace_2);\n                    newData.push({\n                        point: point, lat: latitude, lng: longitude\n                    });\n                });\n                newData['property'] = properties;\n                newData['type'] = type;\n                this.currentLayer.layerData.push(newData);\n                break;\n            }\n            case 'path':\n                this.currentLayer.layerData.push({\n                    point: data['d'], type: type, property: properties\n                });\n                break;\n        }\n    };\n    LayerPanel.prototype.calculateBox = function (point, extraSpace) {\n        if (isNullOrUndefined(this.rectBounds)) {\n            this.rectBounds = { min: { x: point.x - extraSpace, y: point.y - extraSpace }, max: { x: point.x + extraSpace, y: point.y + extraSpace } };\n        }\n        else {\n            this.rectBounds['min']['x'] = Math.min(this.rectBounds['min']['x'], point.x - extraSpace);\n            this.rectBounds['min']['y'] = Math.min(this.rectBounds['min']['y'], point.y - extraSpace);\n            this.rectBounds['max']['x'] = Math.max(this.rectBounds['max']['x'], point.x + extraSpace);\n            this.rectBounds['max']['y'] = Math.max(this.rectBounds['max']['y'], point.y + extraSpace);\n        }\n    };\n    LayerPanel.prototype.calculateFactor = function (layer) {\n        var horFactor;\n        var verFactor = 1;\n        var divide = 10;\n        var exp = 'e+1';\n        var bounds = this.mapObject.baseMapBounds;\n        var mapSize = new Size(this.mapObject.mapAreaRect.width, this.mapObject.mapAreaRect.height - 5);\n        var mapHeight;\n        var mapWidth;\n        if (bounds) {\n            var start = convertGeoToPoint(bounds.latitude.min, bounds.longitude.min, null, layer, this.mapObject);\n            var end = convertGeoToPoint(bounds.latitude.max, bounds.longitude.max, null, layer, this.mapObject);\n            mapHeight = end.y - start.y;\n            mapWidth = end.x - start.x;\n            if (mapHeight === 0 || mapWidth === 0) {\n                mapWidth = mapSize.width / 2;\n                mapHeight = mapSize.height;\n            }\n        }\n        else {\n            mapHeight = mapWidth = 500;\n        }\n        if (mapHeight < mapSize.height) {\n            horFactor = parseFloat(Math.abs(Number(mapSize.height / Number(mapHeight.toString() + exp)) * 100).toString().split('.')[0])\n                / divide;\n        }\n        else {\n            horFactor = mapSize.height / mapHeight;\n        }\n        if (mapWidth < mapSize.width) {\n            verFactor = parseFloat(Math.abs(Number(mapSize.width / Number(mapWidth.toString() + exp)) * 100).toString().split('.')[0])\n                / divide;\n        }\n        else {\n            verFactor = mapSize.width / mapWidth;\n        }\n        return (Math.min(verFactor, horFactor));\n    };\n    LayerPanel.prototype.translateLayerElements = function (layerElement, index) {\n        var childNode;\n        this.mapObject.translateType = 'layer';\n        if (!isNullOrUndefined(this.mapObject.baseMapRectBounds)) {\n            var duration = this.currentLayer.animationDuration;\n            var animate = duration !== 0 || isNullOrUndefined(this.mapObject.zoomModule);\n            this.mapObject.baseTranslatePoint = this.mapObject.zoomTranslatePoint;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var translate = void 0;\n            if (this.mapObject.zoomSettings.zoomFactor > 1 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n                translate = getZoomTranslate(this.mapObject, this.currentLayer, animate);\n            }\n            else {\n                translate = getTranslate(this.mapObject, this.currentLayer, animate);\n            }\n            var scale = this.mapObject.previousScale = translate['scale'];\n            var location_1 = this.mapObject.previousPoint = translate['location'];\n            this.mapObject.baseTranslatePoint = this.mapObject.translatePoint = location_1;\n            this.mapObject.baseScale = this.mapObject.scale = scale;\n            for (var i = 0; i < layerElement.childElementCount; i++) {\n                childNode = layerElement.childNodes[i];\n                if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                    (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_dataLableIndex_Group') > -1))) {\n                    var transform = 'scale( ' + scale + ' ) '\n                        + 'translate( ' + location_1.x + ' ' + location_1.y + ' ) ';\n                    childNode.setAttribute('transform', transform);\n                    if (duration > 0 && !isNullOrUndefined(this.mapObject.zoomModule)) {\n                        if (this.mapObject.zoomSettings.zoomFactor > 1) {\n                            translate = getZoomTranslate(this.mapObject, this.currentLayer);\n                        }\n                        else {\n                            translate = getTranslate(this.mapObject, this.currentLayer);\n                        }\n                        this.mapObject.scale = translate['scale'];\n                        this.mapObject.zoomTranslatePoint = this.mapObject.translatePoint = translate['location'];\n                    }\n                }\n            }\n        }\n        else if (this.mapObject.isTileMap && !isNullOrUndefined(this.mapObject.scale)) {\n            for (var j = 0; j < layerElement.childElementCount; j++) {\n                childNode = layerElement.childNodes[j];\n                if (!(childNode.id.indexOf('_Markers_Group') > -1) &&\n                    (!(childNode.id.indexOf('_bubble_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_dataLableIndex_Group') > -1)) &&\n                    (!(childNode.id.indexOf('_line_Group') > -1))) {\n                    var transform = 'scale( ' + this.mapObject.scale + ' ) ' + 'translate( ' + this.mapObject.translatePoint.x\n                        + ' ' + this.mapObject.translatePoint.y + ' ) ';\n                    childNode.setAttribute('transform', transform);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculateRectBounds = function (layerData) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Array.prototype.forEach.call(layerData, function (obj, index) {\n            if (!isNullOrUndefined(obj['geometry']) || !isNullOrUndefined(obj['coordinates'])) {\n                var type = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['type'] : obj['type'];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var coordinates = !isNullOrUndefined(obj['geometry']) ? obj['geometry']['coordinates'] : obj['coordinates'];\n                switch (type.toLowerCase()) {\n                    case 'polygon':\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        _this.calculateRectBox(coordinates[0]);\n                        break;\n                    case 'multipolygon':\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        coordinates.map(function (point, index) {\n                            _this.calculateRectBox(point[0]);\n                        });\n                        break;\n                    case 'multilinestring':\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        coordinates.map(function (multiPoint, index) {\n                            multiPoint.map(function (point, index) {\n                                _this.calculateRectBox(point, 'multilinestring', index === 0 ? true : false);\n                            });\n                        });\n                        break;\n                    case 'linestring':\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        coordinates.map(function (point, index) {\n                            _this.calculateRectBox(point, 'linestring', index === 0 ? true : false);\n                        });\n                        break;\n                    case 'point':\n                        _this.calculateRectBox(coordinates, 'point');\n                        break;\n                    case 'multipoint':\n                        coordinates.map(function (point, index) {\n                            _this.calculateRectBox(point, 'multipoint', index === 0 ? true : false);\n                        });\n                        break;\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculatePolygonBox = function (coordinates, data, properties) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var newData = [];\n        var bounds = this.mapObject.baseMapBounds;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        coordinates.map(function (currentPoint, index) {\n            var latitude = currentPoint[1];\n            var longitude = currentPoint[0];\n            if ((longitude >= bounds.longitude.min && longitude <= bounds.longitude.max)\n                && (latitude >= bounds.latitude.min && latitude <= bounds.latitude.max)) {\n                var point = convertGeoToPoint(latitude, longitude, _this.currentFactor, _this.currentLayer, _this.mapObject);\n                if (isNullOrUndefined(_this.rectBounds)) {\n                    _this.rectBounds = { min: { x: point.x, y: point.y }, max: { x: point.x, y: point.y } };\n                }\n                else {\n                    _this.rectBounds['min']['x'] = Math.min(_this.rectBounds['min']['x'], point.x);\n                    _this.rectBounds['min']['y'] = Math.min(_this.rectBounds['min']['y'], point.y);\n                    _this.rectBounds['max']['x'] = Math.max(_this.rectBounds['max']['x'], point.x);\n                    _this.rectBounds['max']['y'] = Math.max(_this.rectBounds['max']['y'], point.y);\n                }\n                newData.push({\n                    point: point,\n                    lat: latitude,\n                    lng: longitude\n                });\n            }\n        });\n        return newData;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    LayerPanel.prototype.calculateRectBox = function (coordinates, type, isFirstItem) {\n        var _this = this;\n        if ((type !== 'linestring' && type !== 'multilinestring') && (type !== 'point' && type !== 'multipoint')) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            Array.prototype.forEach.call(coordinates, function (currentCoords) {\n                if (isNullOrUndefined(_this.mapObject.baseMapBounds)) {\n                    _this.mapObject.baseMapBounds = new GeoLocation({ min: currentCoords[1], max: currentCoords[1] }, { min: currentCoords[0], max: currentCoords[0] });\n                }\n                else {\n                    _this.mapObject.baseMapBounds.latitude.min = Math.min(_this.mapObject.baseMapBounds.latitude.min, currentCoords[1]);\n                    _this.mapObject.baseMapBounds.latitude.max = Math.max(_this.mapObject.baseMapBounds.latitude.max, currentCoords[1]);\n                    _this.mapObject.baseMapBounds.longitude.min = Math.min(_this.mapObject.baseMapBounds.longitude.min, currentCoords[0]);\n                    _this.mapObject.baseMapBounds.longitude.max = Math.max(_this.mapObject.baseMapBounds.longitude.max, currentCoords[0]);\n                }\n            });\n        }\n        else {\n            if ((isFirstItem || type === 'point') && isNullOrUndefined(this.mapObject.baseMapBounds)) {\n                this.mapObject.baseMapBounds = new GeoLocation({ min: coordinates[1], max: coordinates[1] }, { min: coordinates[0], max: coordinates[0] });\n            }\n            else {\n                this.mapObject.baseMapBounds.latitude.min = Math.min(this.mapObject.baseMapBounds.latitude.min, coordinates[1]);\n                this.mapObject.baseMapBounds.latitude.max = Math.max(this.mapObject.baseMapBounds.latitude.max, coordinates[1]);\n                this.mapObject.baseMapBounds.longitude.min = Math.min(this.mapObject.baseMapBounds.longitude.min, coordinates[0]);\n                this.mapObject.baseMapBounds.longitude.max = Math.max(this.mapObject.baseMapBounds.longitude.max, coordinates[0]);\n            }\n        }\n    };\n    LayerPanel.prototype.generateTiles = function (zoomLevel, tileTranslatePoint, zoomType, bing, position) {\n        var userLang = this.mapObject.locale;\n        var size = this.mapObject.availableSize;\n        this.tiles = [];\n        var xcount;\n        var ycount;\n        xcount = ycount = Math.pow(2, zoomLevel);\n        var xLeft = 0;\n        var xRight = 0;\n        if ((tileTranslatePoint.x + (xcount * 256)) < size.width) {\n            xLeft = tileTranslatePoint.x > 0 ? Math.ceil(tileTranslatePoint.x / 256) : 0;\n            xRight = ((tileTranslatePoint.x + xcount * 256) < size.width) ?\n                Math.ceil((size.width - (tileTranslatePoint.x + xcount * 256)) / 256) : 0;\n        }\n        xcount += xLeft + xRight;\n        if (zoomType === 'Pan') {\n            xcount = (this.horizontalPanXCount >= xcount) ? this.horizontalPanXCount : xcount;\n            this.horizontalPan = false;\n        }\n        else {\n            this.horizontalPanXCount = xcount;\n            this.horizontalPan = true;\n        }\n        var baseLayer = this.mapObject.layers[this.mapObject.baseLayerIndex];\n        this.urlTemplate = baseLayer.urlTemplate;\n        var endY = Math.min(ycount, ((-tileTranslatePoint.y + size.height) / 256) + 1);\n        var endX = Math.min(xcount, ((-tileTranslatePoint.x + size.width + (xRight * 256)) / 256) + 1);\n        var startX = (-((tileTranslatePoint.x + (xLeft * 256)) + 256) / 256);\n        var startY = (-(tileTranslatePoint.y + 256) / 256);\n        bing = bing || this.bing || this.mapObject['bingMap'];\n        for (var i = Math.round(startX); i < Math.round(endX); i++) {\n            for (var j = Math.round(startY); j < Math.round(endY); j++) {\n                var x = 256 * i + tileTranslatePoint.x;\n                var y = 256 * j + tileTranslatePoint.y;\n                if (x > -256 && x <= size.width && y > -256 && y < size.height) {\n                    if (j >= 0) {\n                        var tileI = i;\n                        if (i < 0) {\n                            tileI = (tileI % ycount) + ycount;\n                        }\n                        var tile = new Tile(tileI % ycount, j);\n                        tile.left = x;\n                        tile.top = y;\n                        if (baseLayer.layerType === 'Bing' || (bing && !isNullOrUndefined(baseLayer.urlTemplate) && baseLayer.urlTemplate !== '')) {\n                            var key = baseLayer.key;\n                            tile.src = bing.getBingMap(tile, key, baseLayer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n                        }\n                        else {\n                            tile.src = this.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', tile.x.toString())\n                                .replace('tileY', tile.y.toString());\n                        }\n                        this.tiles.push(tile);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(zoomType)) {\n            if (zoomType.indexOf('wheel') > 1) {\n                this.animateToZoomX = (this.mapObject.availableSize.width / 2) - position.x - 10;\n                this.animateToZoomY = -position.y;\n            }\n            else {\n                this.animateToZoomX = -10;\n                this.animateToZoomY = -(this.mapObject.availableSize.height / 2 + 11.5) + 10;\n            }\n        }\n        var proxTiles = extend([], this.tiles, [], true);\n        for (var _i = 0, _a = this.mapObject.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            if (!(layer.type === 'SubLayer' && layer.visible)) {\n                continue;\n            }\n            if ((layer.layerType !== 'Geometry' && layer.layerType !== 'GoogleStaticMap') || (layer.layerType === 'Geometry' &&\n                isNullOrUndefined(layer.shapeData) && !isNullOrUndefined(layer.urlTemplate) && layer.urlTemplate !== '')) {\n                for (var _b = 0, proxTiles_1 = proxTiles; _b < proxTiles_1.length; _b++) {\n                    var baseTile = proxTiles_1[_b];\n                    var subtile = extend({}, baseTile, {}, true);\n                    if (layer.layerType === 'Bing') {\n                        bing = new BingMap(this.mapObject);\n                        subtile.src = bing.getBingMap(subtile, layer.key, layer.bingMapType, userLang, bing.imageUrl, bing.subDomains);\n                    }\n                    else {\n                        subtile.src = layer.urlTemplate.replace('level', zoomLevel.toString()).replace('tileX', baseTile.x.toString())\n                            .replace('tileY', baseTile.y.toString());\n                    }\n                    this.tiles.push(subtile);\n                }\n            }\n        }\n        if (this.mapObject.previousScale !== this.mapObject.scale || this.mapObject.isReset) {\n            this.arrangeTiles(zoomType, this.animateToZoomX, this.animateToZoomY);\n        }\n    };\n    LayerPanel.prototype.arrangeTiles = function (type, x, y) {\n        var _this = this;\n        var element = document.getElementById(this.mapObject.element.id + '_tile_parent');\n        var element1 = document.getElementById(this.mapObject.element.id + '_tiles');\n        var timeOut;\n        if (!isNullOrUndefined(type) && type !== 'Pan') {\n            this.tileAnimation(type, x, y);\n            timeOut = this.mapObject.layersCollection[0].animationDuration;\n        }\n        else {\n            timeOut = 0;\n        }\n        if (this.mapObject.layers[this.mapObject.baseLayerIndex].layerType === 'GoogleStaticMap') {\n            this.renderGoogleMap(this.mapObject.layers[0].key, this.mapObject.staticMapZoom);\n        }\n        else {\n            setTimeout(function () {\n                if (element) {\n                    element.style.zIndex = '1';\n                }\n                if (element1) {\n                    element1.style.zIndex = '0';\n                }\n                var animateElement;\n                if (!document.getElementById(_this.mapObject.element.id + '_animated_tiles') && element) {\n                    animateElement = createElement('div', { id: _this.mapObject.element.id + '_animated_tiles' });\n                    element.appendChild(animateElement);\n                }\n                else {\n                    if (type !== 'Pan' && element1 && element) {\n                        element1.appendChild(element.children[0]);\n                        if (!_this.mapObject.isAddLayer && !isNullOrUndefined(document.getElementById(_this.mapObject.element.id + '_animated_tiles'))) {\n                            document.getElementById(_this.mapObject.element.id + '_animated_tiles').id =\n                                _this.mapObject.element.id + '_animated_tiles_old';\n                        }\n                        animateElement = createElement('div', { id: _this.mapObject.element.id + '_animated_tiles' });\n                        element.appendChild(animateElement);\n                    }\n                    else {\n                        animateElement = element ? element.children[0] : null;\n                    }\n                }\n                var id = 0;\n                var _loop_3 = function (tile) {\n                    var imgElement = createElement('img');\n                    imgElement.setAttribute('height', '256px');\n                    imgElement.setAttribute('width', '256px');\n                    imgElement.setAttribute('src', tile.src);\n                    imgElement.setAttribute('alt', _this.mapObject.getLocalizedLabel('ImageNotFound'));\n                    var mapId = _this.mapObject.element.id;\n                    imgElement.onload = function () {\n                        if (document.getElementById(mapId + '_tile_' + id) && type === 'Pan') {\n                            removeElement(mapId + '_tile_' + id);\n                        }\n                        var child = createElement('div', { id: mapId + '_tile_' + id });\n                        child.style.position = 'absolute';\n                        child.style.left = tile.left + 'px';\n                        child.style.top = tile.top + 'px';\n                        child.style.height = tile.height + 'px';\n                        child.style.width = tile.width + 'px';\n                        child.appendChild(imgElement);\n                        if (animateElement) {\n                            animateElement.appendChild(child);\n                        }\n                        id++;\n                        if (id === _this.tiles.length && document.getElementById(_this.mapObject.element.id + '_animated_tiles_old')) {\n                            removeElement(_this.mapObject.element.id + '_animated_tiles_old');\n                        }\n                    };\n                };\n                for (var _i = 0, _a = _this.tiles; _i < _a.length; _i++) {\n                    var tile = _a[_i];\n                    _loop_3(tile);\n                }\n            }, timeOut);\n        }\n    };\n    /**\n     * Animation for tile layers and hide the group element until the tile layer rendering\n     *\n     * @param {string} zoomType - Specifies the zoom type\n     * @param {number} translateX - Specifies the x translate point\n     * @param {number} translateY - Specifies the y translate point\n     * @returns {void}\n     */\n    LayerPanel.prototype.tileAnimation = function (zoomType, translateX, translateY) {\n        var tileParent = document.getElementById(this.mapObject.element.id + '_tile_parent');\n        var animatedTiles = document.getElementById(this.mapObject.element.id + '_animated_tiles');\n        var tileElement = document.getElementById(this.mapObject.element.id + '_tiles');\n        var scaleValue = '2';\n        if (zoomType.indexOf('ZoomOut') === 0 || zoomType === 'Reset') {\n            tileElement.style.zIndex = '1';\n            tileParent.style.zIndex = '0';\n            while (tileElement.childElementCount >= 1) {\n                tileElement.removeChild(tileElement.children[0]);\n            }\n            translateX = 0;\n            translateY = document.getElementById(this.mapObject.element.id + '_tile_parent').getClientRects()[0].height / 4;\n            scaleValue = zoomType.indexOf('ZoomOut') === 0 ? '0.5' : '0.2';\n        }\n        if (!isNullOrUndefined(animatedTiles)) {\n            animatedTiles.style.transition = this.mapObject.layersCollection[0].animationDuration + 'ms';\n            animatedTiles.style.transform = 'translate(' + translateX + 'px, ' + translateY + 'px) scale(' + scaleValue + ')';\n        }\n    };\n    /**\n     * Static map rendering\n     *\n     * @param {string} apikey - Specifies the api key\n     * @param {number} zoom - Specifies the zoom value\n     * @returns {void}\n     * @private\n     */\n    LayerPanel.prototype.renderGoogleMap = function (apikey, zoom) {\n        var map = this.mapObject;\n        // zoom = this.mapObject.zoomSettings.shouldZoomInitially ? this.mapObject.markerZoomFactor : zoom;\n        zoom = this.mapObject.tileZoomLevel;\n        var totalSize = Math.pow(2, zoom) * 256;\n        var x = (map.mapAreaRect.width / 2) - (totalSize / 2);\n        var y = (map.mapAreaRect.height / 2) - (totalSize / 2);\n        var centerPoint = new Point(null, null);\n        var diffX = 0;\n        var diffY = 0;\n        var position = convertTileLatLongToPoint(centerPoint, zoom, { x: x, y: y }, this.isMapCoordinates);\n        if (map.zoomModule && map.zoomSettings.enable) {\n            diffX = map.zoomModule.mouseDownLatLong['x'] - map.zoomModule.mouseMoveLatLong['x'];\n            diffY = map.zoomModule.mouseDownLatLong['y'] - map.zoomModule.mouseMoveLatLong['y'];\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var panLatLng = map.pointToLatLong(position.x - diffX, position.y - diffY);\n        map.centerPosition.latitude = panLatLng['latitude'];\n        map.centerPosition.longitude = panLatLng['longitude'];\n        var mapWidth;\n        var mapHeight;\n        if (isNullOrUndefined(parseInt(map.width, 10))) {\n            mapWidth = parseInt(map.width, 10) - 22;\n        }\n        else {\n            mapWidth = Math.round(map.mapAreaRect.width);\n        }\n        if (isNullOrUndefined(parseInt(map.height, 10))) {\n            mapHeight = parseInt(map.height, 10) - 22;\n        }\n        else {\n            mapHeight = Math.round(map.mapAreaRect.height);\n        }\n        var eleWidth = mapWidth > 640 ? (mapWidth - 640) / 2 : 0;\n        var eleHeight = mapHeight > 640 ? (mapHeight - 640) / 2 : 0;\n        var center;\n        var mapType = (map.layers[map.layers.length - 1].staticMapType).toString().toLowerCase();\n        if (map.centerPosition.latitude && map.centerPosition.longitude) {\n            center = map.centerPosition.latitude.toString() + ',' + map.centerPosition.longitude.toString();\n        }\n        else {\n            center = '0,0';\n        }\n        var staticMapString = 'https://maps.googleapis.com/maps/api/staticmap?size=' + mapWidth + 'x' + mapHeight +\n            '&zoom=' + zoom + '&center=' + center + '&maptype=' + mapType + '&key=' + apikey;\n        document.getElementById(this.mapObject.element.id + '_tile_parent').innerHTML\n            = '<div id=\"' + this.mapObject.element.id + '_StaticGoogleMap\"' + 'style=\"position:absolute; left:' + eleWidth + 'px; top:'\n                + eleHeight + 'px\"><img src=\"' + staticMapString + '\"' + 'alt=\"' + this.mapObject.getLocalizedLabel('ImageNotFound') + '\"></div>';\n    };\n    /**\n     * To find the tile translate point\n     *\n     * @param {number} factorX - Specifies the x factor\n     * @param {number} factorY - Specifies the x factor\n     * @param {MapLocation} centerPosition - Specifies the map location\n     * @returns {Point} - Returns point values\n     */\n    LayerPanel.prototype.panTileMap = function (factorX, factorY, centerPosition) {\n        if (this.mapObject.tileZoomLevel <= this.mapObject.tileZoomScale && this.mapObject.initialCheck) {\n            this.mapObject.tileZoomLevel = this.mapObject.tileZoomScale;\n        }\n        var level = this.mapObject.tileZoomLevel;\n        var padding = this.mapObject.layers[this.mapObject.layers.length - 1].layerType !== 'GoogleStaticMap' ?\n            20 : 0;\n        var x;\n        var y;\n        var totalSize = Math.pow(2, level) * 256;\n        x = (factorX / 2) - (totalSize / 2);\n        y = (factorY / 2) - (totalSize / 2);\n        var position = convertTileLatLongToPoint(centerPosition, level, { x: x, y: y }, this.isMapCoordinates);\n        padding = this.mapObject.zoomNotApplied ? 0 : padding;\n        x -= position.x - (factorX / 2);\n        y = (y - (position.y - (factorY / 2))) + padding;\n        this.mapObject.scale = Math.pow(2, level - 1);\n        if ((isNullOrUndefined(this.mapObject.tileTranslatePoint) || (this.mapObject.tileTranslatePoint.y === 0 &&\n            this.mapObject.tileTranslatePoint.x === 0)) || (isNullOrUndefined(this.mapObject.previousTileWidth) ||\n            isNullOrUndefined(this.mapObject.previousTileHeight))) {\n            this.mapObject.previousTileWidth = factorX;\n            this.mapObject.previousTileHeight = factorY;\n        }\n        if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && (isNullOrUndefined(centerPosition.x)) &&\n            (this.mapObject.zoomSettings.zoomFactor === 1 ||\n                this.mapObject.zoomSettings.zoomFactor !== level || !this.mapObject.defaultState)) {\n            if ((factorX !== this.mapObject.previousTileWidth || factorY !== this.mapObject.previousTileHeight)) {\n                var xdiff = x - ((this.mapObject.previousTileWidth / 2) - (totalSize / 2));\n                var ydiff = y - ((this.mapObject.previousTileHeight / 2) - (totalSize / 2) + padding);\n                this.mapObject.tileTranslatePoint.x = this.mapObject.tileTranslatePoint.x + xdiff;\n                this.mapObject.tileTranslatePoint.y = this.mapObject.tileTranslatePoint.y + ydiff;\n            }\n        }\n        if (!isNullOrUndefined(this.mapObject.tileTranslatePoint) && !this.mapObject.zoomNotApplied) {\n            if (this.mapObject.tileTranslatePoint.x !== 0 && this.mapObject.tileTranslatePoint.x !== x\n                && !this.mapObject.centerPositionChanged) {\n                x = this.mapObject.tileTranslatePoint.x;\n            }\n            if (this.mapObject.tileTranslatePoint.y !== 0 && this.mapObject.tileTranslatePoint.y !== y\n                && !this.mapObject.centerPositionChanged) {\n                y = this.mapObject.tileTranslatePoint.y;\n            }\n        }\n        this.mapObject.translatePoint = new Point((x - (0.01 * this.mapObject.zoomSettings.zoomFactor)) / this.mapObject.scale, (y - (0.01 * this.mapObject.zoomSettings.zoomFactor)) / this.mapObject.scale);\n        this.mapObject.previousTileWidth = factorX;\n        this.mapObject.previousTileHeight = factorY;\n        return new Point(x, y);\n    };\n    /**\n     * @returns {void}\n     * @private\n     */\n    LayerPanel.prototype.destroy = function () {\n        this.mapObject = null;\n        this.groupElements = [];\n        this.layerObject = null;\n        this.currentLayer = null;\n        this.rectBounds = null;\n        this.tiles = [];\n        this.clipRectElement = null;\n        this.tileSvgObject = null;\n        this.ajaxModule = null;\n        this.ajaxResponse = [];\n        this.layerGroup = null;\n        if (!isNullOrUndefined(this.bing)) {\n            this.bing.destroy();\n        }\n        this.bing = null;\n    };\n    return LayerPanel;\n}());\nexport { LayerPanel };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAASA,iBAAiB,EAAEC,MAAM,EAAEC,aAAa,EAAEC,IAAI,QAAQ,sBAAsB;AACrF,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,WAAW,EAAEC,YAAY,EAAEC,iBAAiB,EAAEC,KAAK,EAAEC,UAAU,EAAEC,IAAI,EAAEC,aAAa,QAAQ,iBAAiB;AACtH,SAASC,cAAc,EAAEC,iBAAiB,EAAEC,kBAAkB,QAAQ,iBAAiB;AACvF,SAASC,UAAU,EAAEC,YAAY,EAAEC,yBAAyB,EAAEC,oBAAoB,EAAEC,YAAY,QAAQ,iBAAiB;AACzH,SAASC,gBAAgB,EAAEC,sBAAsB,QAAQ,iBAAiB;AAC1E,SAASC,IAAI,QAAQ,eAAe;AACpC,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,cAAc,EAAEC,cAAc,QAAQ,UAAU;AACzD;AACA;AACA;AACA,IAAIC,UAAU,GAAG,aAAe,YAAY;EACxC,SAASA,UAAU,CAACC,GAAG,EAAE;IACrB,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,mBAAmB,GAAG,CAAC;IAC5B,IAAI,CAACC,SAAS,GAAGJ,GAAG;IACpB,IAAI,CAACK,UAAU,GAAG,IAAI9B,IAAI,EAAE;IAC5B,IAAI,CAAC+B,YAAY,GAAG,EAAE;EAC1B;EACAP,UAAU,CAACQ,SAAS,CAACC,iBAAiB,GAAG,YAAY;IACjD,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAIC,eAAe,GAAG,IAAI,CAACN,SAAS,CAACO,gBAAgB;IACrD,IAAIC,QAAQ,GAAG,IAAI,CAACR,SAAS,CAACS,WAAW;IACzC,IAAIC,YAAY,GAAG9B,cAAc,CAAC,IAAI,CAACoB,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,oBAAoB,CAAC;IACnF,IAAI,IAAI,CAACZ,SAAS,CAACa,SAAS,IAAIH,YAAY,EAAE;MAC1C,IAAI,CAACI,aAAa,GAAG,IAAI,CAACd,SAAS,CAACe,QAAQ,CAACC,SAAS,CAAC;QACnDJ,EAAE,EAAE,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,WAAW;QAAEK,KAAK,EAAET,QAAQ,CAACS,KAAK;QAClEC,MAAM,EAAEV,QAAQ,CAACU;MACrB,CAAC,CAAC;MACF,IAAIC,aAAa,GAAGjD,aAAa,CAAC,KAAK,EAAE;QACrC0C,EAAE,EAAE,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,kBAAkB;QAAEQ,MAAM,EAAE,8BAA8B,GACrFZ,QAAQ,CAACU,MAAO,GAAG,aAAa,GAC9BV,QAAQ,CAACS,KAAM,GAAG;MAC7B,CAAC,CAAC;MACFE,aAAa,CAACE,WAAW,CAAC,IAAI,CAACP,aAAa,CAAC;MAC7CJ,YAAY,CAACW,WAAW,CAACF,aAAa,CAAC;IAC3C;IACA,IAAI,CAACG,UAAU,GAAI,IAAI,CAACtB,SAAS,CAACe,QAAQ,CAACQ,WAAW,CAAC;MACnDX,EAAE,EAAE,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,oBAAoB;MACpD,WAAW,EAAE,OAAO,GAAG,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG;IACvD,CAAC,CAAE;IACH,IAAI,IAAI,CAACZ,SAAS,CAACwB,MAAM,CAAC,IAAI,CAACxB,SAAS,CAACyB,cAAc,CAAC,CAACC,SAAS,KAAK,iBAAiB,EAAE;MACtF,IAAIC,aAAa,GAAG,GAAG;MACvB,IAAI,CAACC,eAAe,GAAG,IAAI,CAAC5B,SAAS,CAACe,QAAQ,CAACc,YAAY,CAAC,IAAI9C,UAAU,CAAC,IAAI,CAACiB,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,mBAAmB,EAAE,aAAa,EAAE;QAAEK,KAAK,EAAE,CAAC;QAAEa,KAAK,EAAE;MAAO,CAAC,EAAE,CAAC,EAAE;QACvKC,CAAC,EAAG,CAACvB,QAAQ,CAACS,KAAK,GAAGU,aAAa,IAAI,CAAE;QAAEK,CAAC,EAAE,CAAC;QAC/Cf,KAAK,EAAEU,aAAa;QAAET,MAAM,EAAEV,QAAQ,CAACU;MAC3C,CAAC,CAAC,CAAC;IACP,CAAC,MACI;MACD,IAAI,CAACU,eAAe,GAAG,IAAI,CAAC5B,SAAS,CAACe,QAAQ,CAACc,YAAY,CAAC,IAAI9C,UAAU,CAAC,IAAI,CAACiB,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,mBAAmB,EAAE,aAAa,EAAE;QAAEK,KAAK,EAAE,CAAC;QAAEa,KAAK,EAAE;MAAO,CAAC,EAAE,CAAC,EAAE;QACvKC,CAAC,EAAE,IAAI,CAAC/B,SAAS,CAACa,SAAS,GAAG,CAAC,GAAGL,QAAQ,CAACuB,CAAC;QAAEC,CAAC,EAAE,IAAI,CAAChC,SAAS,CAACa,SAAS,GAAG,CAAC,GAAGL,QAAQ,CAACwB,CAAC;QAC1Ff,KAAK,EAAET,QAAQ,CAACS,KAAK;QAAEC,MAAM,EAAEV,QAAQ,CAACU;MAC5C,CAAC,CAAC,CAAC;IACP;IACA,IAAI,CAACI,UAAU,CAACD,WAAW,CAAC,IAAI,CAACO,eAAe,CAAC;IACjD,IAAI,CAAC5B,SAAS,CAACiC,aAAa,GAAG,IAAI;IACnC,IAAI,CAACjC,SAAS,CAACkC,iBAAiB,GAAG,IAAI;IACvC,IAAI,CAAClC,SAAS,CAACmC,QAAQ,GAAG,IAAI;IAC9BC,KAAK,CAACjC,SAAS,CAACkC,OAAO,CAACC,IAAI,CAAChC,eAAe,EAAE,UAAUiC,KAAK,EAAEC,KAAK,EAAE;MAClEnC,KAAK,CAACoC,YAAY,GAAGF,KAAK;MAC1BlC,KAAK,CAACqC,aAAa,CAACH,KAAK,EAAEC,KAAK,CAAC;IACrC,CAAC,CAAC;IACF,IAAI,CAACxE,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAAC2C,YAAY,CAAC,IAAI,IAAI,CAAC3C,SAAS,CAAC4C,cAAc,CAACC,QAAQ,KAAK,OAAO,EAAE;MACvG,IAAI,IAAI,CAAC7C,SAAS,CAACa,SAAS,EAAE;QAC1B,IAAI,CAACS,UAAU,CAACD,WAAW,CAAC,IAAI,CAACrB,SAAS,CAAC2C,YAAY,CAACG,WAAW,CAAC;MACxE,CAAC,MACI;QACD,IAAI,CAAC9C,SAAS,CAAC+C,SAAS,CAAC1B,WAAW,CAAC,IAAI,CAACrB,SAAS,CAAC2C,YAAY,CAACG,WAAW,CAAC;MACjF;IACJ;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACInD,UAAU,CAACQ,SAAS,CAAC6C,eAAe,GAAG,UAAUC,KAAK,EAAEV,KAAK,EAAEW,UAAU,EAAEC,IAAI,EAAE;IAC7EF,KAAK,CAACG,aAAa,GAAGH,KAAK,CAACI,eAAe,CAACd,KAAK,CAAC;IAClDU,KAAK,CAACjD,SAAS,CAACsD,YAAY,GAAKL,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,KAAK,CAAC,IACzE,CAACxF,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAACyD,aAAa,CAAC,IAAIR,KAAK,CAACjD,SAAS,CAACyD,aAAa,KAAK,CAAE,GAC1F,KAAK,GAAG,IAAI;IAChB,IAAIzF,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC0D,sBAAsB,CAAC,IACzD1F,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC2D,uBAAuB,CAAC,EAAE;MAC5DV,KAAK,CAACjD,SAAS,CAAC0D,sBAAsB,GAAGT,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACC,QAAQ;MAChFZ,KAAK,CAACjD,SAAS,CAAC2D,uBAAuB,GAAGV,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACE,SAAS;IACtF,CAAC,MACI,IAAIb,KAAK,CAACjD,SAAS,CAAC0D,sBAAsB,KAC3CT,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACC,QAAQ,IAAIZ,KAAK,CAACjD,SAAS,CAAC2D,uBAAuB,KAClFV,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACE,SAAS,EAAE;MAC1Cb,KAAK,CAACjD,SAAS,CAAC+D,qBAAqB,GAAG,IAAI;MAC5Cd,KAAK,CAACjD,SAAS,CAAC0D,sBAAsB,GAAGT,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACC,QAAQ;MAChFZ,KAAK,CAACjD,SAAS,CAAC2D,uBAAuB,GAAGV,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACE,SAAS;IACtF,CAAC,MACI;MACDb,KAAK,CAACjD,SAAS,CAAC+D,qBAAqB,GAAG,KAAK;IACjD;IACA,IAAIC,MAAM,GAAG,IAAIxF,KAAK,CAACyE,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACE,SAAS,EAAEb,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACC,QAAQ,CAAC;IACzG,IAAII,aAAa,GAAGD,MAAM;IAC1B,IAAK,IAAI,CAAChE,SAAS,CAACa,SAAS,IAAIoC,KAAK,CAACjD,SAAS,CAACkE,YAAY,IAAKjB,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACY,MAAM,EAAE;MACnGlB,KAAK,CAACjD,SAAS,CAACkE,YAAY,CAACE,oCAAoC,CAAC,IAAI,CAACpE,SAAS,CAACO,gBAAgB,CAAC;MAClG,IAAI,CAACvC,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACqE,oBAAoB,CAAC,IAAI,CAACrG,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACsE,qBAAqB,CAAC,EAAE;QACrHL,aAAa,GAAG,IAAIzF,KAAK,CAACyE,KAAK,CAACjD,SAAS,CAACsE,qBAAqB,EAAErB,KAAK,CAACjD,SAAS,CAACqE,oBAAoB,CAAC;MAC1G;IACJ;IACA,IAAI,CAACpB,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,IAAItB,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACE,SAAS,IAC1Fb,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACC,QAAQ,IAAI,CAACZ,KAAK,CAACjD,SAAS,CAACwE,eAAe,IAAIvB,KAAK,CAACjD,SAAS,CAACsD,YAAY,EAAE;MAChHU,MAAM,GAAG,IAAIxF,KAAK,CAACyE,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACE,SAAS,EAAEb,KAAK,CAACjD,SAAS,CAAC4D,cAAc,CAACC,QAAQ,CAAC;IACzG,CAAC,MACI,IAAIZ,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,IAClDtB,KAAK,CAACjD,SAAS,CAACyE,iBAAiB,IAAI,CAACxB,KAAK,CAACjD,SAAS,CAACwE,eAAe,IACrE,CAACxG,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC0E,qBAAqB,CAAC,EAAE;MAC9DV,MAAM,GAAG,IAAIxF,KAAK,CAACyE,KAAK,CAACjD,SAAS,CAAC0E,qBAAqB,CAACZ,SAAS,EAAEb,KAAK,CAACjD,SAAS,CAAC0E,qBAAqB,CAACb,QAAQ,CAAC;IACvH,CAAC,MACI;MACDG,MAAM,GAAG;QAAEjC,CAAC,EAAE,IAAI;QAAEC,CAAC,EAAE;MAAK,CAAC;IACjC;IACA,IAAI2C,eAAe,GAAG1B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,GAClEvG,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC4E,gBAAgB,CAAC,GAAG,CAAC,GACnD3B,KAAK,CAACjD,SAAS,CAAC4E,gBAAgB,GAAG3B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU;IAClFmB,eAAe,GAAI1B,KAAK,CAACjD,SAAS,CAAC6E,iBAAiB,GAAM7G,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC8E,aAAa,CAAC,GACnG9G,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC4E,gBAAgB,CAAC,GAAG3B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,GAC5FP,KAAK,CAACjD,SAAS,CAAC4E,gBAAgB,GAAI3B,KAAK,CAACjD,SAAS,CAAC8E,aAAa,GAAIH,eAAe;IAC5FA,eAAe,GAAG1B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACY,MAAM,GAAGQ,eAAe,GAAG1B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU;IACjHmB,eAAe,GAAGA,eAAe,GAAG,CAAC,GAAGA,eAAe,GAAG,CAAC;IAC3D1B,KAAK,CAACjD,SAAS,CAACsD,YAAY,GAAGqB,eAAe,KAAK,CAAC,GAAG,KAAK,GAAG,IAAI;IACnE,IAAI,CAAC1B,KAAK,CAACjD,SAAS,CAACyE,iBAAiB,IAAIxB,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,IACtFtB,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,KAAK,CAAC,EAAE;MAC/CP,KAAK,CAACjD,SAAS,CAACsD,YAAY,GAAG,IAAI;IACvC;IACA,IAAItF,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAACyD,aAAa,CAAC,EAAE;MAClDR,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAGkB,eAAe;MAC/C1B,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,GAAGJ,eAAe;IACxD,CAAC,MACI,IAAI,IAAI,CAAC3E,SAAS,CAACgF,OAAO,IAAI/B,KAAK,CAACjD,SAAS,CAACyD,aAAa,KAAK,CAAC,IAAI,CAACR,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,EAAE;MACzH,IAAIU,SAAS,GAAGhC,KAAK,CAACjD,SAAS,CAACyD,aAAa;MAC7CR,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAGwB,SAAS;IAC7C,CAAC,MACI,IAAIhC,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,KAAK,CAAC,IAAIP,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,EAAE;MACxGtB,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,GAAG9B,KAAK,CAACjD,SAAS,CAACyD,aAAa;MAClER,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAGR,KAAK,CAACjD,SAAS,CAACsD,YAAY,IAAIL,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACY,MAAM,GAC/FlB,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAG,CAACR,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,IAC9E,CAACtB,KAAK,CAACjD,SAAS,CAAC+D,qBAAqB,GACzCd,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,KAAK9B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,GAC1EP,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,GAAGP,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAGkB,eAAe;MACjG1B,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAGkB,eAAe,KAAK,CAAC,IAAI1B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,KAAK,CAAC,GAClGmB,eAAe,GAAG1B,KAAK,CAACjD,SAAS,CAACyD,aAAa;MACnD,IAAI,CAACzF,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAACkF,kBAAkB,CAAC,KACrDjC,KAAK,CAACjD,SAAS,CAAC4E,gBAAgB,KAAK3B,KAAK,CAACjD,SAAS,CAAC8E,aAAa,IAC3D9G,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC4E,gBAAgB,CAAC,IAChD5G,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC8E,aAAa,CAAE,CAAC,KACzD7B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,IAAI,CAAC,IAAIP,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,KAClF9B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,CAAC,EAAE;QAC9CP,KAAK,CAACjD,SAAS,CAACkF,kBAAkB,CAACnD,CAAC,GAAG,CAAC;QACxCkB,KAAK,CAACjD,SAAS,CAACkF,kBAAkB,CAAClD,CAAC,GAAG,CAAC;MAC5C;IACJ,CAAC,MACI,IAAIiB,KAAK,CAACjD,SAAS,CAACsD,YAAY,EAAE;MACnCL,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,GAAG9B,KAAK,CAACjD,SAAS,CAACyD,aAAa;MAClER,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAGkB,eAAe;MAC/C1B,KAAK,CAACjD,SAAS,CAACkF,kBAAkB,CAACnD,CAAC,GAAG,CAAC;MACxCkB,KAAK,CAACjD,SAAS,CAACkF,kBAAkB,CAAClD,CAAC,GAAG,CAAC;IAC5C;IACA,IAAI2C,eAAe,IAAI,CAAC,IAAI,CAAC3G,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAACkB,MAAM,CAAC,IAAI,CAAC+B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACgB,mBAAmB,IACnHtB,KAAK,CAACjD,SAAS,CAACyD,aAAa,KAAKR,KAAK,CAACjD,SAAS,CAACmF,aAAc,IAAI,IAAI,CAACnF,SAAS,CAACoF,YAAY,EAAE;MACrG/F,sBAAsB,CAAC,IAAI,CAACW,SAAS,CAAC;IAC1C;IACA,IAAI,CAAChC,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAACqF,wBAAwB,CAAC,IAAI,CAACrH,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAACsF,yBAAyB,CAAC,IAC7HrC,KAAK,CAACjD,SAAS,CAACuF,cAAc,EAAE;MAChCtB,aAAa,CAACjC,CAAC,GAAGiB,KAAK,CAACjD,SAAS,CAACqF,wBAAwB;MAC1DpB,aAAa,CAAClC,CAAC,GAAGkB,KAAK,CAACjD,SAAS,CAACsF,yBAAyB;MAC3DrC,KAAK,CAACjD,SAAS,CAACyD,aAAa,GAAGR,KAAK,CAACjD,SAAS,CAAC8E,aAAa,GAAG7B,KAAK,CAACjD,SAAS,CAACwF,oBAAoB;IACxG;IACAvC,KAAK,CAACjD,SAAS,CAACkF,kBAAkB,GAAGjC,KAAK,CAACwC,UAAU,CAACxC,KAAK,CAACjD,SAAS,CAAC0F,aAAa,CAACzE,KAAK,EAAEgC,KAAK,CAACjD,SAAS,CAAC0F,aAAa,CAACxE,MAAM,EAAE+C,aAAa,CAAC;IAC/I,IAAI,IAAI,CAACjE,SAAS,CAACuD,YAAY,CAACoC,cAAc,IAAI,IAAI,CAAC3F,SAAS,CAACoF,YAAY,IAAI,CAACpH,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAACkB,MAAM,CAAC,IACpH,IAAI,CAAClB,SAAS,CAAC0F,aAAa,CAACxE,MAAM,GAAG,GAAG,EAAE;MAC9C,IAAI,CAAClB,SAAS,CAAC4F,cAAc,GAAG,IAAI;MACpC,IAAI,CAAC5F,SAAS,CAAC6F,gBAAgB,GAAGC,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC/F,SAAS,CAAC0F,aAAa,CAACxE,MAAM,GAAG,GAAG,CAAC;MACvF,IAAI8E,OAAO,GAAG,IAAI,CAAChG,SAAS,CAACwB,MAAM,CAAC,IAAI,CAACxB,SAAS,CAACyB,cAAc,CAAC,CAACC,SAAS,KAAK,iBAAiB,GAC9F,EAAE,GAAG,CAAC;MACV,IAAIuE,SAAS,GAAGH,IAAI,CAACI,GAAG,CAAC,CAAC,EAAE,IAAI,CAAClG,SAAS,CAAC6F,gBAAgB,CAAC,GAAG,GAAG;MAClE,IAAI,CAAC7F,SAAS,CAACmG,oBAAoB,CAACpE,CAAC,GAAI,IAAI,CAAC/B,SAAS,CAAC0F,aAAa,CAACzE,KAAK,GAAG,CAAC,GAAKgF,SAAS,GAAG,CAAE;MAClG,IAAI,CAACjG,SAAS,CAACmG,oBAAoB,CAACnE,CAAC,GAAI,IAAI,CAAChC,SAAS,CAAC0F,aAAa,CAACxE,MAAM,GAAG,CAAC,GAAK+E,SAAS,GAAG,CAAE,GAAGD,OAAO;IACjH;IACA/C,KAAK,CAACmD,aAAa,CAACnD,KAAK,CAACjD,SAAS,CAACyD,aAAa,EAAER,KAAK,CAACjD,SAAS,CAACkF,kBAAkB,EAAE,IAAI,EAAE/B,IAAI,CAAC;IAClG,IAAI,CAACnF,iBAAiB,CAACiF,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,CAAC,IACnD9B,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,KAAK9B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU,EAAE;MACnFP,KAAK,CAACjD,SAAS,CAAC+E,kBAAkB,GAAG9B,KAAK,CAACjD,SAAS,CAACuD,YAAY,CAACC,UAAU;IAChF;IACA,IAAIP,KAAK,CAACjD,SAAS,CAACqG,oBAAoB,EAAE;MACtCpD,KAAK,CAACqD,WAAW,CAACjF,WAAW,CAAC4B,KAAK,CAACjD,SAAS,CAACqG,oBAAoB,CAACE,gBAAgB,CAACtD,KAAK,CAACR,YAAY,EAAEQ,KAAK,CAACjD,SAAS,CAACyD,aAAa,EAAEP,UAAU,CAAC,CAAC;IACvJ;IACA,IAAID,KAAK,CAACjD,SAAS,CAACkE,YAAY,EAAE;MAC9BjB,KAAK,CAACjD,SAAS,CAACkE,YAAY,CAACsC,YAAY,CAAC,IAAI,CAACxG,SAAS,EAAEiD,KAAK,CAACqD,WAAW,EAAEpD,UAAU,EAAED,KAAK,CAACjD,SAAS,CAACyD,aAAa,EAAE,IAAI,CAAC;IACjI;IACAR,KAAK,CAACwD,sBAAsB,CAACxD,KAAK,CAACqD,WAAW,EAAEpD,UAAU,CAAC;IAC3DD,KAAK,CAAC3B,UAAU,CAACD,WAAW,CAAC4B,KAAK,CAACqD,WAAW,CAAC;EACnD,CAAC;EACD3G,UAAU,CAACQ,SAAS,CAACuC,aAAa,GAAG,UAAUH,KAAK,EAAEW,UAAU,EAAE;IAC9D,IAAI7C,KAAK,GAAG,IAAI;IAChB,IAAI,CAACiG,WAAW,GAAI,IAAI,CAACtG,SAAS,CAACe,QAAQ,CAACQ,WAAW,CAAC;MACpDX,EAAE,EAAE,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC;IACrD,CAAC,CAAE;IACH,IAAI,CAAC,IAAI,CAAClD,SAAS,CAAC6E,iBAAiB,EAAE;MACnC,IAAI6B,QAAQ,GAAG,IAAI,CAAC1G,SAAS,CAAC2G,aAAa,EAAE,GAAG,IAAI,CAAC3G,SAAS,CAACW,OAAO,CAACC,EAAE;MACzE,IAAIgG,SAAS,CAACC,SAAS,CAACC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;QAC5C;QACA,IAAIC,IAAI,GAAG,KAAK,CAAC;QACjB,IAAI;UACAA,IAAI,GAAGC,MAAM,CAACC,YAAY;QAC9B,CAAC,CACD,OAAOC,CAAC,EAAE;UACNH,IAAI,GAAG,IAAI;QACf;QACA,IAAI,CAAC/I,iBAAiB,CAAC+I,IAAI,CAAC,IAAIC,MAAM,CAACC,YAAY,CAACE,OAAO,CAACT,QAAQ,CAAC,EAAE;UACnEM,MAAM,CAACC,YAAY,CAACG,UAAU,CAACV,QAAQ,CAAC;QAC5C;MACJ;IACJ;IACA,IAAIW,SAAS,GAAG;MACZC,MAAM,EAAE,KAAK;MAAEC,IAAI,EAAE9H,cAAc;MAAE+C,KAAK,EAAEU,UAAU;MACtDX,KAAK,EAAEA,KAAK;MAAEiF,IAAI,EAAE,IAAI,CAACxH,SAAS;MAAEyH,OAAO,EAAElF,KAAK,CAACkF;IACvD,CAAC;IACD,IAAI,CAACzH,SAAS,CAAC0H,OAAO,CAAC,gBAAgB,EAAEL,SAAS,EAAE,UAAUM,YAAY,EAAE;MACxE,IAAI,CAACN,SAAS,CAACC,MAAM,IAAID,SAAS,CAACI,OAAO,EAAE;QACxC,IAAIlF,KAAK,CAACb,SAAS,KAAK,KAAK,EAAE;UAC3Ba,KAAK,CAACqF,WAAW,GAAG,wDAAwD;QAChF;QACA,IAAIrF,KAAK,CAACb,SAAS,KAAK,QAAQ,EAAE;UAC9Ba,KAAK,CAACqF,WAAW,GAAG,oEAAoE;QAC5F;QACA,IAAIrF,KAAK,CAACb,SAAS,KAAK,UAAU,IAAK1D,iBAAiB,CAACuE,KAAK,CAACsF,SAAS,CAAC,IAAI,CAAC7J,iBAAiB,CAACuE,KAAK,CAACqF,WAAW,CAAC,IAAIrF,KAAK,CAACqF,WAAW,KAAK,EAAG,EAAE;UAC7I,IAAIrF,KAAK,CAACb,SAAS,KAAK,MAAM,IAAIrB,KAAK,CAAC8C,IAAI,EAAE;YAC1C,IAAI,CAACnF,iBAAiB,CAACuE,KAAK,CAACqF,WAAW,CAAC,IAAIrF,KAAK,CAACqF,WAAW,CAACd,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE;cACpF,IAAI3D,IAAI,GAAG,IAAI5D,OAAO,CAACc,KAAK,CAACL,SAAS,CAAC;cACvCK,KAAK,CAACyH,kBAAkB,CAACvF,KAAK,EAAEW,UAAU,EAAE7C,KAAK,EAAE8C,IAAI,CAAC;YAC5D,CAAC,MACI;cACD9C,KAAK,CAAC2C,eAAe,CAAC3C,KAAK,EAAEkC,KAAK,EAAEW,UAAU,CAAC;YACnD;UACJ,CAAC,MACI,IAAIX,KAAK,CAACwF,GAAG,IAAIxF,KAAK,CAACwF,GAAG,CAACC,MAAM,GAAG,CAAC,EAAE;YACxC;YACA,IAAIC,OAAO,GAAG5H,KAAK;YACnB,IAAI6H,MAAM,GAAG,IAAI3I,OAAO,CAACc,KAAK,CAACL,SAAS,CAAC;YACzC,IAAImI,QAAQ,GAAG5F,KAAK,CAAC6F,WAAW,KAAK,iBAAiB,GAAG,0BAA0B,GAAG7F,KAAK,CAAC6F,WAAW;YACvG,IAAIC,GAAG,GAAG,wDAAwD,GAAGF,QAAQ;YAC7E,IAAIG,IAAI,GAAG,IAAInK,IAAI,CAAC;cAChBkK,GAAG,EAAEA,GAAG,GAAG,4DAA4D,GAAG9F,KAAK,CAACwF;YACpF,CAAC,CAAC;YACFO,IAAI,CAACC,SAAS,GAAG,UAAUC,IAAI,EAAE;cAC7B;cACA,IAAIC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC;cACjC;cACA,IAAII,QAAQ,GAAGH,UAAU,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;cAC5D,IAAII,QAAQ,GAAGD,QAAQ,CAAC,UAAU,CAAC;cACnC,IAAIE,UAAU,GAAGF,QAAQ,CAAC,oBAAoB,CAAC;cAC/C,IAAIG,OAAO,GAAGH,QAAQ,CAAC,SAAS,CAAC;cACjC,IAAII,kBAAkB,GAAGC,QAAQ,CAACC,cAAc,CAACjB,OAAO,CAACjI,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,gBAAgB,CAAC;cACjG,IAAIiI,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAKM,SAAS,IAAIN,QAAQ,KAAKX,MAAM,CAACW,QAAQ,EAAE;gBAC7EX,MAAM,CAACW,QAAQ,GAAGA,QAAQ;cAC9B;cACA,IAAIC,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAKK,SAAS,IAAIL,UAAU,KAAKZ,MAAM,CAACY,UAAU,EAAE;gBACrFZ,MAAM,CAACY,UAAU,GAAGA,UAAU;cAClC;cACA,IAAIC,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAKI,SAAS,IAAIJ,OAAO,KAAKb,MAAM,CAACa,OAAO,EAAE;gBACzEb,MAAM,CAACa,OAAO,GAAGA,OAAO;cAC5B;cACAd,OAAO,CAACjI,SAAS,CAAC,SAAS,CAAC,GAAGkI,MAAM;cACrCD,OAAO,CAACjF,eAAe,CAACiF,OAAO,EAAE1F,KAAK,EAAEW,UAAU,EAAEgF,MAAM,CAAC;cAC3D7H,KAAK,CAACL,SAAS,CAACoJ,eAAe,EAAE;cACjC,IAAI/I,KAAK,CAACL,SAAS,CAACqJ,UAAU,IAAKhJ,KAAK,CAACL,SAAS,CAACsJ,aAAa,KAAKjJ,KAAK,CAACL,SAAS,CAACuJ,KAAM,EAAE;gBACzFlJ,KAAK,CAACL,SAAS,CAACqJ,UAAU,CAACG,cAAc,CAACnJ,KAAK,CAACL,SAAS,EAAE,IAAI,CAAC;cACpE;YACJ,CAAC;YACDsI,IAAI,CAACmB,IAAI,EAAE;UACf;QACJ,CAAC,MACI;UACD,IAAI,CAACzL,iBAAiB,CAACuE,KAAK,CAACsF,SAAS,CAAC,KAAK,CAAC7J,iBAAiB,CAACuE,KAAK,CAACsF,SAAS,CAAC,YAAY,CAAC,CAAC,IACzF,CAAC7J,iBAAiB,CAACuE,KAAK,CAACsF,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE;YAClD;YACA,IAAI6B,WAAW,GAAI,CAAC1L,iBAAiB,CAACuE,KAAK,CAACsF,SAAS,CAAC,YAAY,CAAC,CAAC;YAChE;YACAtF,KAAK,CAACsF,SAAS,CAAC,YAAY,CAAC,CAACG,MAAM,GAAG,CAAC,GAAGzF,KAAK,CAACsF,SAAS,CAAC,YAAY,CAAC,GACxEtF,KAAK,CAACsF,SAAS,CAAC,UAAU,CAAE;YAChCtF,KAAK,CAACoH,SAAS,GAAG,EAAE;YACpB;YACA,IAAIC,IAAI,GAAGrH,KAAK,CAACsF,SAAS,CAAC,MAAM,CAAC;YAClC,IAAI,CAAC7J,iBAAiB,CAAC4L,IAAI,CAAC,IAAIrH,KAAK,CAACsH,WAAW,EAAE;cAC/CxJ,KAAK,CAACL,SAAS,CAACiC,aAAa,GAAG,IAAI5D,WAAW,CAAC;gBAAEyL,GAAG,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAAEG,GAAG,EAAEH,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;cAAE,CAAC,EAAE;gBAAEE,GAAG,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAAEG,GAAG,EAAEH,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;cAAE,CAAC,CAAC;YAC/H,CAAC,MACI,IAAI5L,iBAAiB,CAACqC,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC,IAAI,CAAC3D,YAAY,CAACoL,WAAW,CAAC,EAAE;cACrFrJ,KAAK,CAAC2J,mBAAmB,CAACN,WAAW,CAAC;YAC1C;YACArJ,KAAK,CAAC4J,uBAAuB,CAAC/G,UAAU,EAAEwG,WAAW,CAAC;UAC1D;QACJ;MACJ;IACJ,CAAC,CAAC;IACF,IAAI,CAAC,IAAI,CAAC1J,SAAS,CAACa,SAAS,EAAE;MAC3B,IAAI,CAACb,SAAS,CAAC+C,SAAS,CAAC1B,WAAW,CAAC,IAAI,CAACC,UAAU,CAAC;IACzD,CAAC,MACI,IAAI,IAAI,CAACR,aAAa,EAAE;MACzB,IAAI,CAACA,aAAa,CAACO,WAAW,CAAC,IAAI,CAACC,UAAU,CAAC;MAC/C,IAAI,CAACtB,SAAS,CAACiC,aAAa,GAAG,IAAI;IACvC;EACJ,CAAC;EACDtC,UAAU,CAACQ,SAAS,CAAC2H,kBAAkB,GAAG,UAAUvF,KAAK,EAAEW,UAAU,EAAEgH,KAAK,EAAE/G,IAAI,EAAE;IAChFA,IAAI,CAAC0F,QAAQ,GAAGtG,KAAK,CAACqF,WAAW;IACjCzE,IAAI,CAAC2F,UAAU,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IAC1C3F,IAAI,CAAC4F,OAAO,GAAG,IAAI;IACnBmB,KAAK,CAAClK,SAAS,CAAC,SAAS,CAAC,GAAGmD,IAAI;IACjC+G,KAAK,CAAClH,eAAe,CAACkH,KAAK,EAAE3H,KAAK,EAAEW,UAAU,EAAEC,IAAI,CAAC;IACrD,IAAI,CAACnD,SAAS,CAACoJ,eAAe,EAAE;IAChC,IAAI,IAAI,CAACpJ,SAAS,CAACqJ,UAAU,IAAK,IAAI,CAACrJ,SAAS,CAACsJ,aAAa,KAAK,IAAI,CAACtJ,SAAS,CAACuJ,KAAM,EAAE;MACtF,IAAI,CAACvJ,SAAS,CAACqJ,UAAU,CAACG,cAAc,CAAC,IAAI,CAACxJ,SAAS,EAAE,IAAI,CAAC;IAClE;EACJ,CAAC;EACDL,UAAU,CAACQ,SAAS,CAACgK,iBAAiB,GAAG,UAAUC,cAAc,EAAEC,KAAK,EAAE;IACtE,IAAID,cAAc,CAACE,UAAU,IAAI,IAAI,IAAIF,cAAc,IAAI,IAAI,EAAE;MAC7D;MACA,IAAIG,gBAAgB,GAAGH,cAAc,CAACE,UAAU;MAChD,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,gBAAgB,CAACvC,MAAM,EAAEwC,CAAC,EAAE,EAAE;QAC9C,IAAIC,UAAU,GAAI,CAACzM,iBAAiB,CAACoM,cAAc,CAACM,SAAS,CAAC,GAAMN,cAAc,CAACM,SAAS,CAAC5D,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAC1G6D,MAAM,CAAC7L,kBAAkB,CAACsL,cAAc,CAACE,UAAU,CAACE,CAAC,CAAC,EAAEJ,cAAc,CAACM,SAAS,CAAC,CAAC,GAClFE,UAAU,CAACR,cAAc,CAACE,UAAU,CAACE,CAAC,CAAC,CAACJ,cAAc,CAACM,SAAS,CAAC,CAAC,GAClEE,UAAU,CAACR,cAAc,CAACE,UAAU,CAACE,CAAC,CAAC,CAACJ,cAAc,CAACM,SAAS,CAAC,CAAC;QACtE,IAAIF,CAAC,KAAK,CAAC,EAAE;UACT,IAAIC,UAAU,GAAGJ,KAAK,CAACN,GAAG,EAAE;YACxBM,KAAK,CAACN,GAAG,GAAGU,UAAU;UAC1B,CAAC,MACI,IAAIA,UAAU,GAAGJ,KAAK,CAACP,GAAG,EAAE;YAC7BO,KAAK,CAACP,GAAG,GAAGW,UAAU;UAC1B;QACJ,CAAC,MACI;UACDJ,KAAK,CAACN,GAAG,GAAGM,KAAK,CAACP,GAAG,GAAGW,UAAU;QACtC;MACJ;IACJ;EACJ,CAAC;EACD;EACA9K,UAAU,CAACQ,SAAS,CAAC8J,uBAAuB,GAAG,UAAU/G,UAAU,EAAE2H,UAAU,EAAE;IAC7E,IAAIxK,KAAK,GAAG,IAAI;IAChB,IAAI,CAACyK,aAAa,GAAG,EAAE;IACvB,IAAK,CAACxM,YAAY,CAACuM,UAAU,CAAC,EAAG;MAC7B,IAAI,CAACzH,aAAa,GAAG,IAAI,CAACC,eAAe,CAAC,IAAI,CAACZ,YAAY,CAAC;IAChE;IACA,IAAI,CAACsI,UAAU,GAAG,IAAI;IACtB,IAAIC,aAAa,GAAG,IAAI,CAACvI,YAAY,CAACuI,aAAa;IACnD,IAAIZ,cAAc,GAAG,IAAI,CAAC3H,YAAY,CAAC2H,cAAc;IACrD;IACAhI,KAAK,CAACjC,SAAS,CAACkC,OAAO,CAACC,IAAI,CAACuI,UAAU,EAAE,UAAUI,YAAY,EAAEzI,KAAK,EAAE;MACpE,IAAI,CAACxE,iBAAiB,CAACiN,YAAY,CAAC,UAAU,CAAC,CAAC,IAAI,CAACjN,iBAAiB,CAACiN,YAAY,CAAC,aAAa,CAAC,CAAC,EAAE;QACjG,IAAIC,IAAI,GAAG,CAAClN,iBAAiB,CAACiN,YAAY,CAAC,UAAU,CAAC,CAAC,GAAGA,YAAY,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,GAAGA,YAAY,CAAC,MAAM,CAAC;QACjH;QACA,IAAIE,MAAM,GAAG,CAACnN,iBAAiB,CAACiN,YAAY,CAAC,UAAU,CAAC,CAAC,GAAGA,YAAY,CAAC,UAAU,CAAC,CAAC,aAAa,CAAC,GAC/FA,YAAY,CAAC,aAAa,CAAC;QAC/B;QACA,IAAIlE,IAAI,GAAGkE,YAAY,CAAC,UAAU,CAAC;QACnC;QACA,IAAIG,UAAU,GAAGH,YAAY,CAAC,YAAY,CAAC;QAC3C5K,KAAK,CAACgL,cAAc,CAACH,IAAI,EAAEC,MAAM,EAAEpE,IAAI,EAAEqE,UAAU,CAAC;MACxD;IACJ,CAAC,CAAC;IACF,IAAI,CAAC3I,YAAY,CAACsI,UAAU,GAAG,IAAI,CAACA,UAAU;IAC9C,IAAI/M,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACkC,iBAAiB,CAAC,IAAI,IAAI,CAACO,YAAY,CAACoH,WAAW,EAAE;MACtF,IAAI,CAAC7J,SAAS,CAACkC,iBAAiB,GAAG,IAAI,CAAC6I,UAAU;IACtD;IACA,IAAIO,MAAM,GAAGN,aAAa,CAACO,OAAO,CAACvD,MAAM,GAAG,CAAC,GAAGgD,aAAa,CAACO,OAAO,GAAGnN,aAAa,CAAC,IAAI,CAAC4B,SAAS,CAACwL,KAAK,CAAC;IAC3G,IAAIC,gBAAgB,GAAGvN,aAAa,CAAC,KAAK,EAAE;MACxC0C,EAAE,EAAE,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC,UAAU,GAAG,uBAAuB;MACrFwI,SAAS,EAAE,IAAI,CAAC1L,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,WAAW;MAClDQ,MAAM,EAAE,6DAA6D,GACjE,MAAM,GAAG,IAAI,CAACpB,SAAS,CAACS,WAAW,CAACuB,CAAC,GAAG,KAAK,GAC7C,OAAO,GAAG,IAAI,CAAChC,SAAS,CAACS,WAAW,CAACsB,CAAC,GAAG,KAAK,GAC9C,SAAS,GAAG,IAAI,CAAC/B,SAAS,CAACS,WAAW,CAACS,MAAM,GAAG,KAAK,GACrD,QAAQ,GAAG,IAAI,CAAClB,SAAS,CAACS,WAAW,CAACQ,KAAK,GAAG;IACtD,CAAC,CAAC;IACF,IAAI,IAAI,CAACwB,YAAY,CAACkH,SAAS,CAAC3B,MAAM,KAAK,CAAC,EAAE;MAC1C,IAAI2D,OAAO,GAAG,UAAUnB,CAAC,EAAE;QACvB,IAAIoB,CAAC,GAAG,KAAK,CAAC;QACd,IAAIC,WAAW,GAAG;UACd/J,KAAK,EAAEkJ,aAAa,CAACc,MAAM,CAAChK,KAAK;UACjCb,KAAK,EAAE+J,aAAa,CAACc,MAAM,CAAC7K,KAAK;UACjC8K,OAAO,EAAEf,aAAa,CAACc,MAAM,CAACC;QAClC,CAAC;QACD;QACA,IAAIC,gBAAgB,GAAGC,MAAM,CAACxJ,YAAY,CAACkH,SAAS,CAACa,CAAC,CAAC;QACvD,IAAI0B,WAAW;QACf,IAAIC,eAAe,GAAG,KAAK,CAAC;QAC5B,IAAIC,aAAa;QACjB,IAAIC,YAAY;QAChB,IAAIC,UAAU,GAAG,KAAK,CAAC;QACvB,IAAIC,IAAI,GAAG,EAAE;QACb,IAAIC,MAAM,GAAG,EAAE;QACf,IAAIC,IAAI,GAAIzB,aAAa,CAAC0B,QAAQ,GAAIpB,MAAM,CAACd,CAAC,GAAGc,MAAM,CAACtD,MAAM,CAAC,GAC1DgD,aAAa,CAACyB,IAAI,IAAIR,MAAM,CAACjM,SAAS,CAAC2M,UAAU,CAACC,SAAU;QACjE,IAAI5B,aAAa,CAAC6B,cAAc,KAAK,IAAI,IAAI,CAAC7O,iBAAiB,CAACgO,gBAAgB,CAAC,UAAU,CAAC,CAAC,EAAE;UAC3FJ,CAAC,GAAG1M,oBAAoB;UACxB;UACA+M,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,EAAE0B,gBAAgB,CAAC,UAAU,CAAC,EAAEC,MAAM,CAACxJ,YAAY,CAACqK,aAAa,EAAEb,MAAM,CAACxJ,YAAY,CAACsK,iBAAiB,EAAEd,MAAM,CAACxJ,YAAY,CAAC;UAC5J,IAAImJ,CAAC,KAAK,IAAI,IAAIZ,aAAa,CAACgC,YAAY,CAAChF,MAAM,KAAK,CAAC,EAAE;YACvDyE,IAAI,GAAKR,MAAM,CAACxJ,YAAY,CAACuI,aAAa,CAAC6B,cAAc,CAAC/F,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GACtEhI,kBAAkB,CAACmN,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACsB,CAAC,CAAC,EAAEZ,aAAa,CAAC6B,cAAc,CAAC,GACpFZ,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACsB,CAAC,CAAC,CAACZ,aAAa,CAAC6B,cAAc,CAAE;UACxE,CAAC,MACI,IAAIb,gBAAgB,CAAC,UAAU,CAAC,CAAChB,aAAa,CAAC6B,cAAc,CAAC;UAC/D;UACAZ,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACtC,MAAM,KAAK,CAAC,IAAIgD,aAAa,CAACgC,YAAY,CAAChF,MAAM,KAAK,CAAC,EAAE;YACxFyE,IAAI,GAAKR,MAAM,CAACxJ,YAAY,CAACuI,aAAa,CAAC6B,cAAc,CAAC/F,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GACtEhI,kBAAkB,CAACkN,gBAAgB,CAAC,UAAU,CAAC,EAAEhB,aAAa,CAAC6B,cAAc,CAAC,GAC/Eb,gBAAgB,CAAC,UAAU,CAAC,CAAChB,aAAa,CAAC6B,cAAc,CAAE;UACnE;UACAJ,IAAI,GAAG,CAACzO,iBAAiB,CAACyO,IAAI,CAAC,GAAGA,IAAI,GAAIzB,aAAa,CAACyB,IAAI,IAAIR,MAAM,CAACjM,SAAS,CAAC2M,UAAU,CAACC,SAAU;QAC1G;QACA,IAAIK,OAAO,GAAGhB,MAAM,CAACjM,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC,UAAU,GAAG,cAAc,GAAGsH,CAAC,GAAG,aAAa,GAAGoB,CAAC;QAChH;QACA,IAAIsB,eAAe,GAAGjB,MAAM,CAACkB,oBAAoB,CAAClB,MAAM,CAACxJ,YAAY,EAAEuJ,gBAAgB,CAAC,UAAU,CAAC,EAAES,IAAI,CAAC;QAC1GA,IAAI,GAAGW,MAAM,CAACjN,SAAS,CAACkN,QAAQ,CAAC/K,IAAI,CAAC4K,eAAe,CAAC,KAAK,iBAAiB,IAAI,CAAClP,iBAAiB,CAACkP,eAAe,CAAC,MAAM,CAAC,CAAC,GACrHA,eAAe,CAAC,MAAM,CAAC,GAAGT,IAAI;QACpC,IAAIR,MAAM,CAACxJ,YAAY,CAACuI,aAAa,CAACsC,oBAAoB,IAAIrB,MAAM,CAACxJ,YAAY,CAACuI,aAAa,CAACuC,oBAAoB,EAAE;UAClH,IAAIC,gBAAgB,GAAGvB,MAAM,CAACxJ,YAAY,CAACuI,aAAa,CAACsC,oBAAoB;UAC7E,IAAIG,gBAAgB,GAAGxB,MAAM,CAACxJ,YAAY,CAACuI,aAAa,CAACuC,oBAAoB;UAC7E3B,CAAC,GAAG1M,oBAAoB;UACxB;UACA+M,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,EAAE0B,gBAAgB,CAAC,UAAU,CAAC,EAAEC,MAAM,CAACxJ,YAAY,CAACqK,aAAa,EAAEb,MAAM,CAACxJ,YAAY,CAACsK,iBAAiB,EAAEd,MAAM,CAACxJ,YAAY,CAAC;UAC5J,IAAImJ,CAAC,KAAK,IAAI,EAAE;YACZ,IAAIK,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACsB,CAAC,CAAC,CAACZ,aAAa,CAACsC,oBAAoB,CAAC,EAAE;cACvEzB,WAAW,CAAC/J,KAAK,GAAGmK,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACsB,CAAC,CAAC,CAACZ,aAAa,CAACsC,oBAAoB,CAAC;YAC7F;YACA,IAAIrB,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACsB,CAAC,CAAC,CAACZ,aAAa,CAACuC,oBAAoB,CAAC,EAAE;cACvE1B,WAAW,CAAC5K,KAAK,GAAGgL,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACsB,CAAC,CAAC,CAACZ,aAAa,CAACuC,oBAAoB,CAAC;YAC7F;UACJ;QACJ;QACA,IAAIxB,OAAO,GAAIqB,MAAM,CAACjN,SAAS,CAACkN,QAAQ,CAAC/K,IAAI,CAAC4K,eAAe,CAAC,KAAK,iBAAiB,IAC7E,CAAClP,iBAAiB,CAACkP,eAAe,CAAC,SAAS,CAAC,CAAC,GAAIA,eAAe,CAAC,SAAS,CAAC,GAAGlC,aAAa,CAACe,OAAO;QAC3G,IAAI1E,SAAS,GAAG;UACZC,MAAM,EAAE,KAAK;UAAEC,IAAI,EAAE7H,cAAc;UAAE8C,KAAK,EAAEgI,CAAC;UAC7CzD,IAAI,EAAEkF,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,GAAG2B,MAAM,CAACxJ,YAAY,CAAC6H,UAAU,CAACsB,CAAC,CAAC,GAAG,IAAI;UAC/EpE,IAAI,EAAEyE,MAAM,CAACjM,SAAS;UACtB0N,KAAK,EAAE1C,aAAa;UAAEyB,IAAI,EAAEA,IAAI;UAChCX,MAAM,EAAE;YAAE7K,KAAK,EAAE4K,WAAW,CAAC5K,KAAK;YAAEa,KAAK,EAAE+J,WAAW,CAAC/J,KAAK;YAAEiK,OAAO,EAAEF,WAAW,CAACE;UAAQ;QAC/F,CAAC;QACD;QACA,IAAI4B,qBAAqB,GAAG,UAAUtG,SAAS,EAAE;UAC7C,IAAIuG,WAAW,GAAG,CAAC5P,iBAAiB,CAACgO,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,GACnE,cAAc,GAAGhO,iBAAiB,CAACgO,gBAAgB,CAAC,MAAM,CAAC,CAAC,GAAGA,gBAAgB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAGA,gBAAgB,CAAC,MAAM,CAAC;UAC3H4B,WAAW,GAAIA,WAAW,KAAK,SAAS,IAAIA,WAAW,KAAK,cAAc,GAAI,SAAS,GAAGA,WAAW;UACrG,IAAI,CAACvG,SAAS,CAACC,MAAM,EAAE;YACnBD,SAAS,CAACoF,IAAI,GAAGpF,SAAS,CAACoF,IAAI,KAAK,SAAS,GAAGpF,SAAS,CAACqG,KAAK,CAACjB,IAAI,IAChEpM,KAAK,CAACL,SAAS,CAAC2M,UAAU,CAACC,SAAS,GAAGvF,SAAS,CAACoF,IAAI;YACzDpF,SAAS,CAACyE,MAAM,CAAChK,KAAK,GAAGuF,SAAS,CAACyE,MAAM,CAAChK,KAAK,KAAK,SAAS,GACzDuF,SAAS,CAACqG,KAAK,CAAC5B,MAAM,CAAChK,KAAK,GAAGuF,SAAS,CAACyE,MAAM,CAAChK,KAAK;YACzDuF,SAAS,CAACyE,MAAM,CAAC7K,KAAK,GAAGoG,SAAS,CAACyE,MAAM,CAAC7K,KAAK,KAAK,CAAC,GAAGoG,SAAS,CAACqG,KAAK,CAAC5B,MAAM,CAAC7K,KAAK,GAAGoG,SAAS,CAACyE,MAAM,CAAC7K,KAAK;YAC7G,IAAIjD,iBAAiB,CAACgN,aAAa,CAACsC,oBAAoB,CAAC,EAAE;cACvDjN,KAAK,CAACL,SAAS,CAACwB,MAAM,CAAC0B,UAAU,CAAC,CAAC8H,aAAa,CAACc,MAAM,CAAChK,KAAK,GAAGuF,SAAS,CAACyE,MAAM,CAAChK,KAAK;YAC1F;YACA,IAAI9D,iBAAiB,CAACgN,aAAa,CAACuC,oBAAoB,CAAC,EAAE;cACvDlN,KAAK,CAACL,SAAS,CAACwB,MAAM,CAAC0B,UAAU,CAAC,CAAC8H,aAAa,CAACc,MAAM,CAAC7K,KAAK,GAAGoG,SAAS,CAACyE,MAAM,CAAC7K,KAAK;YAC1F;UACJ,CAAC,MACI;YACDoG,SAAS,CAACoF,IAAI,GAAGA,IAAI;YACrBpF,SAAS,CAACyE,MAAM,CAAChK,KAAK,GAAGkJ,aAAa,CAACc,MAAM,CAAChK,KAAK;YACnDuF,SAAS,CAACyE,MAAM,CAAC7K,KAAK,GAAG+J,aAAa,CAACc,MAAM,CAAC7K,KAAK;YACnDZ,KAAK,CAACL,SAAS,CAACwB,MAAM,CAAC0B,UAAU,CAAC,CAAC8H,aAAa,CAACc,MAAM,GAAGd,aAAa,CAACc,MAAM;UAClF;UACAzE,SAAS,CAACyE,MAAM,CAACC,OAAO,GAAG/N,iBAAiB,CAACqJ,SAAS,CAACyE,MAAM,CAACC,OAAO,CAAC,GAAGA,OAAO,GAAG1E,SAAS,CAACyE,MAAM,CAACC,OAAO;UAC3G,IAAI1L,KAAK,CAACyK,aAAa,CAAC9C,MAAM,GAAG,CAAC,EAAE;YAChCqE,YAAY,GAAGhM,KAAK,CAACL,SAAS,CAACe,QAAQ,CAACQ,WAAW,CAAC;cAChDX,EAAE,EAAEP,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC,UAAU,GAAG,GAAG,GAAG0K,WAAW,GAAG,QAAQ;cAAEC,SAAS,EAAE;YAC5G,CAAC,CAAC;YACFxN,KAAK,CAACyK,aAAa,CAACgD,IAAI,CAACzB,YAAY,CAAC;UAC1C,CAAC,MACI;YACD,KAAK,IAAI0B,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG1N,KAAK,CAACyK,aAAa,CAAC9C,MAAM,EAAE+F,GAAG,EAAE,EAAE;cACvD,IAAIC,GAAG,GAAG3N,KAAK,CAACyK,aAAa,CAACiD,GAAG,CAAC;cAClC,IAAIC,GAAG,CAACpN,EAAE,CAACkG,OAAO,CAAC8G,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE;gBAClCvB,YAAY,GAAG2B,GAAG;gBAClB;cACJ,CAAC,MACI,IAAID,GAAG,IAAI1N,KAAK,CAACyK,aAAa,CAAC9C,MAAM,GAAG,CAAC,EAAE;gBAC5CqE,YAAY,GAAGhM,KAAK,CAACL,SAAS,CAACe,QAAQ,CAACQ,WAAW,CAAC;kBAChDX,EAAE,EAAEP,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC,UAAU,GAAG,GAAG,GAAG0K,WAAW,GAAG;gBACvF,CAAC,CAAC;gBACFvN,KAAK,CAACyK,aAAa,CAACgD,IAAI,CAACzB,YAAY,CAAC;gBACtC;cACJ;YACJ;UACJ;UACA,IAAI4B,OAAO;UACX,QAAQL,WAAW;YACf,KAAK,SAAS;cACV,IAAI,CAAC5B,gBAAgB,CAAC,iBAAiB,CAAC,EAAE;gBACtCO,IAAI,IAAI,GAAG,GAAIP,gBAAgB,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG,GAAIA,gBAAgB,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE;gBAC7F;gBACAA,gBAAgB,CAACpM,GAAG,CAAC,UAAUiI,SAAS,EAAE;kBACtC0E,IAAI,IAAI,KAAK,GAAI1E,SAAS,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG,GAAIA,SAAS,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE;gBAC/E,CAAC,CAAC;cACN,CAAC,MACI;gBACD;gBACA0E,IAAI,GAAGlM,KAAK,CAAC6N,wBAAwB,CAAClC,gBAAgB,CAAC;cAC3D;cACAO,IAAI,IAAI,KAAK;cACb,IAAIA,IAAI,CAACvE,MAAM,GAAG,CAAC,EAAE;gBACjBkE,WAAW,GAAG,IAAIzN,UAAU,CAACwO,OAAO,EAAE5F,SAAS,CAACoF,IAAI,EAAEpF,SAAS,CAACyE,MAAM,CAAC7K,KAAK,EAAEoG,SAAS,CAACyE,MAAM,CAAChK,KAAK,EAAEiK,OAAO,EAAE1E,SAAS,CAACyE,MAAM,CAACC,OAAO,EAAEf,aAAa,CAACmD,SAAS,EAAE5B,IAAI,CAAC;gBACvK0B,OAAO,GAAG5N,KAAK,CAACL,SAAS,CAACe,QAAQ,CAACqN,QAAQ,CAAClC,WAAW,CAAC;cAC5D;cACA;YACJ,KAAK,YAAY;cACb;cACAF,gBAAgB,CAACpM,GAAG,CAAC,UAAUyO,QAAQ,EAAE7L,KAAK,EAAE;gBAC5C,IAAIA,KAAK,KAAK,CAAC,EAAE;kBACb+J,IAAI,IAAI,IAAI,GAAI8B,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG,GAAIA,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE;gBAC5E,CAAC,MACI;kBACD9B,IAAI,IAAI,GAAG,GAAI8B,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,KAAK,GAAIA,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG;gBACnF;cACJ,CAAC,CAAC;cACF,IAAI9B,IAAI,CAACvE,MAAM,GAAG,CAAC,EAAE;gBACjBkE,WAAW,GAAG,IAAIzN,UAAU,CAACwO,OAAO,EAAE,aAAa,EAAE,CAACjP,iBAAiB,CAACqJ,SAAS,CAACyE,MAAM,CAAC7K,KAAK,CAAC,GAAGoG,SAAS,CAACyE,MAAM,CAAC7K,KAAK,GAAG,CAAC,EAAE,CAACjD,iBAAiB,CAACqJ,SAAS,CAACoF,IAAI,CAAC,GAAGpF,SAAS,CAACoF,IAAI,GAC7KpF,SAAS,CAACyE,MAAM,CAAChK,KAAK,EAAEiK,OAAO,EAAE1E,SAAS,CAACyE,MAAM,CAACC,OAAO,EAAEf,aAAa,CAACmD,SAAS,EAAE5B,IAAI,CAAC;gBAC7F0B,OAAO,GAAG5N,KAAK,CAACL,SAAS,CAACe,QAAQ,CAACqN,QAAQ,CAAClC,WAAW,CAAC;cAC5D;cACA;YACJ,KAAK,iBAAiB;cAClB;cACAF,gBAAgB,CAACpM,GAAG,CAAC,UAAU0O,aAAa,EAAE;gBAC1C;gBACAA,aAAa,CAAC1O,GAAG,CAAC,UAAUyO,QAAQ,EAAE7L,KAAK,EAAE;kBACzC,IAAIA,KAAK,KAAK,CAAC,EAAE;oBACb+J,IAAI,IAAI,IAAI,GAAI8B,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG,GAAIA,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE;kBAC5E,CAAC,MACI;oBACD9B,IAAI,IAAI,GAAG,GAAI8B,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,KAAK,GAAIA,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG;kBACnF;gBACJ,CAAC,CAAC;cACN,CAAC,CAAC;cACF,IAAI9B,IAAI,CAACvE,MAAM,GAAG,CAAC,EAAE;gBACjBkE,WAAW,GAAG,IAAIzN,UAAU,CAACwO,OAAO,EAAE,aAAa,EAAE,CAACjP,iBAAiB,CAACqJ,SAAS,CAACyE,MAAM,CAAC7K,KAAK,CAAC,GAAGoG,SAAS,CAACyE,MAAM,CAAC7K,KAAK,GAAG,CAAC,EAAE,CAACjD,iBAAiB,CAACqJ,SAAS,CAACoF,IAAI,CAAC,GAAGpF,SAAS,CAACoF,IAAI,GAC7KpF,SAAS,CAACyE,MAAM,CAAChK,KAAK,EAAEiK,OAAO,EAAE1E,SAAS,CAACyE,MAAM,CAACC,OAAO,EAAEf,aAAa,CAACmD,SAAS,EAAE5B,IAAI,CAAC;gBAC7F0B,OAAO,GAAG5N,KAAK,CAACL,SAAS,CAACe,QAAQ,CAACqN,QAAQ,CAAClC,WAAW,CAAC;cAC5D;cACA;YACJ,KAAK,OAAO;cACR;cACA,IAAIqC,SAAS,GAAGvC,gBAAgB,CAAC,OAAO,CAAC;cACzC,IAAIwC,YAAY,GAAInO,KAAK,CAACL,SAAS,CAACwB,MAAM,CAAC0B,UAAU,CAAC,CAACgI,IAAI,KAAK,UAAU,GAAIF,aAAa,CAACwD,YAAY,GAAGxD,aAAa,CAACwD,YAAY,IAAInO,KAAK,CAACL,SAAS,CAACa,SAAS,GAAGR,KAAK,CAACL,SAAS,CAACuJ,KAAK,GAAGlJ,KAAK,CAAC+C,aAAa,CAAC;cACjNgJ,aAAa,GAAG,IAAIjN,YAAY,CAAC8N,OAAO,EAAE5F,SAAS,CAACoF,IAAI,EAAEpF,SAAS,CAACyE,MAAM,EAAEC,OAAO,EAAEwC,SAAS,CAAC,GAAG,CAAC,EAAEA,SAAS,CAAC,GAAG,CAAC,EAAEC,YAAY,EAAExD,aAAa,CAACmD,SAAS,CAAC;cAC3JF,OAAO,GAAG5N,KAAK,CAACL,SAAS,CAACe,QAAQ,CAAC0N,UAAU,CAACrC,aAAa,CAAC;cAC5D;YACJ,KAAK,YAAY;cACb;cACAJ,gBAAgB,CAACpM,GAAG,CAAC,UAAU8O,cAAc,EAAElM,KAAK,EAAE;gBAClD;gBACA,IAAI+L,SAAS,GAAGG,cAAc,CAAC,OAAO,CAAC;gBACvC,IAAIF,YAAY,GAAInO,KAAK,CAACL,SAAS,CAACwB,MAAM,CAAC0B,UAAU,CAAC,CAACgI,IAAI,KAAK,UAAU,GAAIF,aAAa,CAACwD,YAAY,GAAGxD,aAAa,CAACwD,YAAY,IAAInO,KAAK,CAACL,SAAS,CAACa,SAAS,GAAGR,KAAK,CAACL,SAAS,CAACuJ,KAAK,GAAGlJ,KAAK,CAAC+C,aAAa,CAAC;gBACjNgJ,aAAa,GAAG,IAAIjN,YAAY,CAAE8N,OAAO,GAAG,aAAa,GAAGzK,KAAK,EAAG6E,SAAS,CAACoF,IAAI,EAAEpF,SAAS,CAACyE,MAAM,EAAEC,OAAO,EAAEwC,SAAS,CAAC,GAAG,CAAC,EAAEA,SAAS,CAAC,GAAG,CAAC,EAAEC,YAAY,EAAExD,aAAa,CAACmD,SAAS,CAAC;gBACrLF,OAAO,GAAG5N,KAAK,CAACL,SAAS,CAACe,QAAQ,CAAC0N,UAAU,CAACrC,aAAa,CAAC;gBAC5D/L,KAAK,CAACsO,sBAAsB,CAACtC,YAAY,EAAE4B,OAAO,EAAEL,WAAW,EAAE5B,gBAAgB,EAAExB,CAAC,CAAC;cACzF,CAAC,CAAC;cACF;YACJ,KAAK,MAAM;cACP+B,IAAI,GAAGP,gBAAgB,CAAC,OAAO,CAAC;cAChCE,WAAW,GAAG,IAAIzN,UAAU,CAACwO,OAAO,EAAE5F,SAAS,CAACoF,IAAI,EAAEpF,SAAS,CAACyE,MAAM,CAAC7K,KAAK,EAAEoG,SAAS,CAACyE,MAAM,CAAChK,KAAK,EAAEiK,OAAO,EAAE1E,SAAS,CAACyE,MAAM,CAACC,OAAO,EAAEf,aAAa,CAACmD,SAAS,EAAE5B,IAAI,CAAC;cACvK0B,OAAO,GAAG5N,KAAK,CAACL,SAAS,CAACe,QAAQ,CAACqN,QAAQ,CAAClC,WAAW,CAAC;cACxD;UAAM;UAEd,IAAI,CAAClO,iBAAiB,CAACiQ,OAAO,CAAC,IAAIL,WAAW,KAAK,YAAY,EAAE;YAC7DvN,KAAK,CAACsO,sBAAsB,CAACtC,YAAY,EAAE4B,OAAO,EAAEL,WAAW,EAAE5B,gBAAgB,EAAExB,CAAC,CAAC;UACzF;UACA,IAAIA,CAAC,KAAKnK,KAAK,CAACoC,YAAY,CAACkH,SAAS,CAAC3B,MAAM,GAAG,CAAC,EAAE;YAC/C3H,KAAK,CAACuO,aAAa,CAAC1L,UAAU,EAAEoI,MAAM,EAAET,UAAU,EAAEY,gBAAgB,CAAC;UACzE;QACJ,CAAC;QACDkC,qBAAqB,CAACkB,IAAI,CAAC5C,MAAM,CAAC;QAClCA,MAAM,CAACjM,SAAS,CAAC0H,OAAO,CAAC,gBAAgB,EAAEL,SAAS,EAAEsG,qBAAqB,CAAC;MAChF,CAAC;MACD,IAAI1B,MAAM,GAAG,IAAI;MACjB,KAAK,IAAIzB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC/H,YAAY,CAACkH,SAAS,CAAC3B,MAAM,EAAEwC,CAAC,EAAE,EAAE;QACzDmB,OAAO,CAACnB,CAAC,CAAC;MACd;IACJ,CAAC,MACI;MACD,IAAI,CAACoE,aAAa,CAAC1L,UAAU,EAAEoI,MAAM,EAAET,UAAU,EAAEY,gBAAgB,CAAC;IACxE;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACA9L,UAAU,CAACQ,SAAS,CAACwO,sBAAsB,GAAG,UAAUtC,YAAY,EAAE4B,OAAO,EAAEL,WAAW,EAAE5B,gBAAgB,EAAExJ,KAAK,EAAE;IACjH,IAAIsM,QAAQ,GAAI1B,MAAM,CAACjN,SAAS,CAACkN,QAAQ,CAAC/K,IAAI,CAAC,IAAI,CAACG,YAAY,CAACsK,iBAAiB,CAAC,KAAK,gBAAgB,GACpG,IAAI,CAACtK,YAAY,CAACsK,iBAAiB,GAAG,CAAC,IAAI,CAACtK,YAAY,CAACsK,iBAAiB,CAAE;IAChF,IAAI3B,UAAU;IACd,KAAK,IAAI2D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,QAAQ,CAAC9G,MAAM,EAAE+G,CAAC,EAAE,EAAE;MACtC,IAAI,CAAC/Q,iBAAiB,CAACgO,gBAAgB,CAAC,UAAU,CAAC,CAAC,EAAE;QAClDZ,UAAU,GAAG0D,QAAQ,CAACC,CAAC,CAAC;QACxB;MACJ;IACJ;IACAd,OAAO,CAACe,YAAY,CAAC,YAAY,EAAI,CAAChR,iBAAiB,CAACgO,gBAAgB,CAAC,UAAU,CAAC,CAAC,GAChFA,gBAAgB,CAAC,UAAU,CAAC,CAACZ,UAAU,CAAC,GAAI,EAAE,CAAE;IACrD6C,OAAO,CAACe,YAAY,CAAC,UAAU,EAAE,CAAC,IAAI,CAAChP,SAAS,CAACiP,QAAQ,GAAGzM,KAAK,GAAG,CAAC,EAAE6K,QAAQ,EAAE,CAAC;IAClFY,OAAO,CAACe,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC;IAChC,IAAIpB,WAAW,KAAK,YAAY,IAAIA,WAAW,KAAK,iBAAiB,EAAE;MACnEK,OAAO,CAACe,YAAY,CAAC,OAAO,EAAE,cAAc,CAAC;IACjD;IACAnQ,iBAAiB,CAAC,IAAI,CAACmB,SAAS,CAACkP,iBAAiB,EAAE,IAAI,CAAClP,SAAS,CAACmP,mBAAmB,EAAElB,OAAO,EAAE,wBAAwB,CAAC;IAC1H,IAAI,IAAI,CAACjO,SAAS,CAACoP,qBAAqB,EAAE;MACtC,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC/O,SAAS,CAACoP,qBAAqB,CAACpH,MAAM,EAAE+G,CAAC,EAAE,EAAE;QAClE,IAAIM,aAAa,GAAG,IAAI,CAACrP,SAAS,CAAC4C,cAAc,CAAC0M,oBAAoB,CAACC,kBAAkB,GACrF,IAAI,CAAC9M,YAAY,CAACuI,aAAa,GAAG,IAAI,CAAChL,SAAS,CAAC4C,cAAc,CAAC0M,oBAAoB;QACxF,IAAI,IAAI,CAACtP,SAAS,CAACoP,qBAAqB,CAACL,CAAC,CAAC,KAAKd,OAAO,CAACrN,EAAE,EAAE;UACxDqN,OAAO,CAACe,YAAY,CAAC,MAAM,EAAEK,aAAa,CAAC5C,IAAI,CAAC;UAChDwB,OAAO,CAACe,YAAY,CAAC,QAAQ,EAAEK,aAAa,CAACvD,MAAM,CAAChK,KAAK,CAAC;UAC1DmM,OAAO,CAACe,YAAY,CAAC,cAAc,EAAGK,aAAa,CAACtD,OAAO,CAAEsB,QAAQ,EAAE,CAAC;UACxEY,OAAO,CAACe,YAAY,CAAC,gBAAgB,EAAE,CAAChR,iBAAiB,CAACqR,aAAa,CAACvD,MAAM,CAACC,OAAO,CAAC,GAAGsD,aAAa,CAACtD,OAAO,GAAGsD,aAAa,CAACvD,MAAM,CAACC,OAAO,EAAEsB,QAAQ,EAAE,CAAC;UAC3JY,OAAO,CAACe,YAAY,CAAC,cAAc,EAAGK,aAAa,CAACvD,MAAM,CAAC7K,KAAK,CAAEoM,QAAQ,EAAE,CAAC;QACjF;MACJ;IACJ;IACAhB,YAAY,CAAChL,WAAW,CAAC4M,OAAO,CAAC;EACrC,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACItO,UAAU,CAACQ,SAAS,CAACyO,aAAa,GAAG;EACrC;EACA1L,UAAU,EAAEoI,MAAM,EAAET,UAAU,EAAEY,gBAAgB,EAAE;IAC9C,IAAIpL,KAAK,GAAG,IAAI;IAChB,IAAImP,OAAO;IACX,IAAI,IAAI,CAAC/M,YAAY,CAAC2H,cAAc,CAACpC,MAAM,IAAI,IAAI,CAAChI,SAAS,CAACyP,YAAY,EAAE;MACxE,IAAIC,QAAQ,GAAG,IAAI,CAACjN,YAAY,CAAC2H,cAAc,CAACpC,MAAM;MACtD,IAAI2H,QAAQ;MACZ,IAAIC,OAAO,GAAG,UAAUb,CAAC,EAAE;QACvBY,QAAQ,GAAGE,MAAM,CAACpN,YAAY,CAAC2H,cAAc,CAAC2E,CAAC,CAAC;QAChDS,OAAO,GAAGK,MAAM,CAAC7P,SAAS,CAACe,QAAQ,CAACQ,WAAW,CAAC;UAC5CX,EAAE,EAAEiP,MAAM,CAAC7P,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC,UAAU,GAAG,gBAAgB,GAAG6L;QACvF,CAAC,CAAC;QACF,IAAI1E,KAAK,GAAG;UAAEP,GAAG,EAAE,CAAC;UAAEC,GAAG,EAAE;QAAE,CAAC;QAC9B8F,MAAM,CAAC1F,iBAAiB,CAACwF,QAAQ,EAAEtF,KAAK,CAAC;QACzC;QACA,IAAIE,gBAAgB,GAAGoF,QAAQ,CAACrF,UAAU;QAC1C;QACAC,gBAAgB,CAAC3K,GAAG,CAAC,UAAUkQ,UAAU,EAAEtF,CAAC,EAAE;UAC1CnK,KAAK,CAAC0P,YAAY,CAAC1P,KAAK,CAACoC,YAAY,EAAEqN,UAAU,EAAExE,MAAM,CAACd,CAAC,GAAGc,MAAM,CAACtD,MAAM,CAAC,EAAEqC,KAAK,EAAE0E,CAAC,EAAEvE,CAAC,EAAEgF,OAAO,EAAEtM,UAAU,EAAEyM,QAAQ,CAAC;QAC7H,CAAC,CAAC;QACFE,MAAM,CAAC/E,aAAa,CAACgD,IAAI,CAAC0B,OAAO,CAAC;MACtC,CAAC;MACD,IAAIK,MAAM,GAAG,IAAI;MACjB,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGW,QAAQ,EAAEX,CAAC,EAAE,EAAE;QAC/Ba,OAAO,CAACb,CAAC,CAAC;MACd;IACJ;IACA,IAAK,IAAI,CAAC/O,SAAS,CAACkE,YAAY,IAAI,CAAC,IAAI,CAAClE,SAAS,CAACa,SAAS,IAAK,IAAI,CAACb,SAAS,CAACuD,YAAY,CAACY,MAAM,EAAE;MAClG,IAAI,CAACnE,SAAS,CAACkE,YAAY,CAACE,oCAAoC,CAAC,IAAI,CAACpE,SAAS,CAACO,gBAAgB,CAAC;IACrG;IACA,IAAIyP,KAAK,GAAI,IAAI,CAAChQ,SAAS,CAACe,QAAQ,CAACQ,WAAW,CAAC;MAC7CX,EAAE,EAAE,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC,UAAU,GAAG,uBAAuB;MACrF+M,KAAK,EAAE;IACX,CAAC,CAAE;IACH,IAAI,IAAI,CAACjQ,SAAS,CAACkQ,eAAe,IAAI,IAAI,CAACzN,YAAY,CAAC0N,iBAAiB,CAAC1I,OAAO,EAAE;MAC/E;MACA,IAAI2I,WAAW,GAAG,EAAE;MACpB;MACAvF,UAAU,CAACjL,GAAG,CAAC,UAAUoM,gBAAgB,EAAExB,CAAC,EAAE;QAC1CnK,KAAK,CAACgQ,WAAW,CAAChQ,KAAK,CAACoC,YAAY,EAAES,UAAU,EAAE8I,gBAAgB,EAAEgE,KAAK,EAAExF,CAAC,EAAEiB,gBAAgB,EAAE2E,WAAW,CAAC;MAChH,CAAC,CAAC;MACF,IAAI,CAACtF,aAAa,CAACgD,IAAI,CAACkC,KAAK,CAAC;IAClC;IACA,IAAI,IAAI,CAAChQ,SAAS,CAACqG,oBAAoB,EAAE;MACrC,IAAI,CAACyE,aAAa,CAACgD,IAAI,CAAC,IAAI,CAAC9N,SAAS,CAACqG,oBAAoB,CAACE,gBAAgB,CAAC,IAAI,CAAC9D,YAAY,EAAE,IAAI,CAACW,aAAa,EAAEF,UAAU,CAAC,CAAC;IACpI;IACA,IAAI,CAAC4H,aAAa,CAAClL,GAAG,CAAC,UAAUe,OAAO,EAAE;MACtCN,KAAK,CAACiG,WAAW,CAACjF,WAAW,CAACV,OAAO,CAAC;IAC1C,CAAC,CAAC;IACF,IAAI,IAAI,CAACX,SAAS,CAACkE,YAAY,EAAE;MAC7B,IAAI,CAAClE,SAAS,CAACkE,YAAY,CAACsC,YAAY,CAAC,IAAI,CAACxG,SAAS,EAAE,IAAI,CAACsG,WAAW,EAAEpD,UAAU,EAAG,IAAI,CAAClD,SAAS,CAACa,SAAS,GAAGiF,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC3C,aAAa,CAAC,GAC3I,IAAI,CAACA,aAAa,EAAG,IAAI,CAAC;IACpC;IACA,IAAI,CAACqD,sBAAsB,CAAC,IAAI,CAACH,WAAW,EAAEpD,UAAU,CAAC;IACzD,IAAI,CAAC5B,UAAU,CAACD,WAAW,CAAC,IAAI,CAACiF,WAAW,CAAC;EACjD,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI3G,UAAU,CAACQ,SAAS,CAACkQ,WAAW,GAAG,UAAU9N,KAAK,EAAEW,UAAU;EAC9D;EACAwK,KAAK,EAAEsC,KAAK,EAAEM,UAAU,EAAE7E,gBAAgB,EAAE8E,SAAS,EAAE;IACnD,IAAI,CAACvQ,SAAS,CAACkQ,eAAe,CAACG,WAAW,CAAC9N,KAAK,EAAEW,UAAU,EAAEwK,KAAK,EAAEnL,KAAK,CAACoH,SAAS,EAAEqG,KAAK,EAAEvE,gBAAgB,EAAE6E,UAAU,EAAEC,SAAS,CAAC;EACzI,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACI;EACA5Q,UAAU,CAACQ,SAAS,CAAC+N,wBAAwB,GAAG,UAAUlC,gBAAgB,EAAE;IACxE,IAAIO,IAAI,GAAG,EAAE;IACb;IACA,IAAImB,KAAK;IACT,KAAK,IAAIqB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG/C,gBAAgB,CAAChE,MAAM,EAAE+G,CAAC,EAAE,EAAE;MAC9CxC,IAAI,IAAI,GAAG,GAAIP,gBAAgB,CAAC+C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG,GAAI/C,gBAAgB,CAAC+C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE;MACnG;MACArB,KAAK,GAAG1B,gBAAgB,CAAC+C,CAAC,CAAC;MAC3B;MACArB,KAAK,CAAC9N,GAAG,CAAC,UAAUiI,SAAS,EAAE;QAC3B0E,IAAI,IAAI,KAAK,GAAI1E,SAAS,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE,GAAG,GAAG,GAAIA,SAAS,CAAC,OAAO,CAAC,CAAC,GAAG,CAAE;MAC/E,CAAC,CAAC;IACN;IACA,OAAO0E,IAAI;EACf,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI5M,UAAU,CAACQ,SAAS,CAAC4P,YAAY,GAAG;EACpC;EACAxN,KAAK,EAAEuN,UAAU,EAAEhO,KAAK,EAAEuI,KAAK,EAAEmG,WAAW,EAAEC,SAAS,EAAET,KAAK,EAAE9M,UAAU,EAAEkH,cAAc,EAAE;IACxF,IAAIpM,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACyP,YAAY,CAAC,IAAI,CAACrF,cAAc,CAAC3C,OAAO,EAAE;MAC3E,OAAO,IAAI;IACf;IACA3F,KAAK,GAAGsI,cAAc,CAACqC,IAAI,GAAGrC,cAAc,CAACqC,IAAI,GAAG3K,KAAK;IACzD,IAAI,CAAC9B,SAAS,CAACyP,YAAY,CAAC7O,EAAE,GAAG,IAAI,CAACZ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,GAAGsC,UAAU,GAAG,eAAe,GACtGsN,WAAW,GAAG,aAAa,GAAGC,SAAS;IAC3C,IAAI,CAACzQ,SAAS,CAACyP,YAAY,CAACM,YAAY,CAAC3F,cAAc,EAAE0F,UAAU,EAAEhO,KAAK,EAAEuI,KAAK,EAAEmG,WAAW,EAAEC,SAAS,EAAEvN,UAAU,EAAEX,KAAK,EAAEyN,KAAK,EAAE,IAAI,CAAChQ,SAAS,CAACyP,YAAY,CAAC7O,EAAE,CAAC;EACxK,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI;EACAjB,UAAU,CAACQ,SAAS,CAACgN,oBAAoB,GAAG,UAAU5K,KAAK,EAAEmL,KAAK,EAAE5L,KAAK,EAAE;IACvEA,KAAK,GAAGA,KAAK,GAAGA,KAAK,GAAGS,KAAK,CAACyI,aAAa,CAACyB,IAAI;IAChD,IAAIlK,KAAK,CAACyI,aAAa,CAACgC,YAAY,CAAChF,MAAM,KAAK,CAAC,IAAIhK,iBAAiB,CAACuE,KAAK,CAAC+H,UAAU,CAAC,EAAE;MACtF,OAAOxI,KAAK;IAChB;IACA;IACA,IAAIU,KAAK,GAAGtD,oBAAoB,CAACqD,KAAK,CAAC+H,UAAU,EAAEoD,KAAK,EAAEnL,KAAK,CAACuK,aAAa,EAAEvK,KAAK,CAACwK,iBAAiB,EAAExK,KAAK,CAAC;IAC9G,IAAIyK,YAAY,GAAG,IAAIxN,YAAY,CAAC,IAAI,CAACQ,SAAS,CAAC;IACnD,IAAIhC,iBAAiB,CAACuE,KAAK,CAAC+H,UAAU,CAAC9H,KAAK,CAAC,CAAC,EAAE;MAC5C,OAAOV,KAAK;IAChB;IACA,OAAOkL,YAAY,CAACG,oBAAoB,CAAC5K,KAAK,CAACyI,aAAa,EAAEzI,KAAK,CAAC+H,UAAU,CAAC9H,KAAK,CAAC,EAAEV,KAAK,CAAC;EACjG,CAAC;EACD;EACAnC,UAAU,CAACQ,SAAS,CAACkL,cAAc,GAAG,UAAUH,IAAI,EAAEwF,WAAW,EAAE3J,IAAI,EAAEqE,UAAU,EAAE;IACjF,IAAI/K,KAAK,GAAG,IAAI;IAChB,IAAIwD,QAAQ;IACZ,IAAIC,SAAS;IACb;IACA,IAAI6M,OAAO,GAAG,EAAE;IAChB,QAAQzF,IAAI,CAAC0F,WAAW,EAAE;MACtB,KAAK,SAAS;QACV;QACAD,OAAO,GAAG,IAAI,CAACE,mBAAmB,CAACH,WAAW,CAAC,CAAC,CAAC,EAAE3J,IAAI,EAAEqE,UAAU,CAAC;QACpE,IAAIuF,OAAO,CAAC3I,MAAM,GAAG,CAAC,EAAE;UACpB2I,OAAO,CAAC,UAAU,CAAC,GAAGvF,UAAU;UAChCuF,OAAO,CAAC,MAAM,CAAC,GAAGzF,IAAI;UACtByF,OAAO,CAAC,iBAAiB,CAAC,GAAG,KAAK;UAClC,IAAI,CAAClO,YAAY,CAACkH,SAAS,CAACmE,IAAI,CAAC6C,OAAO,CAAC;QAC7C;QACA;MACJ,KAAK,cAAc;QACf;QACA,IAAIG,iBAAiB,GAAG,EAAE;QAC1B,KAAK,IAAItG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkG,WAAW,CAAC1I,MAAM,EAAEwC,CAAC,EAAE,EAAE;UACzC;UACAmG,OAAO,GAAG,IAAI,CAACE,mBAAmB,CAACH,WAAW,CAAClG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEzD,IAAI,EAAEqE,UAAU,CAAC;UACvE,IAAIuF,OAAO,CAAC3I,MAAM,GAAG,CAAC,EAAE;YACpB8I,iBAAiB,CAAChD,IAAI,CAAC6C,OAAO,CAAC;UACnC;QACJ;QACAG,iBAAiB,CAAC,UAAU,CAAC,GAAG1F,UAAU;QAC1C0F,iBAAiB,CAAC,MAAM,CAAC,GAAG5F,IAAI;QAChC4F,iBAAiB,CAAC,iBAAiB,CAAC,GAAG,IAAI;QAC3C,IAAI,CAACrO,YAAY,CAACkH,SAAS,CAACmE,IAAI,CAACgD,iBAAiB,CAAC;QACnD;MACJ,KAAK,YAAY;QACb,IAAIC,YAAY,GAAG,CAAC/S,iBAAiB,CAAC,IAAI,CAACyE,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,CAAC,GAC9E,OAAQ,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAM,KAAK,QAAQ,GAC/D+P,QAAQ,CAAC,IAAI,CAACvO,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,EAAE,EAAE,CAAC,GAAG,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,GAAI,CAAC;QACtH;QACAyP,WAAW,CAAC9Q,GAAG,CAAC,UAAU4M,MAAM,EAAEhK,KAAK,EAAE;UACrCqB,QAAQ,GAAG2I,MAAM,CAAC,CAAC,CAAC;UACpB1I,SAAS,GAAG0I,MAAM,CAAC,CAAC,CAAC;UACrB,IAAIyE,KAAK,GAAG1S,iBAAiB,CAACsF,QAAQ,EAAEC,SAAS,EAAEzD,KAAK,CAAC+C,aAAa,EAAE/C,KAAK,CAACoC,YAAY,EAAEpC,KAAK,CAACL,SAAS,CAAC;UAC5GK,KAAK,CAAC6Q,YAAY,CAACD,KAAK,EAAEF,YAAY,CAAC;UACvCJ,OAAO,CAAC7C,IAAI,CAAC;YACTmD,KAAK,EAAEA,KAAK;YAAEE,GAAG,EAAEtN,QAAQ;YAAEuN,GAAG,EAAEtN;UACtC,CAAC,CAAC;QACN,CAAC,CAAC;QACF6M,OAAO,CAAC,UAAU,CAAC,GAAGvF,UAAU;QAChCuF,OAAO,CAAC,MAAM,CAAC,GAAGzF,IAAI;QACtB,IAAI,CAACzI,YAAY,CAACkH,SAAS,CAACmE,IAAI,CAAC6C,OAAO,CAAC;QACzC;MACJ,KAAK,iBAAiB;QAClB,IAAIU,aAAa,GAAG,CAACrT,iBAAiB,CAAC,IAAI,CAACyE,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,CAAC,GAC/E,OAAQ,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAM,KAAK,QAAQ,GAC/D+P,QAAQ,CAAC,IAAI,CAACvO,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,EAAE,EAAE,CAAC,GAAG,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,GAAI,CAAC;QACtH,IAAIqQ,eAAe,GAAG,EAAE;QACxB;QACAZ,WAAW,CAAC9Q,GAAG,CAAC,UAAU2R,WAAW,EAAE;UACnCZ,OAAO,GAAG,EAAE;UACZY,WAAW,CAAC3R,GAAG,CAAC,UAAU4M,MAAM,EAAE;YAC9B3I,QAAQ,GAAG2I,MAAM,CAAC,CAAC,CAAC;YACpB1I,SAAS,GAAG0I,MAAM,CAAC,CAAC,CAAC;YACrB,IAAIyE,KAAK,GAAG1S,iBAAiB,CAACsF,QAAQ,EAAEC,SAAS,EAAEzD,KAAK,CAAC+C,aAAa,EAAE/C,KAAK,CAACoC,YAAY,EAAEpC,KAAK,CAACL,SAAS,CAAC;YAC5GK,KAAK,CAAC6Q,YAAY,CAACD,KAAK,EAAEI,aAAa,CAAC;YACxCV,OAAO,CAAC7C,IAAI,CAAC;cACTmD,KAAK,EAAEA,KAAK;cAAEE,GAAG,EAAEtN,QAAQ;cAAEuN,GAAG,EAAEtN;YACtC,CAAC,CAAC;UACN,CAAC,CAAC;UACFwN,eAAe,CAACxD,IAAI,CAAC6C,OAAO,CAAC;QACjC,CAAC,CAAC;QACFW,eAAe,CAAC,UAAU,CAAC,GAAGlG,UAAU;QACxCkG,eAAe,CAAC,MAAM,CAAC,GAAGpG,IAAI;QAC9B,IAAI,CAACzI,YAAY,CAACkH,SAAS,CAACmE,IAAI,CAACwD,eAAe,CAAC;QACjD;MACJ,KAAK,OAAO;QACR,IAAIE,eAAe,GAAG,CAAC,CAACxT,iBAAiB,CAAC,IAAI,CAACyE,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,CAAC,GAClF,OAAQ,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAM,KAAK,QAAQ,GAC/D+P,QAAQ,CAAC,IAAI,CAACvO,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,EAAE,EAAE,CAAC,GAAG,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,GAAI,CAAC,IACjH,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACwD,YAAY,GAAG,CAAE;QACtD3K,QAAQ,GAAG6M,WAAW,CAAC,CAAC,CAAC;QACzB5M,SAAS,GAAG4M,WAAW,CAAC,CAAC,CAAC;QAC1B,IAAIO,KAAK,GAAG1S,iBAAiB,CAACsF,QAAQ,EAAEC,SAAS,EAAE,IAAI,CAACV,aAAa,EAAE,IAAI,CAACX,YAAY,EAAE,IAAI,CAACzC,SAAS,CAAC;QACzG,IAAI,CAACkR,YAAY,CAACD,KAAK,EAAEO,eAAe,CAAC;QACzC,IAAI,CAAC/O,YAAY,CAACkH,SAAS,CAACmE,IAAI,CAAC;UAC7BmD,KAAK,EAAEA,KAAK;UAAE/F,IAAI,EAAEA,IAAI;UAAEiG,GAAG,EAAEtN,QAAQ;UAAEuN,GAAG,EAAEtN,SAAS;UAAEgL,QAAQ,EAAE1D;QACvE,CAAC,CAAC;QACF;MACJ,KAAK,YAAY;QAAE;UACf,IAAIqG,YAAY,GAAG,CAAC,CAACzT,iBAAiB,CAAC,IAAI,CAACyE,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,CAAC,GAC/E,OAAQ,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAM,KAAK,QAAQ,GAC/D+P,QAAQ,CAAC,IAAI,CAACvO,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,EAAE,EAAE,CAAC,GAAG,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACc,MAAM,CAAC7K,KAAK,GAAI,CAAC,IACjH,IAAI,CAACwB,YAAY,CAACuI,aAAa,CAACwD,YAAY,GAAG,CAAE;UACtDmC,OAAO,GAAG,EAAE;UACZ;UACAD,WAAW,CAAC9Q,GAAG,CAAC,UAAU4M,MAAM,EAAE;YAC9B3I,QAAQ,GAAG2I,MAAM,CAAC,CAAC,CAAC;YACpB1I,SAAS,GAAG0I,MAAM,CAAC,CAAC,CAAC;YACrB,IAAIyE,KAAK,GAAG1S,iBAAiB,CAACsF,QAAQ,EAAEC,SAAS,EAAEzD,KAAK,CAAC+C,aAAa,EAAE/C,KAAK,CAACoC,YAAY,EAAEpC,KAAK,CAACL,SAAS,CAAC;YAC5GK,KAAK,CAAC6Q,YAAY,CAACD,KAAK,EAAEQ,YAAY,CAAC;YACvCd,OAAO,CAAC7C,IAAI,CAAC;cACTmD,KAAK,EAAEA,KAAK;cAAEE,GAAG,EAAEtN,QAAQ;cAAEuN,GAAG,EAAEtN;YACtC,CAAC,CAAC;UACN,CAAC,CAAC;UACF6M,OAAO,CAAC,UAAU,CAAC,GAAGvF,UAAU;UAChCuF,OAAO,CAAC,MAAM,CAAC,GAAGzF,IAAI;UACtB,IAAI,CAACzI,YAAY,CAACkH,SAAS,CAACmE,IAAI,CAAC6C,OAAO,CAAC;UACzC;QACJ;MACA,KAAK,MAAM;QACP,IAAI,CAAClO,YAAY,CAACkH,SAAS,CAACmE,IAAI,CAAC;UAC7BmD,KAAK,EAAElK,IAAI,CAAC,GAAG,CAAC;UAAEmE,IAAI,EAAEA,IAAI;UAAE4D,QAAQ,EAAE1D;QAC5C,CAAC,CAAC;QACF;IAAM;EAElB,CAAC;EACDzL,UAAU,CAACQ,SAAS,CAAC+Q,YAAY,GAAG,UAAUD,KAAK,EAAES,UAAU,EAAE;IAC7D,IAAI1T,iBAAiB,CAAC,IAAI,CAAC+M,UAAU,CAAC,EAAE;MACpC,IAAI,CAACA,UAAU,GAAG;QAAEjB,GAAG,EAAE;UAAE/H,CAAC,EAAEkP,KAAK,CAAClP,CAAC,GAAG2P,UAAU;UAAE1P,CAAC,EAAEiP,KAAK,CAACjP,CAAC,GAAG0P;QAAW,CAAC;QAAE3H,GAAG,EAAE;UAAEhI,CAAC,EAAEkP,KAAK,CAAClP,CAAC,GAAG2P,UAAU;UAAE1P,CAAC,EAAEiP,KAAK,CAACjP,CAAC,GAAG0P;QAAW;MAAE,CAAC;IAC9I,CAAC,MACI;MACD,IAAI,CAAC3G,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACgE,GAAG,CAAC,IAAI,CAACiB,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAAClP,CAAC,GAAG2P,UAAU,CAAC;MACzF,IAAI,CAAC3G,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACgE,GAAG,CAAC,IAAI,CAACiB,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAACjP,CAAC,GAAG0P,UAAU,CAAC;MACzF,IAAI,CAAC3G,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACiE,GAAG,CAAC,IAAI,CAACgB,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAAClP,CAAC,GAAG2P,UAAU,CAAC;MACzF,IAAI,CAAC3G,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACiE,GAAG,CAAC,IAAI,CAACgB,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAACjP,CAAC,GAAG0P,UAAU,CAAC;IAC7F;EACJ,CAAC;EACD/R,UAAU,CAACQ,SAAS,CAACkD,eAAe,GAAG,UAAUd,KAAK,EAAE;IACpD,IAAIoP,SAAS;IACb,IAAIC,SAAS,GAAG,CAAC;IACjB,IAAIC,MAAM,GAAG,EAAE;IACf,IAAIC,GAAG,GAAG,KAAK;IACf,IAAIC,MAAM,GAAG,IAAI,CAAC/R,SAAS,CAACiC,aAAa;IACzC,IAAI+P,OAAO,GAAG,IAAItT,IAAI,CAAC,IAAI,CAACsB,SAAS,CAACS,WAAW,CAACQ,KAAK,EAAE,IAAI,CAACjB,SAAS,CAACS,WAAW,CAACS,MAAM,GAAG,CAAC,CAAC;IAC/F,IAAI+Q,SAAS;IACb,IAAIC,QAAQ;IACZ,IAAIH,MAAM,EAAE;MACR,IAAII,KAAK,GAAG5T,iBAAiB,CAACwT,MAAM,CAAClO,QAAQ,CAACiG,GAAG,EAAEiI,MAAM,CAACjO,SAAS,CAACgG,GAAG,EAAE,IAAI,EAAEvH,KAAK,EAAE,IAAI,CAACvC,SAAS,CAAC;MACrG,IAAIoS,GAAG,GAAG7T,iBAAiB,CAACwT,MAAM,CAAClO,QAAQ,CAACkG,GAAG,EAAEgI,MAAM,CAACjO,SAAS,CAACiG,GAAG,EAAE,IAAI,EAAExH,KAAK,EAAE,IAAI,CAACvC,SAAS,CAAC;MACnGiS,SAAS,GAAGG,GAAG,CAACpQ,CAAC,GAAGmQ,KAAK,CAACnQ,CAAC;MAC3BkQ,QAAQ,GAAGE,GAAG,CAACrQ,CAAC,GAAGoQ,KAAK,CAACpQ,CAAC;MAC1B,IAAIkQ,SAAS,KAAK,CAAC,IAAIC,QAAQ,KAAK,CAAC,EAAE;QACnCA,QAAQ,GAAGF,OAAO,CAAC/Q,KAAK,GAAG,CAAC;QAC5BgR,SAAS,GAAGD,OAAO,CAAC9Q,MAAM;MAC9B;IACJ,CAAC,MACI;MACD+Q,SAAS,GAAGC,QAAQ,GAAG,GAAG;IAC9B;IACA,IAAID,SAAS,GAAGD,OAAO,CAAC9Q,MAAM,EAAE;MAC5ByQ,SAAS,GAAG/G,UAAU,CAAC9E,IAAI,CAACuM,GAAG,CAAC1H,MAAM,CAACqH,OAAO,CAAC9Q,MAAM,GAAGyJ,MAAM,CAACsH,SAAS,CAAC5E,QAAQ,EAAE,GAAGyE,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAACzE,QAAQ,EAAE,CAACiF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GACtHT,MAAM;IAChB,CAAC,MACI;MACDF,SAAS,GAAGK,OAAO,CAAC9Q,MAAM,GAAG+Q,SAAS;IAC1C;IACA,IAAIC,QAAQ,GAAGF,OAAO,CAAC/Q,KAAK,EAAE;MAC1B2Q,SAAS,GAAGhH,UAAU,CAAC9E,IAAI,CAACuM,GAAG,CAAC1H,MAAM,CAACqH,OAAO,CAAC/Q,KAAK,GAAG0J,MAAM,CAACuH,QAAQ,CAAC7E,QAAQ,EAAE,GAAGyE,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAACzE,QAAQ,EAAE,CAACiF,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GACpHT,MAAM;IAChB,CAAC,MACI;MACDD,SAAS,GAAGI,OAAO,CAAC/Q,KAAK,GAAGiR,QAAQ;IACxC;IACA,OAAQpM,IAAI,CAACgE,GAAG,CAAC8H,SAAS,EAAED,SAAS,CAAC;EAC1C,CAAC;EACDhS,UAAU,CAACQ,SAAS,CAACsG,sBAAsB,GAAG,UAAU8L,YAAY,EAAE/P,KAAK,EAAE;IACzE,IAAIgQ,SAAS;IACb,IAAI,CAACxS,SAAS,CAACyS,aAAa,GAAG,OAAO;IACtC,IAAI,CAACzU,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACkC,iBAAiB,CAAC,EAAE;MACtD,IAAIwQ,QAAQ,GAAG,IAAI,CAACjQ,YAAY,CAACkQ,iBAAiB;MAClD,IAAIC,OAAO,GAAGF,QAAQ,KAAK,CAAC,IAAI1U,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACqJ,UAAU,CAAC;MAC5E,IAAI,CAACrJ,SAAS,CAAC6S,kBAAkB,GAAG,IAAI,CAAC7S,SAAS,CAAC8S,kBAAkB;MACrE;MACA,IAAIC,SAAS,GAAG,KAAK,CAAC;MACtB,IAAI,IAAI,CAAC/S,SAAS,CAACuD,YAAY,CAACC,UAAU,GAAG,CAAC,IAAI,CAACxF,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACqJ,UAAU,CAAC,EAAE;QAC7F0J,SAAS,GAAG3T,gBAAgB,CAAC,IAAI,CAACY,SAAS,EAAE,IAAI,CAACyC,YAAY,EAAEmQ,OAAO,CAAC;MAC5E,CAAC,MACI;QACDG,SAAS,GAAG/T,YAAY,CAAC,IAAI,CAACgB,SAAS,EAAE,IAAI,CAACyC,YAAY,EAAEmQ,OAAO,CAAC;MACxE;MACA,IAAIrJ,KAAK,GAAG,IAAI,CAACvJ,SAAS,CAACsJ,aAAa,GAAGyJ,SAAS,CAAC,OAAO,CAAC;MAC7D,IAAIC,UAAU,GAAG,IAAI,CAAChT,SAAS,CAACiT,aAAa,GAAGF,SAAS,CAAC,UAAU,CAAC;MACrE,IAAI,CAAC/S,SAAS,CAAC6S,kBAAkB,GAAG,IAAI,CAAC7S,SAAS,CAACkT,cAAc,GAAGF,UAAU;MAC9E,IAAI,CAAChT,SAAS,CAACmT,SAAS,GAAG,IAAI,CAACnT,SAAS,CAACuJ,KAAK,GAAGA,KAAK;MACvD,KAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+H,YAAY,CAACa,iBAAiB,EAAE5I,CAAC,EAAE,EAAE;QACrDgI,SAAS,GAAGD,YAAY,CAACc,UAAU,CAAC7I,CAAC,CAAC;QACtC,IAAI,EAAEgI,SAAS,CAAC5R,EAAE,CAACkG,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,IAC7C,EAAE0L,SAAS,CAAC5R,EAAE,CAACkG,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAE,IAC9C,EAAE0L,SAAS,CAAC5R,EAAE,CAACkG,OAAO,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC,CAAE,EAAE;UACzD,IAAI+G,SAAS,GAAG,SAAS,GAAGtE,KAAK,GAAG,KAAK,GACnC,aAAa,GAAGyJ,UAAU,CAACjR,CAAC,GAAG,GAAG,GAAGiR,UAAU,CAAChR,CAAC,GAAG,KAAK;UAC/DwQ,SAAS,CAACxD,YAAY,CAAC,WAAW,EAAEnB,SAAS,CAAC;UAC9C,IAAI6E,QAAQ,GAAG,CAAC,IAAI,CAAC1U,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACqJ,UAAU,CAAC,EAAE;YAC/D,IAAI,IAAI,CAACrJ,SAAS,CAACuD,YAAY,CAACC,UAAU,GAAG,CAAC,EAAE;cAC5CuP,SAAS,GAAG3T,gBAAgB,CAAC,IAAI,CAACY,SAAS,EAAE,IAAI,CAACyC,YAAY,CAAC;YACnE,CAAC,MACI;cACDsQ,SAAS,GAAG/T,YAAY,CAAC,IAAI,CAACgB,SAAS,EAAE,IAAI,CAACyC,YAAY,CAAC;YAC/D;YACA,IAAI,CAACzC,SAAS,CAACuJ,KAAK,GAAGwJ,SAAS,CAAC,OAAO,CAAC;YACzC,IAAI,CAAC/S,SAAS,CAAC8S,kBAAkB,GAAG,IAAI,CAAC9S,SAAS,CAACkT,cAAc,GAAGH,SAAS,CAAC,UAAU,CAAC;UAC7F;QACJ;MACJ;IACJ,CAAC,MACI,IAAI,IAAI,CAAC/S,SAAS,CAACa,SAAS,IAAI,CAAC7C,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACuJ,KAAK,CAAC,EAAE;MAC3E,KAAK,IAAIwF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwD,YAAY,CAACa,iBAAiB,EAAErE,CAAC,EAAE,EAAE;QACrDyD,SAAS,GAAGD,YAAY,CAACc,UAAU,CAACtE,CAAC,CAAC;QACtC,IAAI,EAAEyD,SAAS,CAAC5R,EAAE,CAACkG,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAAC,IAC7C,EAAE0L,SAAS,CAAC5R,EAAE,CAACkG,OAAO,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAE,IAC9C,EAAE0L,SAAS,CAAC5R,EAAE,CAACkG,OAAO,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC,CAAE,IACtD,EAAE0L,SAAS,CAAC5R,EAAE,CAACkG,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAE,EAAE;UAC/C,IAAI+G,SAAS,GAAG,SAAS,GAAG,IAAI,CAAC7N,SAAS,CAACuJ,KAAK,GAAG,KAAK,GAAG,aAAa,GAAG,IAAI,CAACvJ,SAAS,CAACkT,cAAc,CAACnR,CAAC,GACpG,GAAG,GAAG,IAAI,CAAC/B,SAAS,CAACkT,cAAc,CAAClR,CAAC,GAAG,KAAK;UACnDwQ,SAAS,CAACxD,YAAY,CAAC,WAAW,EAAEnB,SAAS,CAAC;QAClD;MACJ;IACJ;EACJ,CAAC;EACD;EACAlO,UAAU,CAACQ,SAAS,CAAC6J,mBAAmB,GAAG,UAAUL,SAAS,EAAE;IAC5D,IAAItJ,KAAK,GAAG,IAAI;IAChB;IACA+B,KAAK,CAACjC,SAAS,CAACkC,OAAO,CAACC,IAAI,CAACqH,SAAS,EAAE,UAAU2J,GAAG,EAAE9Q,KAAK,EAAE;MAC1D,IAAI,CAACxE,iBAAiB,CAACsV,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAACtV,iBAAiB,CAACsV,GAAG,CAAC,aAAa,CAAC,CAAC,EAAE;QAC/E,IAAIpI,IAAI,GAAG,CAAClN,iBAAiB,CAACsV,GAAG,CAAC,UAAU,CAAC,CAAC,GAAGA,GAAG,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,GAAGA,GAAG,CAAC,MAAM,CAAC;QACtF;QACA,IAAI5C,WAAW,GAAG,CAAC1S,iBAAiB,CAACsV,GAAG,CAAC,UAAU,CAAC,CAAC,GAAGA,GAAG,CAAC,UAAU,CAAC,CAAC,aAAa,CAAC,GAAGA,GAAG,CAAC,aAAa,CAAC;QAC3G,QAAQpI,IAAI,CAAC0F,WAAW,EAAE;UACtB,KAAK,SAAS;YACV;YACAvQ,KAAK,CAACkT,gBAAgB,CAAC7C,WAAW,CAAC,CAAC,CAAC,CAAC;YACtC;UACJ,KAAK,cAAc;YACf;YACAA,WAAW,CAAC9Q,GAAG,CAAC,UAAUqR,KAAK,EAAEzO,KAAK,EAAE;cACpCnC,KAAK,CAACkT,gBAAgB,CAACtC,KAAK,CAAC,CAAC,CAAC,CAAC;YACpC,CAAC,CAAC;YACF;UACJ,KAAK,iBAAiB;YAClB;YACAP,WAAW,CAAC9Q,GAAG,CAAC,UAAU4T,UAAU,EAAEhR,KAAK,EAAE;cACzCgR,UAAU,CAAC5T,GAAG,CAAC,UAAUqR,KAAK,EAAEzO,KAAK,EAAE;gBACnCnC,KAAK,CAACkT,gBAAgB,CAACtC,KAAK,EAAE,iBAAiB,EAAEzO,KAAK,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC;cAChF,CAAC,CAAC;YACN,CAAC,CAAC;YACF;UACJ,KAAK,YAAY;YACb;YACAkO,WAAW,CAAC9Q,GAAG,CAAC,UAAUqR,KAAK,EAAEzO,KAAK,EAAE;cACpCnC,KAAK,CAACkT,gBAAgB,CAACtC,KAAK,EAAE,YAAY,EAAEzO,KAAK,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC;YAC3E,CAAC,CAAC;YACF;UACJ,KAAK,OAAO;YACRnC,KAAK,CAACkT,gBAAgB,CAAC7C,WAAW,EAAE,OAAO,CAAC;YAC5C;UACJ,KAAK,YAAY;YACbA,WAAW,CAAC9Q,GAAG,CAAC,UAAUqR,KAAK,EAAEzO,KAAK,EAAE;cACpCnC,KAAK,CAACkT,gBAAgB,CAACtC,KAAK,EAAE,YAAY,EAAEzO,KAAK,KAAK,CAAC,GAAG,IAAI,GAAG,KAAK,CAAC;YAC3E,CAAC,CAAC;YACF;QAAM;MAElB;IACJ,CAAC,CAAC;EACN,CAAC;EACD;EACA7C,UAAU,CAACQ,SAAS,CAAC0Q,mBAAmB,GAAG,UAAUH,WAAW,EAAE3J,IAAI,EAAEqE,UAAU,EAAE;IAChF,IAAI/K,KAAK,GAAG,IAAI;IAChB;IACA,IAAIsQ,OAAO,GAAG,EAAE;IAChB,IAAIoB,MAAM,GAAG,IAAI,CAAC/R,SAAS,CAACiC,aAAa;IACzC;IACAyO,WAAW,CAAC9Q,GAAG,CAAC,UAAU6T,YAAY,EAAEjR,KAAK,EAAE;MAC3C,IAAIqB,QAAQ,GAAG4P,YAAY,CAAC,CAAC,CAAC;MAC9B,IAAI3P,SAAS,GAAG2P,YAAY,CAAC,CAAC,CAAC;MAC/B,IAAK3P,SAAS,IAAIiO,MAAM,CAACjO,SAAS,CAACgG,GAAG,IAAIhG,SAAS,IAAIiO,MAAM,CAACjO,SAAS,CAACiG,GAAG,IACnElG,QAAQ,IAAIkO,MAAM,CAAClO,QAAQ,CAACiG,GAAG,IAAIjG,QAAQ,IAAIkO,MAAM,CAAClO,QAAQ,CAACkG,GAAI,EAAE;QACzE,IAAIkH,KAAK,GAAG1S,iBAAiB,CAACsF,QAAQ,EAAEC,SAAS,EAAEzD,KAAK,CAAC+C,aAAa,EAAE/C,KAAK,CAACoC,YAAY,EAAEpC,KAAK,CAACL,SAAS,CAAC;QAC5G,IAAIhC,iBAAiB,CAACqC,KAAK,CAAC0K,UAAU,CAAC,EAAE;UACrC1K,KAAK,CAAC0K,UAAU,GAAG;YAAEjB,GAAG,EAAE;cAAE/H,CAAC,EAAEkP,KAAK,CAAClP,CAAC;cAAEC,CAAC,EAAEiP,KAAK,CAACjP;YAAE,CAAC;YAAE+H,GAAG,EAAE;cAAEhI,CAAC,EAAEkP,KAAK,CAAClP,CAAC;cAAEC,CAAC,EAAEiP,KAAK,CAACjP;YAAE;UAAE,CAAC;QAC3F,CAAC,MACI;UACD3B,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACgE,GAAG,CAACzJ,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAAClP,CAAC,CAAC;UAC9E1B,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACgE,GAAG,CAACzJ,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAACjP,CAAC,CAAC;UAC9E3B,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACiE,GAAG,CAAC1J,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAAClP,CAAC,CAAC;UAC9E1B,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,GAAGjF,IAAI,CAACiE,GAAG,CAAC1J,KAAK,CAAC0K,UAAU,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAEkG,KAAK,CAACjP,CAAC,CAAC;QAClF;QACA2O,OAAO,CAAC7C,IAAI,CAAC;UACTmD,KAAK,EAAEA,KAAK;UACZE,GAAG,EAAEtN,QAAQ;UACbuN,GAAG,EAAEtN;QACT,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;IACF,OAAO6M,OAAO;EAClB,CAAC;EACD;EACAhR,UAAU,CAACQ,SAAS,CAACoT,gBAAgB,GAAG,UAAU7C,WAAW,EAAExF,IAAI,EAAEwI,WAAW,EAAE;IAC9E,IAAIrT,KAAK,GAAG,IAAI;IAChB,IAAK6K,IAAI,KAAK,YAAY,IAAIA,IAAI,KAAK,iBAAiB,IAAMA,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,YAAa,EAAE;MACtG;MACA9I,KAAK,CAACjC,SAAS,CAACkC,OAAO,CAACC,IAAI,CAACoO,WAAW,EAAE,UAAUiD,aAAa,EAAE;QAC/D,IAAI3V,iBAAiB,CAACqC,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC,EAAE;UAClD5B,KAAK,CAACL,SAAS,CAACiC,aAAa,GAAG,IAAI5D,WAAW,CAAC;YAAEyL,GAAG,EAAE6J,aAAa,CAAC,CAAC,CAAC;YAAE5J,GAAG,EAAE4J,aAAa,CAAC,CAAC;UAAE,CAAC,EAAE;YAAE7J,GAAG,EAAE6J,aAAa,CAAC,CAAC,CAAC;YAAE5J,GAAG,EAAE4J,aAAa,CAAC,CAAC;UAAE,CAAC,CAAC;QACvJ,CAAC,MACI;UACDtT,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACiG,GAAG,GAAGhE,IAAI,CAACgE,GAAG,CAACzJ,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACiG,GAAG,EAAE6J,aAAa,CAAC,CAAC,CAAC,CAAC;UACnHtT,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACkG,GAAG,GAAGjE,IAAI,CAACiE,GAAG,CAAC1J,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACkG,GAAG,EAAE4J,aAAa,CAAC,CAAC,CAAC,CAAC;UACnHtT,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACgG,GAAG,GAAGhE,IAAI,CAACgE,GAAG,CAACzJ,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACgG,GAAG,EAAE6J,aAAa,CAAC,CAAC,CAAC,CAAC;UACrHtT,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACiG,GAAG,GAAGjE,IAAI,CAACiE,GAAG,CAAC1J,KAAK,CAACL,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACiG,GAAG,EAAE4J,aAAa,CAAC,CAAC,CAAC,CAAC;QACzH;MACJ,CAAC,CAAC;IACN,CAAC,MACI;MACD,IAAI,CAACD,WAAW,IAAIxI,IAAI,KAAK,OAAO,KAAKlN,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACiC,aAAa,CAAC,EAAE;QACtF,IAAI,CAACjC,SAAS,CAACiC,aAAa,GAAG,IAAI5D,WAAW,CAAC;UAAEyL,GAAG,EAAE4G,WAAW,CAAC,CAAC,CAAC;UAAE3G,GAAG,EAAE2G,WAAW,CAAC,CAAC;QAAE,CAAC,EAAE;UAAE5G,GAAG,EAAE4G,WAAW,CAAC,CAAC,CAAC;UAAE3G,GAAG,EAAE2G,WAAW,CAAC,CAAC;QAAE,CAAC,CAAC;MAC9I,CAAC,MACI;QACD,IAAI,CAAC1Q,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACiG,GAAG,GAAGhE,IAAI,CAACgE,GAAG,CAAC,IAAI,CAAC9J,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACiG,GAAG,EAAE4G,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/G,IAAI,CAAC1Q,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACkG,GAAG,GAAGjE,IAAI,CAACiE,GAAG,CAAC,IAAI,CAAC/J,SAAS,CAACiC,aAAa,CAAC4B,QAAQ,CAACkG,GAAG,EAAE2G,WAAW,CAAC,CAAC,CAAC,CAAC;QAC/G,IAAI,CAAC1Q,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACgG,GAAG,GAAGhE,IAAI,CAACgE,GAAG,CAAC,IAAI,CAAC9J,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACgG,GAAG,EAAE4G,WAAW,CAAC,CAAC,CAAC,CAAC;QACjH,IAAI,CAAC1Q,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACiG,GAAG,GAAGjE,IAAI,CAACiE,GAAG,CAAC,IAAI,CAAC/J,SAAS,CAACiC,aAAa,CAAC6B,SAAS,CAACiG,GAAG,EAAE2G,WAAW,CAAC,CAAC,CAAC,CAAC;MACrH;IACJ;EACJ,CAAC;EACD/Q,UAAU,CAACQ,SAAS,CAACiG,aAAa,GAAG,UAAUnB,SAAS,EAAEC,kBAAkB,EAAE0O,QAAQ,EAAEzQ,IAAI,EAAEN,QAAQ,EAAE;IACpG,IAAIgR,QAAQ,GAAG,IAAI,CAAC7T,SAAS,CAAC8T,MAAM;IACpC,IAAIC,IAAI,GAAG,IAAI,CAAC/T,SAAS,CAAC0F,aAAa;IACvC,IAAI,CAACsO,KAAK,GAAG,EAAE;IACf,IAAIC,MAAM;IACV,IAAIC,MAAM;IACVD,MAAM,GAAGC,MAAM,GAAGpO,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEjB,SAAS,CAAC;IACxC,IAAIkP,KAAK,GAAG,CAAC;IACb,IAAIC,MAAM,GAAG,CAAC;IACd,IAAKlP,kBAAkB,CAACnD,CAAC,GAAIkS,MAAM,GAAG,GAAI,GAAIF,IAAI,CAAC9S,KAAK,EAAE;MACtDkT,KAAK,GAAGjP,kBAAkB,CAACnD,CAAC,GAAG,CAAC,GAAG+D,IAAI,CAACuO,IAAI,CAACnP,kBAAkB,CAACnD,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC;MAC5EqS,MAAM,GAAKlP,kBAAkB,CAACnD,CAAC,GAAGkS,MAAM,GAAG,GAAG,GAAIF,IAAI,CAAC9S,KAAK,GACxD6E,IAAI,CAACuO,IAAI,CAAC,CAACN,IAAI,CAAC9S,KAAK,IAAIiE,kBAAkB,CAACnD,CAAC,GAAGkS,MAAM,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC;IACjF;IACAA,MAAM,IAAIE,KAAK,GAAGC,MAAM;IACxB,IAAIR,QAAQ,KAAK,KAAK,EAAE;MACpBK,MAAM,GAAI,IAAI,CAAClU,mBAAmB,IAAIkU,MAAM,GAAI,IAAI,CAAClU,mBAAmB,GAAGkU,MAAM;MACjF,IAAI,CAACnU,aAAa,GAAG,KAAK;IAC9B,CAAC,MACI;MACD,IAAI,CAACC,mBAAmB,GAAGkU,MAAM;MACjC,IAAI,CAACnU,aAAa,GAAG,IAAI;IAC7B;IACA,IAAIwU,SAAS,GAAG,IAAI,CAACtU,SAAS,CAACwB,MAAM,CAAC,IAAI,CAACxB,SAAS,CAACyB,cAAc,CAAC;IACpE,IAAI,CAACmG,WAAW,GAAG0M,SAAS,CAAC1M,WAAW;IACxC,IAAI2M,IAAI,GAAGzO,IAAI,CAACgE,GAAG,CAACoK,MAAM,EAAG,CAAC,CAAChP,kBAAkB,CAAClD,CAAC,GAAG+R,IAAI,CAAC7S,MAAM,IAAI,GAAG,GAAI,CAAC,CAAC;IAC9E,IAAIsT,IAAI,GAAG1O,IAAI,CAACgE,GAAG,CAACmK,MAAM,EAAG,CAAC,CAAC/O,kBAAkB,CAACnD,CAAC,GAAGgS,IAAI,CAAC9S,KAAK,GAAImT,MAAM,GAAG,GAAI,IAAI,GAAG,GAAI,CAAC,CAAC;IAC9F,IAAIK,MAAM,GAAI,EAAGvP,kBAAkB,CAACnD,CAAC,GAAIoS,KAAK,GAAG,GAAI,GAAI,GAAG,CAAC,GAAG,GAAI;IACpE,IAAIO,MAAM,GAAI,EAAExP,kBAAkB,CAAClD,CAAC,GAAG,GAAG,CAAC,GAAG,GAAI;IAClDmB,IAAI,GAAGA,IAAI,IAAI,IAAI,CAACA,IAAI,IAAI,IAAI,CAACnD,SAAS,CAAC,SAAS,CAAC;IACrD,KAAK,IAAIwK,CAAC,GAAG1E,IAAI,CAAC6O,KAAK,CAACF,MAAM,CAAC,EAAEjK,CAAC,GAAG1E,IAAI,CAAC6O,KAAK,CAACH,IAAI,CAAC,EAAEhK,CAAC,EAAE,EAAE;MACxD,KAAK,IAAIuE,CAAC,GAAGjJ,IAAI,CAAC6O,KAAK,CAACD,MAAM,CAAC,EAAE3F,CAAC,GAAGjJ,IAAI,CAAC6O,KAAK,CAACJ,IAAI,CAAC,EAAExF,CAAC,EAAE,EAAE;QACxD,IAAIhN,CAAC,GAAG,GAAG,GAAGyI,CAAC,GAAGtF,kBAAkB,CAACnD,CAAC;QACtC,IAAIC,CAAC,GAAG,GAAG,GAAG+M,CAAC,GAAG7J,kBAAkB,CAAClD,CAAC;QACtC,IAAID,CAAC,GAAG,CAAC,GAAG,IAAIA,CAAC,IAAIgS,IAAI,CAAC9S,KAAK,IAAIe,CAAC,GAAG,CAAC,GAAG,IAAIA,CAAC,GAAG+R,IAAI,CAAC7S,MAAM,EAAE;UAC5D,IAAI6N,CAAC,IAAI,CAAC,EAAE;YACR,IAAI6F,KAAK,GAAGpK,CAAC;YACb,IAAIA,CAAC,GAAG,CAAC,EAAE;cACPoK,KAAK,GAAIA,KAAK,GAAGV,MAAM,GAAIA,MAAM;YACrC;YACA,IAAIW,IAAI,GAAG,IAAIvV,IAAI,CAACsV,KAAK,GAAGV,MAAM,EAAEnF,CAAC,CAAC;YACtC8F,IAAI,CAACC,IAAI,GAAG/S,CAAC;YACb8S,IAAI,CAACE,GAAG,GAAG/S,CAAC;YACZ,IAAIsS,SAAS,CAAC5S,SAAS,KAAK,MAAM,IAAKyB,IAAI,IAAI,CAACnF,iBAAiB,CAACsW,SAAS,CAAC1M,WAAW,CAAC,IAAI0M,SAAS,CAAC1M,WAAW,KAAK,EAAG,EAAE;cACvH,IAAIG,GAAG,GAAGuM,SAAS,CAACvM,GAAG;cACvB8M,IAAI,CAACG,GAAG,GAAG7R,IAAI,CAAC8R,UAAU,CAACJ,IAAI,EAAE9M,GAAG,EAAEuM,SAAS,CAAClM,WAAW,EAAEyL,QAAQ,EAAE1Q,IAAI,CAAC0F,QAAQ,EAAE1F,IAAI,CAAC2F,UAAU,CAAC;YAC1G,CAAC,MACI;cACD+L,IAAI,CAACG,GAAG,GAAG,IAAI,CAACpN,WAAW,CAACsN,OAAO,CAAC,OAAO,EAAEjQ,SAAS,CAACoI,QAAQ,EAAE,CAAC,CAAC6H,OAAO,CAAC,OAAO,EAAEL,IAAI,CAAC9S,CAAC,CAACsL,QAAQ,EAAE,CAAC,CACjG6H,OAAO,CAAC,OAAO,EAAEL,IAAI,CAAC7S,CAAC,CAACqL,QAAQ,EAAE,CAAC;YAC5C;YACA,IAAI,CAAC2G,KAAK,CAAClG,IAAI,CAAC+G,IAAI,CAAC;UACzB;QACJ;MACJ;IACJ;IACA,IAAI,CAAC7W,iBAAiB,CAAC4V,QAAQ,CAAC,EAAE;MAC9B,IAAIA,QAAQ,CAAC9M,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;QAC/B,IAAI,CAACqO,cAAc,GAAI,IAAI,CAACnV,SAAS,CAAC0F,aAAa,CAACzE,KAAK,GAAG,CAAC,GAAI4B,QAAQ,CAACd,CAAC,GAAG,EAAE;QAChF,IAAI,CAACqT,cAAc,GAAG,CAACvS,QAAQ,CAACb,CAAC;MACrC,CAAC,MACI;QACD,IAAI,CAACmT,cAAc,GAAG,CAAC,EAAE;QACzB,IAAI,CAACC,cAAc,GAAG,EAAE,IAAI,CAACpV,SAAS,CAAC0F,aAAa,CAACxE,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE;MAChF;IACJ;IACA,IAAImU,SAAS,GAAGpX,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC+V,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC;IAChD,KAAK,IAAIsB,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACvV,SAAS,CAACwB,MAAM,EAAE8T,EAAE,GAAGC,EAAE,CAACvN,MAAM,EAAEsN,EAAE,EAAE,EAAE;MAC/D,IAAI/S,KAAK,GAAGgT,EAAE,CAACD,EAAE,CAAC;MAClB,IAAI,EAAE/S,KAAK,CAAC2I,IAAI,KAAK,UAAU,IAAI3I,KAAK,CAACkF,OAAO,CAAC,EAAE;QAC/C;MACJ;MACA,IAAKlF,KAAK,CAACb,SAAS,KAAK,UAAU,IAAIa,KAAK,CAACb,SAAS,KAAK,iBAAiB,IAAMa,KAAK,CAACb,SAAS,KAAK,UAAU,IAC5G1D,iBAAiB,CAACuE,KAAK,CAACsF,SAAS,CAAC,IAAI,CAAC7J,iBAAiB,CAACuE,KAAK,CAACqF,WAAW,CAAC,IAAIrF,KAAK,CAACqF,WAAW,KAAK,EAAG,EAAE;QAC1G,KAAK,IAAI4N,EAAE,GAAG,CAAC,EAAEC,WAAW,GAAGJ,SAAS,EAAEG,EAAE,GAAGC,WAAW,CAACzN,MAAM,EAAEwN,EAAE,EAAE,EAAE;UACrE,IAAIE,QAAQ,GAAGD,WAAW,CAACD,EAAE,CAAC;UAC9B,IAAIG,OAAO,GAAG1X,MAAM,CAAC,CAAC,CAAC,EAAEyX,QAAQ,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC;UAC5C,IAAInT,KAAK,CAACb,SAAS,KAAK,MAAM,EAAE;YAC5ByB,IAAI,GAAG,IAAI5D,OAAO,CAAC,IAAI,CAACS,SAAS,CAAC;YAClC2V,OAAO,CAACX,GAAG,GAAG7R,IAAI,CAAC8R,UAAU,CAACU,OAAO,EAAEpT,KAAK,CAACwF,GAAG,EAAExF,KAAK,CAAC6F,WAAW,EAAEyL,QAAQ,EAAE1Q,IAAI,CAAC0F,QAAQ,EAAE1F,IAAI,CAAC2F,UAAU,CAAC;UAClH,CAAC,MACI;YACD6M,OAAO,CAACX,GAAG,GAAGzS,KAAK,CAACqF,WAAW,CAACsN,OAAO,CAAC,OAAO,EAAEjQ,SAAS,CAACoI,QAAQ,EAAE,CAAC,CAAC6H,OAAO,CAAC,OAAO,EAAEQ,QAAQ,CAAC3T,CAAC,CAACsL,QAAQ,EAAE,CAAC,CACzG6H,OAAO,CAAC,OAAO,EAAEQ,QAAQ,CAAC1T,CAAC,CAACqL,QAAQ,EAAE,CAAC;UAChD;UACA,IAAI,CAAC2G,KAAK,CAAClG,IAAI,CAAC6H,OAAO,CAAC;QAC5B;MACJ;IACJ;IACA,IAAI,IAAI,CAAC3V,SAAS,CAACsJ,aAAa,KAAK,IAAI,CAACtJ,SAAS,CAACuJ,KAAK,IAAI,IAAI,CAACvJ,SAAS,CAACgF,OAAO,EAAE;MACjF,IAAI,CAAC4Q,YAAY,CAAChC,QAAQ,EAAE,IAAI,CAACuB,cAAc,EAAE,IAAI,CAACC,cAAc,CAAC;IACzE;EACJ,CAAC;EACDzV,UAAU,CAACQ,SAAS,CAACyV,YAAY,GAAG,UAAU1K,IAAI,EAAEnJ,CAAC,EAAEC,CAAC,EAAE;IACtD,IAAI3B,KAAK,GAAG,IAAI;IAChB,IAAIM,OAAO,GAAGsI,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClJ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,CAAC;IACjF,IAAIiV,QAAQ,GAAG5M,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClJ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,QAAQ,CAAC;IAC5E,IAAIkV,OAAO;IACX,IAAI,CAAC9X,iBAAiB,CAACkN,IAAI,CAAC,IAAIA,IAAI,KAAK,KAAK,EAAE;MAC5C,IAAI,CAAC6K,aAAa,CAAC7K,IAAI,EAAEnJ,CAAC,EAAEC,CAAC,CAAC;MAC9B8T,OAAO,GAAG,IAAI,CAAC9V,SAAS,CAACO,gBAAgB,CAAC,CAAC,CAAC,CAACoS,iBAAiB;IAClE,CAAC,MACI;MACDmD,OAAO,GAAG,CAAC;IACf;IACA,IAAI,IAAI,CAAC9V,SAAS,CAACwB,MAAM,CAAC,IAAI,CAACxB,SAAS,CAACyB,cAAc,CAAC,CAACC,SAAS,KAAK,iBAAiB,EAAE;MACtF,IAAI,CAACsU,eAAe,CAAC,IAAI,CAAChW,SAAS,CAACwB,MAAM,CAAC,CAAC,CAAC,CAACuG,GAAG,EAAE,IAAI,CAAC/H,SAAS,CAACiW,aAAa,CAAC;IACpF,CAAC,MACI;MACDC,UAAU,CAAC,YAAY;QACnB,IAAIvV,OAAO,EAAE;UACTA,OAAO,CAACsP,KAAK,CAACkG,MAAM,GAAG,GAAG;QAC9B;QACA,IAAIN,QAAQ,EAAE;UACVA,QAAQ,CAAC5F,KAAK,CAACkG,MAAM,GAAG,GAAG;QAC/B;QACA,IAAIC,cAAc;QAClB,IAAI,CAACnN,QAAQ,CAACC,cAAc,CAAC7I,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,iBAAiB,CAAC,IAAID,OAAO,EAAE;UACrFyV,cAAc,GAAGlY,aAAa,CAAC,KAAK,EAAE;YAAE0C,EAAE,EAAEP,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG;UAAkB,CAAC,CAAC;UAC7FD,OAAO,CAACU,WAAW,CAAC+U,cAAc,CAAC;QACvC,CAAC,MACI;UACD,IAAIlL,IAAI,KAAK,KAAK,IAAI2K,QAAQ,IAAIlV,OAAO,EAAE;YACvCkV,QAAQ,CAACxU,WAAW,CAACV,OAAO,CAAC0V,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzC,IAAI,CAAChW,KAAK,CAACL,SAAS,CAACsW,UAAU,IAAI,CAACtY,iBAAiB,CAACiL,QAAQ,CAACC,cAAc,CAAC7I,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,iBAAiB,CAAC,CAAC,EAAE;cAC5HqI,QAAQ,CAACC,cAAc,CAAC7I,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,iBAAiB,CAAC,CAACA,EAAE,GACtEP,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,qBAAqB;YAC1D;YACAwV,cAAc,GAAGlY,aAAa,CAAC,KAAK,EAAE;cAAE0C,EAAE,EAAEP,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG;YAAkB,CAAC,CAAC;YAC7FD,OAAO,CAACU,WAAW,CAAC+U,cAAc,CAAC;UACvC,CAAC,MACI;YACDA,cAAc,GAAGzV,OAAO,GAAGA,OAAO,CAAC0V,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI;UACzD;QACJ;QACA,IAAIzV,EAAE,GAAG,CAAC;QACV,IAAI2V,OAAO,GAAG,UAAU1B,IAAI,EAAE;UAC1B,IAAI2B,UAAU,GAAGtY,aAAa,CAAC,KAAK,CAAC;UACrCsY,UAAU,CAACxH,YAAY,CAAC,QAAQ,EAAE,OAAO,CAAC;UAC1CwH,UAAU,CAACxH,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC;UACzCwH,UAAU,CAACxH,YAAY,CAAC,KAAK,EAAE6F,IAAI,CAACG,GAAG,CAAC;UACxCwB,UAAU,CAACxH,YAAY,CAAC,KAAK,EAAE3O,KAAK,CAACL,SAAS,CAACyW,iBAAiB,CAAC,eAAe,CAAC,CAAC;UAClF,IAAIC,KAAK,GAAGrW,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE;UACtC4V,UAAU,CAACG,MAAM,GAAG,YAAY;YAC5B,IAAI1N,QAAQ,CAACC,cAAc,CAACwN,KAAK,GAAG,QAAQ,GAAG9V,EAAE,CAAC,IAAIsK,IAAI,KAAK,KAAK,EAAE;cAClEvM,aAAa,CAAC+X,KAAK,GAAG,QAAQ,GAAG9V,EAAE,CAAC;YACxC;YACA,IAAIgW,KAAK,GAAG1Y,aAAa,CAAC,KAAK,EAAE;cAAE0C,EAAE,EAAE8V,KAAK,GAAG,QAAQ,GAAG9V;YAAG,CAAC,CAAC;YAC/DgW,KAAK,CAAC3G,KAAK,CAACpN,QAAQ,GAAG,UAAU;YACjC+T,KAAK,CAAC3G,KAAK,CAAC6E,IAAI,GAAGD,IAAI,CAACC,IAAI,GAAG,IAAI;YACnC8B,KAAK,CAAC3G,KAAK,CAAC8E,GAAG,GAAGF,IAAI,CAACE,GAAG,GAAG,IAAI;YACjC6B,KAAK,CAAC3G,KAAK,CAAC/O,MAAM,GAAG2T,IAAI,CAAC3T,MAAM,GAAG,IAAI;YACvC0V,KAAK,CAAC3G,KAAK,CAAChP,KAAK,GAAG4T,IAAI,CAAC5T,KAAK,GAAG,IAAI;YACrC2V,KAAK,CAACvV,WAAW,CAACmV,UAAU,CAAC;YAC7B,IAAIJ,cAAc,EAAE;cAChBA,cAAc,CAAC/U,WAAW,CAACuV,KAAK,CAAC;YACrC;YACAhW,EAAE,EAAE;YACJ,IAAIA,EAAE,KAAKP,KAAK,CAAC2T,KAAK,CAAChM,MAAM,IAAIiB,QAAQ,CAACC,cAAc,CAAC7I,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC,EAAE;cAC1GjC,aAAa,CAAC0B,KAAK,CAACL,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,qBAAqB,CAAC;YACrE;UACJ,CAAC;QACL,CAAC;QACD,KAAK,IAAI0U,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGlV,KAAK,CAAC2T,KAAK,EAAEsB,EAAE,GAAGC,EAAE,CAACvN,MAAM,EAAEsN,EAAE,EAAE,EAAE;UACrD,IAAIT,IAAI,GAAGU,EAAE,CAACD,EAAE,CAAC;UACjBiB,OAAO,CAAC1B,IAAI,CAAC;QACjB;MACJ,CAAC,EAAEiB,OAAO,CAAC;IACf;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACInW,UAAU,CAACQ,SAAS,CAAC4V,aAAa,GAAG,UAAUnC,QAAQ,EAAEiD,UAAU,EAAEC,UAAU,EAAE;IAC7E,IAAIC,UAAU,GAAG9N,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClJ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,CAAC;IACpF,IAAIoW,aAAa,GAAG/N,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClJ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,iBAAiB,CAAC;IAC1F,IAAIqW,WAAW,GAAGhO,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClJ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,QAAQ,CAAC;IAC/E,IAAIsW,UAAU,GAAG,GAAG;IACpB,IAAItD,QAAQ,CAAC9M,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI8M,QAAQ,KAAK,OAAO,EAAE;MAC3DqD,WAAW,CAAChH,KAAK,CAACkG,MAAM,GAAG,GAAG;MAC9BY,UAAU,CAAC9G,KAAK,CAACkG,MAAM,GAAG,GAAG;MAC7B,OAAOc,WAAW,CAAC7D,iBAAiB,IAAI,CAAC,EAAE;QACvC6D,WAAW,CAACE,WAAW,CAACF,WAAW,CAACZ,QAAQ,CAAC,CAAC,CAAC,CAAC;MACpD;MACAQ,UAAU,GAAG,CAAC;MACdC,UAAU,GAAG7N,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClJ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,CAAC,CAACwW,cAAc,EAAE,CAAC,CAAC,CAAC,CAAClW,MAAM,GAAG,CAAC;MAC/GgW,UAAU,GAAGtD,QAAQ,CAAC9M,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,KAAK;IAClE;IACA,IAAI,CAAC9I,iBAAiB,CAACgZ,aAAa,CAAC,EAAE;MACnCA,aAAa,CAAC/G,KAAK,CAACoH,UAAU,GAAG,IAAI,CAACrX,SAAS,CAACO,gBAAgB,CAAC,CAAC,CAAC,CAACoS,iBAAiB,GAAG,IAAI;MAC5FqE,aAAa,CAAC/G,KAAK,CAACpC,SAAS,GAAG,YAAY,GAAGgJ,UAAU,GAAG,MAAM,GAAGC,UAAU,GAAG,YAAY,GAAGI,UAAU,GAAG,GAAG;IACrH;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIvX,UAAU,CAACQ,SAAS,CAAC6V,eAAe,GAAG,UAAUsB,MAAM,EAAEC,IAAI,EAAE;IAC3D,IAAI3X,GAAG,GAAG,IAAI,CAACI,SAAS;IACxB;IACAuX,IAAI,GAAG,IAAI,CAACvX,SAAS,CAACyD,aAAa;IACnC,IAAIwC,SAAS,GAAGH,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEqR,IAAI,CAAC,GAAG,GAAG;IACvC,IAAIxV,CAAC,GAAInC,GAAG,CAACa,WAAW,CAACQ,KAAK,GAAG,CAAC,GAAKgF,SAAS,GAAG,CAAE;IACrD,IAAIjE,CAAC,GAAIpC,GAAG,CAACa,WAAW,CAACS,MAAM,GAAG,CAAC,GAAK+E,SAAS,GAAG,CAAE;IACtD,IAAIuR,WAAW,GAAG,IAAIhZ,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC;IACvC,IAAIiZ,KAAK,GAAG,CAAC;IACb,IAAIC,KAAK,GAAG,CAAC;IACb,IAAI7U,QAAQ,GAAG5D,yBAAyB,CAACuY,WAAW,EAAED,IAAI,EAAE;MAAExV,CAAC,EAAEA,CAAC;MAAEC,CAAC,EAAEA;IAAE,CAAC,EAAE,IAAI,CAACnC,gBAAgB,CAAC;IAClG,IAAID,GAAG,CAACyJ,UAAU,IAAIzJ,GAAG,CAAC2D,YAAY,CAACY,MAAM,EAAE;MAC3CsT,KAAK,GAAG7X,GAAG,CAACyJ,UAAU,CAACsO,gBAAgB,CAAC,GAAG,CAAC,GAAG/X,GAAG,CAACyJ,UAAU,CAACuO,gBAAgB,CAAC,GAAG,CAAC;MACnFF,KAAK,GAAG9X,GAAG,CAACyJ,UAAU,CAACsO,gBAAgB,CAAC,GAAG,CAAC,GAAG/X,GAAG,CAACyJ,UAAU,CAACuO,gBAAgB,CAAC,GAAG,CAAC;IACvF;IACA;IACA,IAAIC,SAAS,GAAGjY,GAAG,CAACkY,cAAc,CAACjV,QAAQ,CAACd,CAAC,GAAG0V,KAAK,EAAE5U,QAAQ,CAACb,CAAC,GAAG0V,KAAK,CAAC;IAC1E9X,GAAG,CAACgE,cAAc,CAACC,QAAQ,GAAGgU,SAAS,CAAC,UAAU,CAAC;IACnDjY,GAAG,CAACgE,cAAc,CAACE,SAAS,GAAG+T,SAAS,CAAC,WAAW,CAAC;IACrD,IAAI3F,QAAQ;IACZ,IAAID,SAAS;IACb,IAAIjU,iBAAiB,CAACgT,QAAQ,CAACpR,GAAG,CAACqB,KAAK,EAAE,EAAE,CAAC,CAAC,EAAE;MAC5CiR,QAAQ,GAAGlB,QAAQ,CAACpR,GAAG,CAACqB,KAAK,EAAE,EAAE,CAAC,GAAG,EAAE;IAC3C,CAAC,MACI;MACDiR,QAAQ,GAAGpM,IAAI,CAAC6O,KAAK,CAAC/U,GAAG,CAACa,WAAW,CAACQ,KAAK,CAAC;IAChD;IACA,IAAIjD,iBAAiB,CAACgT,QAAQ,CAACpR,GAAG,CAACsB,MAAM,EAAE,EAAE,CAAC,CAAC,EAAE;MAC7C+Q,SAAS,GAAGjB,QAAQ,CAACpR,GAAG,CAACsB,MAAM,EAAE,EAAE,CAAC,GAAG,EAAE;IAC7C,CAAC,MACI;MACD+Q,SAAS,GAAGnM,IAAI,CAAC6O,KAAK,CAAC/U,GAAG,CAACa,WAAW,CAACS,MAAM,CAAC;IAClD;IACA,IAAI6W,QAAQ,GAAG7F,QAAQ,GAAG,GAAG,GAAG,CAACA,QAAQ,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;IACxD,IAAI8F,SAAS,GAAG/F,SAAS,GAAG,GAAG,GAAG,CAACA,SAAS,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;IAC3D,IAAIjO,MAAM;IACV,IAAIiU,OAAO,GAAIrY,GAAG,CAAC4B,MAAM,CAAC5B,GAAG,CAAC4B,MAAM,CAACwG,MAAM,GAAG,CAAC,CAAC,CAACkQ,aAAa,CAAE7K,QAAQ,EAAE,CAACuD,WAAW,EAAE;IACxF,IAAIhR,GAAG,CAACgE,cAAc,CAACC,QAAQ,IAAIjE,GAAG,CAACgE,cAAc,CAACE,SAAS,EAAE;MAC7DE,MAAM,GAAGpE,GAAG,CAACgE,cAAc,CAACC,QAAQ,CAACwJ,QAAQ,EAAE,GAAG,GAAG,GAAGzN,GAAG,CAACgE,cAAc,CAACE,SAAS,CAACuJ,QAAQ,EAAE;IACnG,CAAC,MACI;MACDrJ,MAAM,GAAG,KAAK;IAClB;IACA,IAAImU,eAAe,GAAG,sDAAsD,GAAGjG,QAAQ,GAAG,GAAG,GAAGD,SAAS,GACrG,QAAQ,GAAGsF,IAAI,GAAG,UAAU,GAAGvT,MAAM,GAAG,WAAW,GAAGiU,OAAO,GAAG,OAAO,GAAGX,MAAM;IACpFrO,QAAQ,CAACC,cAAc,CAAC,IAAI,CAAClJ,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,cAAc,CAAC,CAACwX,SAAS,GACvE,WAAW,GAAG,IAAI,CAACpY,SAAS,CAACW,OAAO,CAACC,EAAE,GAAG,mBAAmB,GAAG,iCAAiC,GAAGmX,QAAQ,GAAG,UAAU,GACrHC,SAAS,GAAG,gBAAgB,GAAGG,eAAe,GAAG,GAAG,GAAG,OAAO,GAAG,IAAI,CAACnY,SAAS,CAACyW,iBAAiB,CAAC,eAAe,CAAC,GAAG,UAAU;EAC7I,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI9W,UAAU,CAACQ,SAAS,CAACsF,UAAU,GAAG,UAAU4S,OAAO,EAAEC,OAAO,EAAE1U,cAAc,EAAE;IAC1E,IAAI,IAAI,CAAC5D,SAAS,CAACyD,aAAa,IAAI,IAAI,CAACzD,SAAS,CAACmF,aAAa,IAAI,IAAI,CAACnF,SAAS,CAACoF,YAAY,EAAE;MAC7F,IAAI,CAACpF,SAAS,CAACyD,aAAa,GAAG,IAAI,CAACzD,SAAS,CAACmF,aAAa;IAC/D;IACA,IAAIoT,KAAK,GAAG,IAAI,CAACvY,SAAS,CAACyD,aAAa;IACxC,IAAIuC,OAAO,GAAG,IAAI,CAAChG,SAAS,CAACwB,MAAM,CAAC,IAAI,CAACxB,SAAS,CAACwB,MAAM,CAACwG,MAAM,GAAG,CAAC,CAAC,CAACtG,SAAS,KAAK,iBAAiB,GACjG,EAAE,GAAG,CAAC;IACV,IAAIK,CAAC;IACL,IAAIC,CAAC;IACL,IAAIiE,SAAS,GAAGH,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEqS,KAAK,CAAC,GAAG,GAAG;IACxCxW,CAAC,GAAIsW,OAAO,GAAG,CAAC,GAAKpS,SAAS,GAAG,CAAE;IACnCjE,CAAC,GAAIsW,OAAO,GAAG,CAAC,GAAKrS,SAAS,GAAG,CAAE;IACnC,IAAIpD,QAAQ,GAAG5D,yBAAyB,CAAC2E,cAAc,EAAE2U,KAAK,EAAE;MAAExW,CAAC,EAAEA,CAAC;MAAEC,CAAC,EAAEA;IAAE,CAAC,EAAE,IAAI,CAACnC,gBAAgB,CAAC;IACtGmG,OAAO,GAAG,IAAI,CAAChG,SAAS,CAACuF,cAAc,GAAG,CAAC,GAAGS,OAAO;IACrDjE,CAAC,IAAIc,QAAQ,CAACd,CAAC,GAAIsW,OAAO,GAAG,CAAE;IAC/BrW,CAAC,GAAIA,CAAC,IAAIa,QAAQ,CAACb,CAAC,GAAIsW,OAAO,GAAG,CAAE,CAAC,GAAItS,OAAO;IAChD,IAAI,CAAChG,SAAS,CAACuJ,KAAK,GAAGzD,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEqS,KAAK,GAAG,CAAC,CAAC;IAC7C,IAAKva,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACkF,kBAAkB,CAAC,IAAK,IAAI,CAAClF,SAAS,CAACkF,kBAAkB,CAAClD,CAAC,KAAK,CAAC,IACnG,IAAI,CAAChC,SAAS,CAACkF,kBAAkB,CAACnD,CAAC,KAAK,CAAE,IAAM/D,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACwY,iBAAiB,CAAC,IACnGxa,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACyY,kBAAkB,CAAE,EAAE;MACvD,IAAI,CAACzY,SAAS,CAACwY,iBAAiB,GAAGH,OAAO;MAC1C,IAAI,CAACrY,SAAS,CAACyY,kBAAkB,GAAGH,OAAO;IAC/C;IACA,IAAI,CAACta,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACkF,kBAAkB,CAAC,IAAKlH,iBAAiB,CAAC4F,cAAc,CAAC7B,CAAC,CAAE,KAC7F,IAAI,CAAC/B,SAAS,CAACuD,YAAY,CAACC,UAAU,KAAK,CAAC,IACzC,IAAI,CAACxD,SAAS,CAACuD,YAAY,CAACC,UAAU,KAAK+U,KAAK,IAAI,CAAC,IAAI,CAACvY,SAAS,CAACsD,YAAY,CAAC,EAAE;MACvF,IAAK+U,OAAO,KAAK,IAAI,CAACrY,SAAS,CAACwY,iBAAiB,IAAIF,OAAO,KAAK,IAAI,CAACtY,SAAS,CAACyY,kBAAkB,EAAG;QACjG,IAAIC,KAAK,GAAG3W,CAAC,IAAK,IAAI,CAAC/B,SAAS,CAACwY,iBAAiB,GAAG,CAAC,GAAKvS,SAAS,GAAG,CAAE,CAAC;QAC1E,IAAI0S,KAAK,GAAG3W,CAAC,IAAK,IAAI,CAAChC,SAAS,CAACyY,kBAAkB,GAAG,CAAC,GAAKxS,SAAS,GAAG,CAAE,GAAGD,OAAO,CAAC;QACrF,IAAI,CAAChG,SAAS,CAACkF,kBAAkB,CAACnD,CAAC,GAAG,IAAI,CAAC/B,SAAS,CAACkF,kBAAkB,CAACnD,CAAC,GAAG2W,KAAK;QACjF,IAAI,CAAC1Y,SAAS,CAACkF,kBAAkB,CAAClD,CAAC,GAAG,IAAI,CAAChC,SAAS,CAACkF,kBAAkB,CAAClD,CAAC,GAAG2W,KAAK;MACrF;IACJ;IACA,IAAI,CAAC3a,iBAAiB,CAAC,IAAI,CAACgC,SAAS,CAACkF,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAClF,SAAS,CAACuF,cAAc,EAAE;MACzF,IAAI,IAAI,CAACvF,SAAS,CAACkF,kBAAkB,CAACnD,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC/B,SAAS,CAACkF,kBAAkB,CAACnD,CAAC,KAAKA,CAAC,IACnF,CAAC,IAAI,CAAC/B,SAAS,CAAC+D,qBAAqB,EAAE;QAC1ChC,CAAC,GAAG,IAAI,CAAC/B,SAAS,CAACkF,kBAAkB,CAACnD,CAAC;MAC3C;MACA,IAAI,IAAI,CAAC/B,SAAS,CAACkF,kBAAkB,CAAClD,CAAC,KAAK,CAAC,IAAI,IAAI,CAAChC,SAAS,CAACkF,kBAAkB,CAAClD,CAAC,KAAKA,CAAC,IACnF,CAAC,IAAI,CAAChC,SAAS,CAAC+D,qBAAqB,EAAE;QAC1C/B,CAAC,GAAG,IAAI,CAAChC,SAAS,CAACkF,kBAAkB,CAAClD,CAAC;MAC3C;IACJ;IACA,IAAI,CAAChC,SAAS,CAACkT,cAAc,GAAG,IAAI1U,KAAK,CAAC,CAACuD,CAAC,GAAI,IAAI,GAAG,IAAI,CAAC/B,SAAS,CAACuD,YAAY,CAACC,UAAW,IAAI,IAAI,CAACxD,SAAS,CAACuJ,KAAK,EAAE,CAACvH,CAAC,GAAI,IAAI,GAAG,IAAI,CAAChC,SAAS,CAACuD,YAAY,CAACC,UAAW,IAAI,IAAI,CAACxD,SAAS,CAACuJ,KAAK,CAAC;IACrM,IAAI,CAACvJ,SAAS,CAACwY,iBAAiB,GAAGH,OAAO;IAC1C,IAAI,CAACrY,SAAS,CAACyY,kBAAkB,GAAGH,OAAO;IAC3C,OAAO,IAAI9Z,KAAK,CAACuD,CAAC,EAAEC,CAAC,CAAC;EAC1B,CAAC;EACD;AACJ;AACA;AACA;EACIrC,UAAU,CAACQ,SAAS,CAACyY,OAAO,GAAG,YAAY;IACvC,IAAI,CAAC5Y,SAAS,GAAG,IAAI;IACrB,IAAI,CAAC8K,aAAa,GAAG,EAAE;IACvB,IAAI,CAACxE,WAAW,GAAG,IAAI;IACvB,IAAI,CAAC7D,YAAY,GAAG,IAAI;IACxB,IAAI,CAACsI,UAAU,GAAG,IAAI;IACtB,IAAI,CAACiJ,KAAK,GAAG,EAAE;IACf,IAAI,CAACpS,eAAe,GAAG,IAAI;IAC3B,IAAI,CAACd,aAAa,GAAG,IAAI;IACzB,IAAI,CAACb,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACoB,UAAU,GAAG,IAAI;IACtB,IAAI,CAACtD,iBAAiB,CAAC,IAAI,CAACmF,IAAI,CAAC,EAAE;MAC/B,IAAI,CAACA,IAAI,CAACyV,OAAO,EAAE;IACvB;IACA,IAAI,CAACzV,IAAI,GAAG,IAAI;EACpB,CAAC;EACD,OAAOxD,UAAU;AACrB,CAAC,EAAG;AACJ,SAASA,UAAU"},"metadata":{},"sourceType":"module"}